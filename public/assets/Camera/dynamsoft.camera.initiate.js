// @20180731 103411 
/*
 * Dynamsoft JavaScript Library
 * Product: Dynamsoft Webcam SDK
 * Web Site: https://www.dynamsoft.com
 *
 * Copyright 2018, Dynamsoft Corporation
 * Author: Dynamsoft R&D Team
 * Version: 6.2.0.0720
 */
var dynamsoft=dynamsoft||{};dynamsoft.lib=dynamsoft.lib||{};dynamsoft.lib.detect=dynamsoft.lib.detect||{};dynamsoft.initOrder=dynamsoft.initOrder||[];dynamsoft.dcsEnv=dynamsoft.dcsEnv||{};dynamsoft.dcsEnv.host=dynamsoft.dcsEnv.host||{};dynamsoft.dcsEnv.host.win=dynamsoft.dcsEnv.host.win||window;dynamsoft.dcsEnv._lang=0;var dynamsoft=dynamsoft||{};(function(f,c,b){var d=20180718;if(c._preDefine_ver){if(c._preDefine_ver>=d){return}}c._preDefine_ver=d;var a=0,e=function(g,j){for(var h in j){if(j.hasOwnProperty(h)){g[h]=j[h]}}return g};if(!c.lib){c.lib={}}e(c.lib,{win:f,doc:f.document,debug:!1,nil:b,mix:e,keys:Object.keys,guid:function(g){return(g||"")+a++},now:Date.now||function(){return +new Date()},noop:function(){}})})(typeof window!=="undefined"?window:this,dynamsoft);(function(d){var b=!({toString:1}.propertyIsEnumerable("toString")),c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","toLocaleString","valueOf"];function a(f,e){return({}).hasOwnProperty.call(f,e)}d.keys=Object.keys||function(h){var e=[],g,f;for(g in h){if(a(h,g)){e.push(g)}}if(b){for(f=c.length-1;f>=0;f--){g=c[f];if(a(h,g)){e.push(g)}}}return e}})(dynamsoft.lib);(function(j,k){var f=20180508;if(j._isXXX_ver){if(j._isXXX_ver>=f){return}}j._isXXX_ver=f;var n=j.mix,l,g,i=!1,e=!0,d=i,c={}.hasOwnProperty,m={};function h(p){return p===k}function a(p){return p!==k}n(j,{isDef:a,isUndef:h,isUndefined:h,isNull:function(p){return(p===null)},isNaN:function(p){return isNaN(p)},type:function(p){if(p===null||p===k){return String(p)}return m[{}.toString.call(p)]||"object"},isPlainObject:function(r){if(!r||j.type(r)!=="object"||r.nodeType||r.window==r){return i}var o,p;try{if((p=r.constructor)&&!c(r,"constructor")&&!c(p.prototype,"isPrototypeOf")){return i}}catch(q){return i}for(o in r){}return(h(o)||c(r,o))}});function b(o,p){m["[object "+o+"]"]=(p=o.toLowerCase());j["is"+o]=function(q){return j.type(q)===p}}b("Function");j.each=l=function(s,u,o){if(s){var v,q,w,t=0,p=s.length,r=h(p)||j.isFunction(s);o=o||null;if(r){w=j.keys(s);for(;t<w.length;t++){v=w[t];if(u.call(o,s[v],v,s)===i){break}}}else{for(q=s[0];t<p;q=s[++t]){if(u.call(o,q,t,s)===i){break}}}}return s};g=["String","Object","Boolean","Number"];if(Array.isArray){j.isArray=Array.isArray}else{g.push("Array")}l(g,b)})(dynamsoft.lib);(function(c){var a=c.mix,b=c.win,e;var d=20180508;if(c._log_ver){if(c.isNumber(c._log_ver)&&c._log_ver>=d){return}}c._log_ver=d;if(c.isDef(b.console)){e=b.console;if(!c.isFunction(e.log)||!c.isFunction(e.error)){e=false}}a(c,{log:function(f){if(c.debug&&e){e.log(f)}},error:function(f){if(c.debug&&e){e.error(f)}},getLogger:function(){var f=c.log;return{warn:f,log:f,info:f,debug:f}}})})(dynamsoft.lib);(function(b){var a=20180508;if(b._random_ver){if(b._random_ver>=a){return}}b._random_ver=a;b.getRandom=function(){var d=b.now()%10000,c=[],f;for(var e=0;e<5;e++){f=Math.floor(Math.random()*10);if(e==0&&f==0){e=-1;continue}c.push(f)}if(d<10){c.push("000")}else{if(d<100){c.push("00")}else{if(d<1000){c.push("0")}}}c.push(d);return c.join("")}})(dynamsoft.lib);(function(b){var a=20180508;if(b._strUtil_ver){if(b.isNumber(b._strUtil_ver)&&b._strUtil_ver>=a){return}}b._strUtil_ver=a;b.mix(b,{startsWith:function(d,c){return d.lastIndexOf(c,0)===0},endsWith:function(e,d){var c=e.length-d.length;return c>=0&&e.indexOf(d,c)===c},replaceAll:function(e,d,c){return e.replace(new RegExp(d,"gi"),c)},upperCaseFirst:function(c){return c.charAt(0).toUpperCase()+c.substr(1)},makeArray:function(h){if(h==null){return[]}if(b.isArray(h)){return h}var c=typeof h.length,g=typeof h;if(c!=="number"||h.alert||g==="string"||(g==="function"&&!("item" in h&&c==="number"))){return[h]}var e=[];for(var f=0,d=h.length;f<d;f++){e[f]=h[f]}return e}})})(dynamsoft.lib);(function(j){var b=20180508;if(j._navInfo_ver){if(j.isNumber(j._navInfo_ver)&&j._navInfo_ver>=b){return}}j._navInfo_ver=b;var z="",H=!1,v=!0,D=j.win,h=j.doc,L=h&&h.documentElement,s=navigator,C=s.userAgent.toLowerCase(),u=s.platform.toLowerCase(),E=h.location.protocol,a=(E==="https:"),o=(E!=="https:"&&E!=="http:"),A=(u=="win32")||(u=="win64")||(u=="windows"),x=(u=="mac68k")||(u=="macppc")||(u=="macintosh")||(u=="macintel")||(u=="iphone"),J=(u.indexOf("linux")>=0),g=(u=="win64")||(C.indexOf("wow64")>=0)||(C.indexOf("x86_64")>=0)||(C.indexOf("win64")>=0)||(C.indexOf("x64")>=0),q=C.indexOf("msie"),y=C.indexOf("trident"),w=C.indexOf("rv:"),K=C.indexOf("edge"),F=C.match(/version\/([\d.]+).*safari/),l=F?v:H,n=F?F[1]:0,r=C.indexOf("firefox"),t=(r!=-1),k=A&&!t&&(K!=-1),B=C.indexOf("chrome"),e=!k&&(B!=-1),d=A&&!t&&!k&&!e&&(q!=-1||y!=-1||w!=-1),i="",c=0,m=C.match(/Gecko/)?v:H,f=H,G=z,p=H,I=D.JSON;if(k){F=C.slice(K+5);F=F.slice(0,F.indexOf(" "));i=F;F=F.slice(0,F.indexOf("."));if(F>=27){f=v}}else{if(e){F=C.slice(B+7);F=F.slice(0,F.indexOf(" "));G=F;F=F.slice(0,F.indexOf("."));if(F>=27){f=v}}else{if(t){F=C.slice(r+8);F=F.slice(0,F.indexOf(" "));G=F;F=F.slice(0,F.indexOf("."));if(F>=27){f=v}}else{if(d){if(q!=-1){F=C.slice(q+4);F=F.slice(0,F.indexOf(";"));i=F}else{if(w!=-1){F=C.slice(w+3);F=F.slice(0,F.indexOf(";"));F=F.slice(0,F.indexOf(")"));i=F}else{if(y!=-1){F=C.slice(y+7);F=F.slice(0,F.indexOf(";"));i=F}}}if(i===""||i>8){f=v}G=F}else{if(l){if(F){G=F[1]}F=n;F=F.slice(0,F.indexOf("."));if(F>=7){f=v}}}}}}if(k||d){if(h.documentMode){c=h.documentMode}else{c=5;if(h.compatMode){if(h.compatMode=="CSS1Compat"){c=7}}}}if(L&&L.querySelector&&(!d||d&&(G>8))){p=v}if(d&&G<9){I=null}dynamsoft.navInfo={host:D,bSSL:a,bFileSystem:o,bWin:A,bMac:x,bLinux:J,isX64:g,bIE:d,bEdge:k,bChrome:e,bFirefox:t,bSafari:l,bGecko:m,bHTML5Edition:f,strBrowserVersion:G,IEMode:c,bQuerySelectorSupported:p,nativeJson:I,nodejs:H,scrollBarWidth:H}})(dynamsoft.lib);(function(b){var a=20180508;if(b._extend_ver){if(b.isNumber(b._extend_ver)&&b._extend_ver>=a){return}}b._extend_ver=a;b.extend=function(c,d){var e=function(){c.apply(this,arguments);if(d){d.apply(this,arguments)}};b.each(c.prototype,function(g,f){e.prototype[f]=g});e.prototype.constructor=e;return e}})(dynamsoft.lib);(function(c){var a=20180508;if(c._attribute_ver){if(c.isNumber(c._attribute_ver)&&c._attribute_ver>=a){return}}c._attribute_ver=a;function b(e){var d=this,f=d.constructor;d.__attrs={};d.__attrVals={};d.userConfig=e;while(f){d.addAttrs(f.ATTRS);f=f.superclass?f.superclass.constructor:null}c.mix(d.__attrs,e)}c.mix(b.prototype,{get:function(e){var d=this;if(e in d.__attrs){return d.__attrs[e]}return""},set:function(f,e){var d=this;if(f in d.__attrs){d.__attrs[f]=e}},addAttrs:function(d){c.mix(this.__attrs,d)}});b.extend=function(f){var d=this,g,e;f=f||{};if(f.constructor){g=f.constructor}e=c.extend(d,g);c.mix(e,f);return e};c.Attributes=b})(dynamsoft.lib);(function(h){var m=20180508;if(h._json_ver){if(h._json_ver>=m){return}}h._json_ver=m;var j=h.win.JSON;if(j&&j.parse&&j.stringify){h.parse=j.parse;h.stringify=j.stringify;return}var l=(function(){var q={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},p={},r=/["\b\f\n\r\t\x00-\x1f]/g,o=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;h.each(q,function(s,t){p[s]=t});p["\\/"]="/";p["\\\\"]="\\";return{quote:function(s){return'"'+s.replace(r,function(t){var u;if(!(u=q[t])){u="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(0-4)}return u})+'"'},unQuote:function(s){return s.slice(1,s.length-1).replace(o,function(t){var u;if(!(u=p[t])){u=String.fromCharCode(parseInt(t.slice(2),16))}return u})}}})(),i;function b(o){return o<10?"0"+o:o}function f(F,z,r,E,D,t){var u=t;t+=E;var v,q,x=0,s;if(r!==undefined){v=r}else{v=h.keys(F)}var C=[];for(q=v.length;x<q;x++){s=v[x];var o=i(s,F,z,r,E,D,t);if(o!==undefined){var w=l.quote(s);w+=":";if(E){w+=" "}w+=o;C[C.length]=w}}var A;if(!C.length){A="{}"}else{if(!E){A="{"+C.join(",")+"}"}else{var y=",\n"+t;var B=C.join(y);A="{\n"+t+B+"\n"+u+"}"}}return A}function n(B,t,p,A,z,q){var r=q;q+=A;var y=[];var v=B.length;var u=0;while(u<v){var o=i(String(u),B,t,p,A,z,q);if(o===undefined){y[y.length]="null"}else{y[y.length]=o}++u}var w;if(!y.length){w="[]"}else{if(!A){w="["+y.join(",")+"]"}else{var s="\n,"+q;var x=y.join(s);w="[\n"+q+x+"\n"+r+"]"}}return w}i=function(r,q,u,s,v,p,o){var t=q[r];if(t&&typeof t==="object"){if(typeof t.toJSON==="function"){t=t.toJSON(r)}else{if(t instanceof Date){t=isFinite(t.valueOf())?t.getUTCFullYear()+"-"+b(t.getUTCMonth()+1)+"-"+b(t.getUTCDate())+"T"+b(t.getUTCHours())+":"+b(t.getUTCMinutes())+":"+b(t.getUTCSeconds())+"Z":null}else{if(t instanceof String||t instanceof Number||t instanceof Boolean){t=t.valueOf()}}}}if(u!==undefined){t=u.call(q,r,t)}switch(typeof t){case"number":return isFinite(t)?String(t):"null";case"string":return l.quote(t);case"boolean":return String(t);case"object":if(!t){return"null"}if(h.isArray(t)){return n(t,u,s,v,p,o)}return f(t,u,s,v,p,o)}return undefined};h.stringify=function(r,o,q){var t="";var p,s;if(o){if(typeof o==="function"){s=o}else{if(h.isArray(o)){p=o}}}if(typeof q==="number"){q=Math.min(10,q);t=new Array(q+1).join(" ")}else{if(typeof q==="string"){t=q.slice(0,10)}}return i("",{"":r},s,p,t,[],"")};var c={},d={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},a;c.yy={unQuote:l.unQuote};a=function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)};a.prototype={constructor:function(o){var p=this;p.rules=[];h.mix(p,o);p.resetInput(p.input)},resetInput:function(o){h.mix(this,{input:o,matched:"",stateStack:[a.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var o=this,p=o.stateStack[o.stateStack.length-1],q=[];p=o.mapState(p);h.each(o.rules,function(s){var t=s.state||s[3];if(!t){if(p==a.STATIC.INITIAL){q.push(s)}}else{if(h.inArray(p,t)){q.push(s)}}});return q},pushState:function(o){this.stateStack.push(o)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var q=this,s=a.STATIC.DEBUG_CONTEXT_LIMIT,o=q.matched,r=q.match,p=q.input;o=o.slice(0,o.length-r.length);var u=(o.length>s?"...":"")+o.slice(-s).replace(/\n/," "),t=r+p;t=t.slice(0,s)+(t.length>s?"...":"");return u+t+"\n"+new Array(u.length+1).join("-")+"^"},mapSymbol:function(q){var o=this,p=o.symbolMap;if(!p){return q}return p[q]||(p[q]=(++o.symbolId))},mapReverseSymbol:function(p){var o=this,r=o.symbolMap,q,s=o.reverseSymbolMap;if(!s&&r){s=o.reverseSymbolMap={};h.each(r,function(u,t){s[u]=t})}if(s){return s[p]}else{return p}},mapState:function(q){var o=this,p=o.stateMap;if(!p){return q}return p[q]||(p[q]=(++o.stateId))},lex:function(){var y=this,w=y.input,r,v,o,t,z,x=y.getCurrentRules();y.match=y.text="";if(!w){return y.mapSymbol(a.STATIC.END_TAG)}for(r=0;r<x.length;r++){v=x[r];var u=v.regexp||v[1],p=v.token||v[0],q=v.action||v[2]||undefined;if((o=w.match(u))){z=o[0].match(/\n.*/g);if(z){y.lineNumber+=z.length}h.mix(y,{firstLine:y.lastLine,lastLine:y.lineNumber+1,firstColumn:y.lastColumn,lastColumn:z?z[z.length-1].length-1:y.lastColumn+o[0].length});var s;s=y.match=o[0];y.matches=o;y.text=s;y.matched+=s;t=q&&q.call(y);if(t===undefined){t=p}else{t=y.mapSymbol(t)}w=w.slice(s.length);y.input=w;if(t){return t}else{return y.lex()}}}h.error("lex error at line "+y.lineNumber+":\n"+y.showDebugInfo());return undefined}};a.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var e=new a({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});c.lexer=e;e.symbolMap={"$EOF":1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,"$START":13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};c.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return this.$1==="true"}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var o={};o[this.$1.key]=this.$1.value;return o}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];c.table={gotos:{"0":{"14":7,"15":8,"16":9,"17":10},"2":{"15":12,"16":9,"17":10,"18":13},"3":{"19":16,"20":17},"18":{"15":23,"16":9,"17":10},"20":{"15":24,"16":9,"17":10},"21":{"19":25}},action:{"0":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"1":{"1":[2,2,0],"3":[2,2,0],"6":[2,2,0],"8":[2,2,0]},"2":{"2":[1,0,1],"5":[1,0,2],"6":[1,0,11],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"3":{"2":[1,0,14],"8":[1,0,15]},"4":{"1":[2,3,0],"3":[2,3,0],"6":[2,3,0],"8":[2,3,0]},"5":{"1":[2,6,0],"3":[2,6,0],"6":[2,6,0],"8":[2,6,0]},"6":{"1":[2,7,0],"3":[2,7,0],"6":[2,7,0],"8":[2,7,0]},"7":{"1":[0,0,0]},"8":{"1":[2,1,0]},"9":{"1":[2,4,0],"3":[2,4,0],"6":[2,4,0],"8":[2,4,0]},"10":{"1":[2,5,0],"3":[2,5,0],"6":[2,5,0],"8":[2,5,0]},"11":{"1":[2,10,0],"3":[2,10,0],"6":[2,10,0],"8":[2,10,0]},"12":{"3":[2,8,0],"6":[2,8,0]},"13":{"3":[1,0,18],"6":[1,0,19]},"14":{"4":[1,0,20]},"15":{"1":[2,15,0],"3":[2,15,0],"6":[2,15,0],"8":[2,15,0]},"16":{"3":[2,13,0],"8":[2,13,0]},"17":{"3":[1,0,21],"8":[1,0,22]},"18":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"19":{"1":[2,11,0],"3":[2,11,0],"6":[2,11,0],"8":[2,11,0]},"20":{"2":[1,0,1],"5":[1,0,2],"7":[1,0,3],"9":[1,0,4],"10":[1,0,5],"11":[1,0,6]},"21":{"2":[1,0,14]},"22":{"1":[2,16,0],"3":[2,16,0],"6":[2,16,0],"8":[2,16,0]},"23":{"3":[2,9,0],"6":[2,9,0]},"24":{"3":[2,12,0],"8":[2,12,0]},"25":{"3":[2,14,0],"8":[2,14,0]}}};c.parse=function g(y){var A=this,o=A.lexer,t,F,E,I=A.table,B=I.gotos,s=I.action,r=A.productions,u=[null],v=[0];o.resetInput(y);while(1){t=v[v.length-1];if(!F){F=o.lex()}if(!F){h.log("it is not a valid input: "+y,"error");return false}E=s[t]&&s[t][F];if(!E){var w=[],D;if(s[t]){h.each(s[t],function(L,M){w.push(A.lexer.mapReverseSymbol(M))})}D="Syntax error at line "+o.lineNumber+":\n"+o.showDebugInfo()+"\nexpect "+w.join(", ");h.log(D);return false}switch(E[d.TYPE_INDEX]){case d.SHIFT_TYPE:v.push(F);u.push(o.text);v.push(E[d.TO_INDEX]);F=null;break;case d.REDUCE_TYPE:var J=r[E[d.PRODUCTION_INDEX]],z=J.symbol||J[0],q=J.action||J[2],C=J.rhs||J[1],H=C.length,G=0,K,x=u[u.length-H];A.$$=x;K=undefined;for(;G<H;G++){A["$"+(H-G)]=u[u.length-1-G]}if(q){K=q.call(A)}if(K!==undefined){x=K}else{x=A.$$}if(H){v=v.slice(0,-1*H*2);u=u.slice(0,-1*H)}v.push(z);u.push(x);var p=B[v[v.length-2]][v[v.length-1]];v.push(p);break;case d.ACCEPT_TYPE:return x}}return undefined};function k(w,o,x){var s=w[o],t,v,u;if(typeof s==="object"){if(h.isArray(s)){t=0;v=s.length;var r=[];while(t<v){u=k(s,String(t),x);if(u!==undefined){r[r.length]=u}}s=r}else{var y=h.keys(s);t=0;for(v=y.length;t<v;t++){var q=y[t];u=k(s,q,x);if(u===undefined){delete s[q]}else{s[q]=u}}}}return x.call(w,o,s)}h.parse=function(q,o){var p=c.parse(String(q));if(o){return k({"":p},"",o)}else{return p}}})(dynamsoft.lib);(function(lib,nil){var _utilities_ver=20180508;if(lib._utilities_ver){if(lib._utilities_ver>=_utilities_ver){return}}lib._utilities_ver=_utilities_ver;var AP=Array.prototype,win=lib.win,doc=lib.doc,navInfo=dynamsoft.navInfo,EMPTY_STR="",FALSE=!1,TRUE=!0,mix=lib.mix;var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;var logger=lib.getLogger(),location=win.location,domReady=0,callbacks=[],POLL_RETIRES=500,POLL_INTERVAL=40,RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT="DOMContentLoaded",READY_STATE_CHANGE_EVENT="readystatechange",LOAD_EVENT="load",COMPLETE="complete",addEventListener=standardEventModel?function(el,type,fn){el.addEventListener(type,fn,false)}:function(el,type,fn){el.attachEvent("on"+type,fn)},removeEventListener=standardEventModel?function(el,type,fn){el.removeEventListener(type,fn,false)}:function(el,type,fn){el.detachEvent("on"+type,fn)};lib.mix(lib,{isWindow:function(obj){return obj!=null&&obj==obj.window},globalEval:function(data){if(data&&RE_NOT_WHITESPACE.test(data)){if(win.execScript){win.execScript(data)}else{(function(data){win.eval.call(win,data)})(data)}}},ready:function(fn){if(domReady){try{fn(lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}else{callbacks.push(fn)}return this}});function fireReady(){if(domReady){return}if(doc&&!navInfo.nodejs){removeEventListener(win,LOAD_EVENT,fireReady)}domReady=1;for(var i=0;i<callbacks.length;i++){try{callbacks[i](lib)}catch(e){lib.log(e.stack||e,"error");setTimeout(function(){throw e},0)}}}function bindReady(){if(!doc||doc.readyState===COMPLETE){fireReady();return}addEventListener(win,LOAD_EVENT,fireReady);if(standardEventModel){var domReady=function(){removeEventListener(doc,DOM_READY_EVENT,domReady);fireReady()};addEventListener(doc,DOM_READY_EVENT,domReady)}else{var stateChange=function(){if(doc.readyState===COMPLETE){removeEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);fireReady()}};addEventListener(doc,READY_STATE_CHANGE_EVENT,stateChange);var notframe,docElem=doc&&doc.documentElement,doScroll=docElem&&docElem.doScroll;try{notframe=(win.frameElement===null)}catch(e){notframe=false}if(doScroll&&notframe){var readyScroll=function(){try{doScroll("left");fireReady()}catch(ex){setTimeout(readyScroll,POLL_INTERVAL)}};readyScroll()}}}bindReady();if(navInfo.bIE){try{doc.execCommand("BackgroundImageCache",false,true)}catch(e){}}})(dynamsoft.lib);(function(d){var c=20180508;if(d._domUtil_ver){if(d._domUtil_ver>=c){return}}d._domUtil_ver=c;var b="",a="none";d.mix(d,{get:function(e){return d.doc.getElementById(e)},hide:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=a}},show:function(f){var e=d.isString(f)?d.get(f):f;if(e){e.style.display=b}},toggle:function(f){var e=d.isString(f)?d.get(f):f;if(e){if(e.style.display===a){e.style.display=b}else{e.style.display=a}}},empty:function(e){if(!e){return}while(e.firstChild){e.removeChild(e.firstChild)}}})})(dynamsoft.lib);(function(d){var c=Array.prototype,b=c.indexOf,a=c.filter;if(!d.isFunction(b)){b=function(g,h){var f;if(this==null){return -1}var i=Object(this);var e=i.length>>>0;if(e===0){return -1}var j=+h||0;if(Math.abs(j)===Infinity){j=0}if(j>=e){return -1}f=Math.max(j>=0?j:e-Math.abs(j),0);while(f<e){if(f in i&&i[f]===g){return f}f++}return -1}}d.mix(d,{filter:a?function(e,g,f){return a.call(e,g,f||this)}:function(e,h,g){var f=[];d.each(e,function(l,k,j){if(h.call(g||this,l,k,j)){f.push(l)}});return f},indexOf:function(f,e){return b.call(e,f)}})})(dynamsoft.lib);(function(c){var b=Array.prototype,a=Function.prototype;if(!c.isFunction(a.bind)){a.bind=function(f){var e=this;if(1<arguments.length){var d=b.slice.call(arguments,1);return function(){return e.apply(f,arguments.length?d.concat(b.slice.call(arguments)):d)}}return function(){return arguments.length?e.apply(f,arguments):e.call(f)}}}})(dynamsoft.lib);(function(e){var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=String.prototype,c="",a=d.trim;if(!a){a=d.trim=function(){return this.replace(b,c)}}e.trim=function(f){return f==null?c:a.call(f)}})(dynamsoft.lib);(function(g,c){var t="",j=!1,f=!0,s=g.getLogger(),l=g.isDef,a=g.each,k="&",m="=",p=16,d={"&amp;":"&","&gt;":">","&lt;":"<","&#x60;":"`","&#x2F;":"/","&quot;":'"',"&#x27;":"'"},o={},h,i,b=/[\-#$\^*()+\[\]{}|\\,.?\s]/g;a(d,function(v,u){o[v]=u});function r(v){var u=typeof v;return v==null||(u!=="object"&&u!=="function")}function q(){if(h){return h}var u=t;a(d,function(v){u+=v+"|"});u=u.slice(0,-1);h=new RegExp(u,"g");return h}function n(){if(i){return i}var u=t;a(o,function(v){u+=v+"|"});u+="&#(\\d{1,5});";i=new RegExp(u,"g");return i}function e(u){return encodeURIComponent(String(u))}g.mix(g,{urlEncode:e,urlDecode:function(u){return decodeURIComponent(u.replace(/\+/g," "))},fromUnicode:function(u){return u.replace(/\\u([a-f\d]{4})/ig,function(v,w){return String.fromCharCode(parseInt(w,p))})},escapeHtml:function(u){return(u+"").replace(q(),function(v){return o[v]})},escapeRegExp:function(u){return u.replace(b,"\\$&")},unEscapeHtml:function(u){return u.replace(n(),function(v,w){return d[v]||String.fromCharCode(+w)})},param:function(y,x,v,u){x=x||k;v=v||m;if(g.isUndef(u)){u=f}var w=[];a(y,function(B,z){var A=e(z);if(r(B)){w.push(A);if(l(B)){w.push(v,e(B+t))}w.push(x)}else{if(g.isArray(B)&&B.length){a(B,function(C){if(r(C)){w.push(A,(u?e("[]"):t));if(l(C)){w.push(v,e(C+t))}w.push(x)}})}}});w.pop();return w.join(t)},unparam:function(B,F,E){if(!g.isString(B)||!(B=g.trim(B))){return{}}F=F||k;E=E||m;var A={},C,u=g.urlDecode,v=B.split(F),D,w,x=0,y=v.length;for(;x<y;++x){C=g.indexOf(E,v[x]);if(C===-1){D=u(v[x]);w=c}else{D=u(v[x].substring(0,C));w=v[x].substring(C+1);try{w=u(w)}catch(z){s.error("decodeURIComponent error : "+w);s.error(z)}if(g.endsWith(D,"[]")){D=D.substring(0,D.length-2)}}if(D in A){if(g.isArray(A[D])){A[D].push(w)}else{A[D]=[A[D],w]}}else{A[D]=w}}return A}})})(dynamsoft.lib);(function(d){var c=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/;function b(j,f){var e=0,g=j.length-1,k=[],h;for(;g>=0;g--){h=j[g];if(h!=="."){if(h===".."){e++}else{if(e){e--}else{k[k.length]=h}}}}if(f){for(;e--;e){k[k.length]=".."}}k=k.reverse();return k}var a=d.Path={resolve:function(){var h="",f,g,e=(arguments),j,k=0;for(g=e.length-1;g>=0&&!k;g--){j=e[g];if(d.isString(j)&&!!j){h=j+"/"+h;k=j.charAt(0)==="/"}}f=b(d.filter(h.split("/"),function(i){return !!i}),!k).join("/");return((k?"/":"")+f)||"."},normalize:function(f){var g=f.charAt(0)==="/",e=f.slice(-1)==="/";f=b(d.filter(f.split("/"),function(h){return !!h}),!g).join("/");if(!f&&!g){f="."}if(f&&e){f+="/"}return(g?"/":"")+f},join:function(){var e=d.makeArray(arguments);return a.normalize(d.filter(e,function(f){return f&&(d.isString(f))}).join("/"))},relative:function(l,k){l=a.normalize(l);k=a.normalize(k);var j=d.filter(l.split("/"),function(m){return !!m}),i=[],f,g,e=d.filter(k.split("/"),function(m){return !!m}),h=Math.min(j.length,e.length);for(f=0;f<h;f++){if(j[f]!==e[f]){break}}g=f;while(f<j.length){i.push("..");f++}i=i.concat(e.slice(g));i=i.join("/");return i},basename:function(h,f){var e=h.match(c)||[],g;g=e[3]||"";if(f&&g&&g.slice(-1*f.length)===f){g=g.slice(0,-1*f.length)}return g},dirname:function(h){var e=h.match(c)||[],f=e[1]||"",g=e[2]||"";if(!f&&!g){return"."}if(g){g=g.substring(0,g.length-1)}return f+g},extname:function(e){return(e.match(c)||[])[4]||""}}})(dynamsoft.lib);(function(d,c){function b(e){if(!e._queryMap){e._queryMap=d.unparam(e._query)}}function a(e){this._query=e||""}a.prototype={constructor:a,clone:function(){return new a(this.toString())},reset:function(f){var e=this;e._query=f||"";e._queryMap=null;return e},count:function(){var e=this,f=0;b(e);d.each(e._queryMap,function(g){if(d.isArray(g)){f+=g.length}else{f++}});return f},has:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return f in g}else{return !d.isEmptyObject(g)}},get:function(f){var e=this,g;b(e);g=e._queryMap;if(f){return g[f]}else{return g}},keys:function(){var e=this;b(e);return d.keys(e._queryMap)},set:function(f,g){var e=this,h;b(e);h=e._queryMap;if(d.isString(f)){e._queryMap[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(j,i){h[i]=j})}return e},remove:function(f){var e=this;b(e);if(f){delete e._queryMap[f]}else{e._queryMap={}}return e},add:function(f,h){var e=this,i,g;if(d.isString(f)){b(e);i=e._queryMap;g=i[f];if(d.isUndef(g)){g=h}else{g=[].concat(g).concat(h)}i[f]=g}else{if(f instanceof a){f=f.get()}d.each(f,function(l,j){e.add(j,l)})}return e},toString:function(e){var f=this;b(f);return d.param(f._queryMap,c,c,e)}};d.uriQuery=a})(dynamsoft.lib);(function(j){var h=j.uriQuery,l=j.each,f=j.Path,n=j.getLogger(),o=/[#\/\?@]/g,c=/[#\?]/g,k=/[#@]/g,e=/#/g,g={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7},b=new RegExp("^(?:([\\w\\d+.-]+):)?(?://(?:([^/?#@]*)@)?([\\w\\d\\-\\u0100-\\uffff.+%]*|\\[[^\\]]+\\])(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function a(p){return p.length===1?"0"+p:p}function i(q,p){return q.toLowerCase()===p.toLowerCase()}function m(q,p){return encodeURI(q).replace(p,function(r){return"%"+a(r.charCodeAt(0).toString(16))})}function d(r){if(r instanceof d){return r.clone()}var q,p=this;j.mix(p,{scheme:"",userInfo:"",hostname:"",port:"",path:"",query:"",fragment:""});q=d.getComponents(r);l(q,function(s,t){s=s||"";if(t==="query"){p.query=new h(s)}else{try{s=j.urlDecode(s)}catch(u){n.error(u+"urlDecode error : "+s)}p[t]=s}});return p}d.prototype={constructor:d,clone:function(){var q=new d(),p=this;l(g,function(r,s){q[s]=p[s]});q.query=q.query.clone();return q},resolve:function(t){if(j.isString(t)){t=new d(t)}var r=this,s=0,q,p=["scheme","userInfo","hostname","port","path","query","fragment"],u=r.clone();l(p,function(w){if(w==="path"){if(s){u[w]=t[w]}else{var v=t.path;if(v){s=1;if(!j.startsWith(v,"/")){if(u.hostname&&!u.path){v="/"+v}else{if(u.path){q=u.path.lastIndexOf("/");if(q!==-1){v=u.path.slice(0,q+1)+v}}}}u.path=f.normalize(v)}}}else{if(w==="query"){if(s||t.query.toString()){u.query=t.query.clone();s=1}}else{if(s||t[w]){u[w]=t[w];s=1}}}});return u},getScheme:function(){return this.scheme},setScheme:function(p){this.scheme=p;return this},getHostname:function(){return this.hostname},setHostname:function(p){this.hostname=p;return this},setUserInfo:function(p){this.userInfo=p;return this},getUserInfo:function(){return this.userInfo},setPort:function(p){this.port=p;return this},getPort:function(){return this.port},setPath:function(p){this.path=p;return this},getPath:function(){return this.path},setQuery:function(p){if(j.isString(p)){if(j.startsWith(p,"?")){p=p.slice(1)}p=new h(m(p,k))}this.query=p;return this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(q){var p=this;if(j.startsWith(q,"#")){q=q.slice(1)}p.fragment=q;return p},isSameOriginAs:function(p){var q=this;return i(q.hostname,p.hostname)&&i(q.scheme,p.scheme)&&i(q.port,p.port)},toString:function(s){var r=[],x=this,p,v,y,q,t,u,w;if((p=x.scheme)){r.push(m(p,o));r.push(":")}if((v=x.hostname)){r.push("//");if((w=x.userInfo)){r.push(m(w,o));r.push("@")}r.push(encodeURIComponent(v));if((q=x.port)){r.push(":");r.push(q)}}if((y=x.path)){if(v&&!j.startsWith(y,"/")){y="/"+y}y=f.normalize(y);r.push(m(y,c))}if((u=(x.query.toString.call(x.query,s)))){r.push("?");r.push(u)}if((t=x.fragment)){r.push("#");r.push(m(t,e))}return r.join("")}};d.getComponents=function(s){var r="";s=s||r;var p=s.match(b)||[],q={};l(g,function(t,u){q[u]=p[t]});return q};j.Uri=d})(dynamsoft.lib);(function(a){var d=a.lib,c=a.navInfo;var b=20180508;if(d._color_ver){if(d.isNumber(d._color_ver)&&d._color_ver>=b){return}}d._color_ver=b;d.colorStrToInt=function(j){var e="0x",g,f;if(/^(rgb|RGB)/.test(j)){var h=j.replace(/[^\d,.]/g,"").split(",");for(f=0;f<3;++f){g=Number(h[f]).toString(16);if(g.length==1){g="0"+g}e+=g}if(h.length==4){g=Math.round(Number(h[f])*255).toString(16);if(g.length==1){g="0"+g}e+=g}else{e+="ff"}}else{if(j=="transparent"){e+="00000000"}else{if(/^#[0-9a-fA-f]{6}$/.test(j)){e+=j.replace(/#/,"")+"ff"}else{if(/^#[0-9a-fA-f]{3}$/.test(j)){for(f=0;f<3;++f){e+=j[f]+j[f]}e+="ff"}else{e="-1"}}}}return Number(e)};d.IntToColorStr=function(e){if(e>4294967295||e<0){return null}var f;if(!c.bHTML5Edition){if(e%256==0){f="transparent"}else{f=Math.floor(e/256).toString(16);while(f.length!=6){f="0"+f}f="#"+f}}else{f="rgba("+Math.floor(e/16777216)+","+Math.floor(e/65536)%256+","+Math.floor(e/256)%256+","+(e%256)/255+")"}return f}})(dynamsoft);(function(o,q){var t=o.lib,B=20180508;if(t._ajax_ver){if(t.isNumber(t._ajax_ver)&&t._ajax_ver>=B){return}}t._ajax_ver=B;var d=o.navInfo,l=t.win,j=t.each,i=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,w=1,D=2,c=3,G=200,b=204,h=300,u=304,n=404,f=1223,s=500,y="open error: ",v="send error: ",g=new t.Uri(location.href),C=g&&i.test(g.getScheme()),E=false,k=function(){try{return new l.XMLHttpRequest()}catch(I){}},x=function(){try{var I=false;j(["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.3.0","Msxml3.XMLHTTP"],function(K){try{return(I=new l.ActiveXObject(K))}catch(L){t.error("new xhr error: "+L.message)}});return I}catch(J){}},r=(!C&&l.XMLHttpRequest)?("withCredentials" in (k()||[])):false,A=l.ActiveXObject?function(I){if(d.bIE&&(parseInt(d.strBrowserVersion)<=9)){return x()}if(!r&&I&&E){return new E()}return !C&&k()||x()}:k,p=function(I){return E&&(I instanceof E)},m=/^(?:GET|HEAD)$/,a=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,H={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},z=q;if(d.bIE&&parseInt(d.strBrowserVersion)<=10){z=t.noop}function F(){}t.mix(F.prototype,{url:false,onSuccess:false,onError:false,onComplete:false,method:"GET",async:true,xhrFields:false,mimeType:false,username:false,password:false,data:false,dataType:"text",headers:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",beforeSend:false,afterSend:false,timeout:0,cache:true,crossDomain:false,setRequestHeader:function(J,K){var I=this;I.headers[J]=K;return I},getAllResponseHeaders:function(){var I=this;return I.state===D?I.responseHeadersString:null},getNativeXhr:function(){var I=this;return I.nativeXhr},getResponseHeader:function(K){var J,I=this,L;K=K.toLowerCase();if(I.state===D){if(!(L=I.responseHeaders)){L=I.responseHeaders={};while((J=a.exec(I.responseHeadersString))){L[J[1].toLowerCase()]=J[2]}}J=L[K]}return J===undefined?null:J},overrideMimeType:function(J){var I=this;if(!I.state){I.mimeType=J}return I},abort:function(J){var I=this;J=J||"abort";I.state=c;I.status=0;I.statusText=J;if(I.nativeXhr){I.nativeXhr.abort()}I._callback();return I},_ioReady:function(J,M){var K=this,I;if(K.state===D||K.state===c){return}if(K.state===w){K.state=D}K.readyState=4;if(J>=G&&J<h||J===u){if(J===u){M="not modified";I=true}else{M="success";I=true}}else{if(J<0){J=0}}try{if(J>=G){K.handleResponseData()}}catch(L){t.error(L.stack||L,"error");M=L.message||"parser error"}K.status=J;K.statusText=M;K._callback(I)},_callback:function(I){var J=this,K=J.timeoutTimer;if(K){clearTimeout(K);J.timeoutTimer=0}j([I?J.onSuccess:J.onError,J.onComplete],function(L){if(t.isFunction(L)){L.apply(J.context,[J.responseData,J.statusText,J])}});J.responseData=null},handleResponseData:function(){var K=this,I,J=K.dataType,M=K.nativeXhr;if(J==="blob"||J==="arraybuffer"){I=!!l.Blob?M.response:M.responseBody}else{if(J=="json"){if(M.responseType&&M.responseType.toLowerCase()=="json"){I=M.response}else{I=M.responseText?(((l.JSON&&l.JSON.parse)?l.JSON.parse:t.parse)(M.responseText)):{}}}else{if(J==="user-defined"){I=M.response!==undefined?M.response:M.responseText}else{K.responseText=I=M.responseText||"";try{var L=M.responseXML;if(L&&L.documentElement){K.responseXML=L}}catch(N){}}}}K.responseData=I},sendInternal:function(M){var Y=this,U,Q,J,K,X,V,W,L,R,P,O;U=Y._setup(M);J=U.method;K=U.url;X=U.dataType;L=U.mimeType;if(!t.isString(K)){return}Y.nativeXhr=V=A(U.crossDomain);if(!V){return}try{Y.state=w;if(U.username){V.open(J,K,U.async,U.username,U.password)}else{V.open(J,K,U.async)}if((U.async||d.bIE)&&X&&X!="user-defined"&&("responseType" in V)){try{V.responseType=X}catch(S){}}}catch(T){if(Y.state<2){t.error(T.stack||T,"error");Y._ioReady(-1,y+(t.isNumber(T.number)?"("+T.number+")":"")+(T.message||""))}else{t.error(T)}return}W=U.xhrFields||{};if("withCredentials" in W){if(!r){delete W.withCredentials}}j(W,function(ab,Z){try{V[Z]=ab}catch(aa){t.error(aa)}});if(L&&V.overrideMimeType){V.overrideMimeType(L)}R=U.headers||{};var N=R["X-Requested-With"];if(N===false){delete R["X-Requested-With"]}if("setRequestHeader" in V){if(U.contentType){V.setRequestHeader("Content-Type",U.contentType)}V.setRequestHeader("Accept",X&&H[X]?H[X]+(X==="*"?"":", */*; q=0.01"):H["*"]);j(R,function(aa,Z){V.setRequestHeader(Z,aa)})}if(!U.cache){V.setRequestHeader("If-Modified-Since","0");V.setRequestHeader("Cache-Control","no-cache")}P=!m.test(U.method);O=P&&U.data||null;if(P&&d.bIE&&parseInt(d.strBrowserVersion)<10){O=U.data}if(U.async&&U.timeout>0){Y.timeoutTimer=setTimeout(function(){Y.abort("timeout")},U.timeout*1000)}try{Y.state=w;if(t.isFunction(Y.beforeSend)){var I=Y.beforeSend(V,Y);if(I===false){Y.abort("cancel");return}}V.send(O);O=null;U.data=null;if(t.isFunction(Y.afterSend)){Y.afterSend(Y)}}catch(S){if(Y.state<2){t.error(S.stack||S,"error");Y._ioReady(-1,v+(S.message||""))}else{t.error(S)}}if(!U.async||V.readyState===4){Y._xhrCallback()}else{if(p(V)){V.onload=function(){V.readyState=4;V.status=G;Y._xhrCallback()};V.onerror=function(){V.readyState=4;V.status=s;Y._xhrCallback()}}else{V.onreadystatechange=function(){Y._xhrCallback()}}}},_xhrCallback:function(J,O){var K=this,L=K.nativeXhr;try{if(L.readyState===4||O){if(p(L)){L.onerror=z;L.onload=z}else{L.onreadystatechange=z}if(O){if(L.readyState!==4){L.abort()}}else{if(!p(L)){K.responseHeadersString=L.getAllResponseHeaders()}var I=L.status,N;try{N=L.statusText}catch(M){t.error("xhr statusText error: ");t.error(M);N=""}K._ioReady(I,N)}}}catch(M){t.error(M.stack||M,"error");L.onreadystatechange=z;if(!O){K._ioReady(-1,M.message||"process error")}}},_setup:function(M){var J=this,I,L,O,K,N;J.context=M.context;delete M.context;if(M instanceof F){M=M.config}J.config=M;K=M.url;if(t.startsWith(K,"http://")||t.startsWith(K,"https://")){N=new t.Uri(K)}else{if(t.startsWith(K,"//")){M.url=K="http:"+K}N=g.resolve(K)}if(!M.dataType){I="text"}else{I=M.dataType.toLowerCase()}M.dataType=I;if(!M.method){M.method="GET"}else{M.method=M.method.toUpperCase()}if(!("crossDomain" in M)){M.crossDomain=!N.isSameOriginAs(g)}O=M.headers;for(L in O){if(t.isUndefined(O[L])){delete O[L]}}t.mix(J,M);J.state=w;return J}});function e(J){if(!J||!t.isString(J.url)){t.log("the url is error.");return}var I=new F();I.sendInternal(J);return I}t.mix(t,{ajax:e,io:{get:function(J,K,L,I){return e({method:"GET",url:J,onSuccess:K,onError:L,dataType:I})},post:function(J,L,K,M,I){return e({method:"POST",data:L,url:J,onSuccess:K,onError:M,dataType:I})},put:function(J,L,K,M,I){return e({method:"PUT",data:L,url:J,onSuccess:K,onError:M,dataType:I})}}})})(dynamsoft);(function(h){var f=20180508;if(h._loadjs_ver){if(h._loadjs_ver>=f){return}}h._loadjs_ver=f;var b="",d=!0,g=h.doc,a=g&&g.documentElement,c=g.getElementsByTagName("head")[0]||a,e=g.createElement("script").readyState?function(j,k){var i=j.onreadystatechange;j.onreadystatechange=function(){var l=j.readyState;if(l==="loaded"||l==="complete"){j.onreadystatechange=null;if(i){i()}k.call(this)}}}:function(j,k){var i=!1;j.addEventListener("load",k,i);j.addEventListener("error",k,i)};h.getScript=function(j,l,m){var k,i;if(!h.isFunction(m)){m=function(){}}if(!h.isString(j)||j==b){m();return}k=g.createElement("script");i=["",j].join(b);k.src=i;if(l){k.async=d}k.charset="utf-8";e(k,m);c.insertBefore(k,c.firstChild);return k};h.getCss=function(j,m){var k,i,l=m;if(!h.isFunction(l)){l=!1}if(!h.isString(j)||j==b){if(l){l()}return}k=g.createElement("link");k.href=j;k.rel="stylesheet";k.async=d;if(l){e(k,l)}c.insertBefore(k,c.firstChild);return k}})(dynamsoft.lib);(function(c){var b=20180508;if(c._customEvt_ver){if(c.isNumber(c._customEvt_ver)&&c._customEvt_ver>=b){return}}c._customEvt_ver=b;var a={fire:function(f){var d=this,e;d.exec=d.exec||{};f=f.toLowerCase();e=Array.prototype.slice.call(arguments,1);c.each(d.exec[f]||[],function(i){var h=i.f,g=i.c||d;try{h.apply(g,e)}catch(j){console.log(j)}})},on:function(g,f,d){var e=this;e.exec=e.exec||{};g=g.toLowerCase();e.exec[g]=e.exec[g]||[];e.exec[g].push({f:f,c:d})},off:function(j,h,k){var f=this,e=f.exec;if(!e){return}if(!j){f.exec=null;return}j=j.toLowerCase();if(!h){e[j]=null;return}var d=e[j]||[];for(var g=d.length-1;g>=0;g--){if(d[g]===h){d.splice(g,1)}}}};c.obj={customEvent:a}})(dynamsoft.lib);(function(b){var h=b.lib,f=!1,d=!0,c=b.navInfo,g=h.win.document,e;var a=20180508;if(h._evtBase_ver){if(h.isNumber(h._evtBase_ver)&&h._evtBase_ver>=a){return}}h._evtBase_ver=a;e=function(i){return(c.bGecko&&"mousewheel"===i)?"DOMMouseScroll":i};h.mix(h,{addEventListener:g.addEventListener?function(j,l,k){var i=e(l);if(j){j.addEventListener(i,k,false)}}:function(j,l,k){var i=e(l);if(j){j.attachEvent("on"+i,k)}},removeEventListener:g.removeEventListener?function(j,l,k){var i=e(l);if(j){j.removeEventListener(i,k,false)}}:function(j,l,k){var i=e(l);if(j){j.detachEvent("on"+i,k)}},stopPropagation:function(i){var j=i||window.event;if(j.preventDefault){j.preventDefault()}if(j.stopPropagation){j.stopPropagation()}j.returnValue=false;j.cancelBubble=true},fireEvent:function(i,j){var k;if(g.createEvent){k=g.createEvent("HTMLEvents");k.initEvent(i,d,d);if(j.dispatchEvent){j.dispatchEvent(k)}}else{if(g.createEventObject){k=g.createEventObject();k.bubbles=d;k.cancelable=d;j.fireEvent(i,k)}else{k=new Event(i);if(j.dispatchEvent){j.dispatchEvent(k)}}}}})})(dynamsoft);(function(g){var c=20180115,j=g.lib,e=g.navInfo;if(j._dialog_ie7_ver){if(j.isNumber(j._dialog_ie7_ver)&&j._dialog_ie7_ver>=c){return}}j._dialog_ie7_ver=c;var f=j.win,s=j.doc,i=!0,n=!1,k=(e.bIE&&e.IEMode<8),h=k&&(e.IEMode<7),l=500000,a=1000;function b(t){var w,v,u;w=s.body.scrollTop||s.documentElement.scrollTop;if(f.innerHeight){u=f.innerHeight}else{u=s.documentElement.clientHeight}v=w+(u-t.offsetHeight)/2;t.style.top=v+"px";t._dlgInfo.isTopOverridden=i}function m(t,v){for(var u=0;u<t.length;++u){if(t[u]==v){return i}}return n}function o(w){for(var x=0;x<s.styleSheets.length;++x){var C=s.styleSheets[x],z=n,u=n,B,D;try{z=C.cssRules;u=s.querySelectorAll}catch(y){}if(z&&u){for(var v=0;v<z.length;++v){B=z[v];D=n;try{D=u(B.selectorText)}catch(y){}if(D&&m(D,w)){var t=B.style.getPropertyValue("top"),A=B.style.getPropertyValue("bottom");if((t&&t!="auto")||(A&&A!="auto")){return i}}}}}return n}function p(u){var t=n;if(f.getComputedStyle){t=f.getComputedStyle(u)}else{if(u.currentStyle){t=u.currentStyle}}if(t&&t.position!="absolute"){return n}if((u.style.top!="auto"&&u.style.top!="")||(u.style.bottom!="auto"&&u.style.bottom!="")){return n}return !o(u)}function q(u){var t=s.createEvent("MouseEvents");t.initMouseEvent(u.type,u.bubbles,u.cancelable,f,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget);return t}function r(){var u=this,t;u.pendingDialogStack=[];u.overlay=s.createElement(k?"iframe":"div");t=u.overlay.style;t.position=k?"absolute":"fixed";t.display="block";t.left=t.top=t.margin=t.padding=0;t.backgroundColor="#000";t.filter="alpha(opacity=30)";t.opacity=t.MozOpacity=0.3;t.zIndex=l;t.width="100%";if(k&&s.documentElement.clientHeight>0){t.height=s.documentElement.clientHeight+"px"}else{t.height="100%"}if(s.createEvent){j.addEventListener(u.overlay,"click",function(v){var w=q(v);s.body.dispatchEvent(w)})}}var d=r.prototype;d._blockDocument=function(){if(!s.body.contains(this.overlay)){s.body.appendChild(this.overlay)}};d._unblockDocument=function(){s.body.removeChild(this.overlay)};d._updateStacking=function(){var x=this,t,v,u,w;v=x.pendingDialogStack;if(v.length==0){x._unblockDocument();return}x._blockDocument();w=l;j.each(v,function(y){w++;y._dlgInfo.mask.style.zIndex=w++;y.style.zIndex=w})};d.pushDialog=function(u){var v=this,t;if(v.pendingDialogStack.length>=a){j.error("Too many modal dialogs.");return}t=s.createElement("div");t.className="dynamsoft-backdrop";if(k){t.style.position="absolute"}if(s.createEvent){j.addEventListener(t,"click",function(w){if(u.dispatchEvent){var x=q(w);u.dispatchEvent(x)}})}u.parentNode.insertBefore(t,u.nextSibling);u._dlgInfo.mask=t;v.pendingDialogStack.push(u);v._updateStacking()};d.removeDialog=function(v){var w=this,u,t;u=j.isArray(w.pendingDialogStack)?w.pendingDialogStack.indexOf(v):-1;if(u==-1){return}w.pendingDialogStack.splice(u,1);t=v._dlgInfo.mask;t.parentNode.removeChild(t);v._dlgInfo.mask=null;w._updateStacking()};j.dialog={showDialog:function(y){var z=this,v;if(z.open){j.error("showDialog called on open dialog.");return}z.open=i;z.setAttribute("open","open");if(k){v=h?s.body:s.documentElement;z._dlgInfo.docOverflow=v.style.overflow;v.style.overflow="hidden"}if(p(z)){b(z)}if(y){z._dlgInfo.modal=i;z.dm.pushDialog(z);if(k){var u,t,x=n,w=n;u=z.currentStyle.left;t=z.currentStyle.top;if(u==="auto"){if(h){z.style.textAlign="center"}u=(v.clientWidth-z.currentStyle.width)/2}else{if(u.indexOf("%")>0){x=u;u=Number(u.replace("%","")*v.clientWidth/100)}else{u=Number(u.replace("px",""))}}if(isNaN(u)||(u<=0)){u=0}if(t==="auto"){t=(v.clientHeight-z.currentStyle.height)/2}else{if(t.indexOf("%")>0){w=t;t=Number(t.replace("%","")*v.clientHeight/100)}else{t=Number(t.replace("px",""))}}if(isNaN(t)||(t<=0)){t=0}setTimeout(function(){var B=z.style,A=z._dlgInfo.mask;A.style.backgroundColor="#000";A.style.filter="alpha(opacity=30)";B.position="absolute";B.left=u+"px";B.top=t+"px"},0);z._scrollFn=function(){var B=v.scrollTop+"px",E=v.scrollLeft+"px",A=j.dialog.dm.overlay,D=z._dlgInfo.mask,C=z.style;if((t+v.scrollTop+v.clientHeight)<v.scrollHeight){C.top=t+v.scrollTop+"px"}else{C.top=B}if(A){A.style.top=B}if(D){D.style.top=B}C.left=E;if(A){A.style.left=E}if(D){D.style.left=E}setTimeout(function(){z._resizeFn()},100)};z._resizeFn=function(){var E=h?s.body:s.documentElement,C=E.clientWidth+"px",D=E.clientHeight+"px",A=j.dialog.dm.overlay,B=z._dlgInfo.mask;A.style.width=C;if(B){B.style.width=C}A.style.height=D;if(B){B.style.height=D}setTimeout(function(){var G,I,F=z.style,H=h?s.body:s.documentElement;if(x){G=Number(x.replace("%","")*H.clientWidth/100);F.left=G+"px"}if(w){I=Number(w.replace("%","")*H.clientHeight/100);F.top=I+"px"}},0)};z._scrollFn();f.attachEvent("onscroll",z._scrollFn);f.attachEvent("onresize",z._resizeFn)}}},closeDialog:function(t){var v=this;if(!v.open){j.error("closeDialog called on closed dialog.")}v.open=n;v.removeAttribute("open");if(k){var u=h?s.body:s.documentElement;u.style.overflow=v._dlgInfo.docOverflow}if(typeof t!="undefined"){v.returnValue=t}if(v._dlgInfo.isTopOverridden){v.style.top="auto"}if(v._dlgInfo.modal){if(k){f.detachEvent("onscroll",v._scrollFn);f.detachEvent("onresize",v._resizeFn)}v.dm.removeDialog(this)}return v.returnValue},setup:function(t){var u=this;t.show=u.showDialog.bind(t,n);t.showModal=u.showDialog.bind(t,i);t.close=u.closeDialog.bind(t);t._dlgInfo={}},dm:new r()}})(dynamsoft);(function(b){var f=b.lib,e=f.doc;var d=20180508;if(f._evt_ver){if(f.isNumber(f._evt_ver)&&f._evt_ver>=d){return}}f._evt_ver=d;f.Events={registedClass:[],registedObjs:[]};var c=function(g){var i=g||window.event;var h=true;f.each(f.Events.registedObjs,function(j){f.each(f.Events.registedClass,function(k){if(j instanceof k){if(j.bFocus&&j.handlerKeyDown){h=j.handlerKeyDown(i);if(!h){return false}}}})});return h};f.ready(function(){f.addEventListener(e.documentElement,"keydown",c)});f.mix(f,{getWheelDelta:function(g){g=g||window.event;var j,i=g.wheelDelta,h=g.detail;if(i){j=i/120}if(h){j=-(h%3===0?h/3:h)}return j}});var a={LEFT:0,MIDDLE:1,RIGHT:2};f.EnumMouseButton=a;f.detectButton=function(g){var h=g||window.event;if(h.which==null){return(h.button<2)?a.LEFT:((h.button==4)?a.MIDDLE:a.RIGHT)}else{return(h.which<2)?a.LEFT:((h.which==2)?a.MIDDLE:a.RIGHT)}}})(dynamsoft);(function(b){var a=20180508;if(b._ui_eventWhich_ver){if(b.isNumber(b._ui_eventWhich_ver)&&b._ui_eventWhich_ver>=a){return}}b._ui_eventWhich_ver=a;b.switchEvent=function(c){c=c||window.event;if(c.which==null){c.which=(c.button<2)?1:((c.button==4)?2:3)}else{c.which=(c.which<2)?1:((c.which==2)?2:3)}return c}})(dynamsoft.lib);(function(b){var a=20180508;if(b._ui_style_ver){if(b.isNumber(b._ui_style_ver)&&b._ui_style_ver>=a){return}}b._ui_style_ver=a;b.currentStyle=function(f,g){var e=b.win,d=e.doc,c;if(f.currentStyle){return f.currentStyle[g]}else{if(e.getComputedStyle){c=g.replace(/([A-Z])/g,"-$1");c=g.toLowerCase();return d.defaultView.getComputedStyle(f,null)[g]}}return null}})(dynamsoft.lib);(function(f,h){var m=Array.prototype,i=!0,t=!1,l=f.lib,b=f.navInfo,o=l.isString,v=l.each,s=m.slice,n=" ",p=(b.bIE&&b.IEMode<10),r=/[\n\t\r\.]/g;var d=20180508;if(l._ui_nodelist_ver){if(l.isNumber(l._ui_nodelist_ver)&&l._ui_nodelist_ver>=d){return}}l._ui_nodelist_ver=d;function w(z,A,y){var x=this;if(!(x instanceof w)){return new w(z,A,y)}if(!z){return x}if(typeof z==="string"){l.error("Err 4001.");return x}if(l.isArray(z)||z.isNodeList){Array.prototype.push.apply(x,l.makeArray(z));return x}x[0]=z;x.length=1;return x}w.prototype={isNodeList:true,length:0,item:function(y){var x=this;if(l.isNumber(y)){if(y>=x.length){return null}else{return new w(x[y])}}else{return new w(y)}},slice:function(){return new w(s.apply(this,arguments))},getDOMNodes:function(){return s.call(this)},each:function(z,y){var x=this;v(x,function(B,A){B=new w(B);return z.call(y||B,B,A,x)});return x},getEL:function(){var x=this;return(x.length>0)?x[0]:h},all:function(x){var z,y=this;if(y.length>0){z=l.all(x,y)}else{z=new w()}return z},one:function(x){var y=this,A=y.all(x),z=A.length?A.slice(0,1):A;return z}};function j(x){return o(x)&&(x=l.trim(x))&&x.length>=3&&l.startsWith(x,"<")&&l.endsWith(x,">")}function g(x){return(n+x+n).replace(r,n)}function u(x){return(x).replace(r,"")}function a(B){var y=B.innerHTML;if(!document.all){return y}var A=/(\s+\w+)\s*=\s*([^<>"\s]+)(?=[^<>]*\/>)/ig;var z=/"'([^'"]*)'"/ig;y=y.replace(A,'$1="$2"').replace(z,'"$1"');var x=y.replace(/<(\/?)(\w+)([^>]*)>/g,function(D,C,F,E){if(C){return"</"+F.toLowerCase()+">"}return("<"+F.toLowerCase()+E+">").replace(/=(("[^"]*?")|('[^']*?')|([\w\-\.]+))([\s>])/g,function(M,H,N,L,K,J,G,I){if(K){return'="'+K+'"'+J}return M})});return x.replace(/<\/?([^>]+)>/g,function(C){return C})}var q=function(B,D){var A=B.className,x,y=D.length,C,z,E;if(A){x=g(A);C=A;z=0;for(;z<y;z++){E=u(D[z]);if(x.indexOf(n+E+n)<0){C+=n+E}}C=l.trim(C)}else{C=D.join(" ")}B.className=C},k=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;while(A.indexOf(C)>=0){A=A.replace(C,n)}}B.className=l.trim(A)}},c=function(B,D){var z=B.className,A,x=D.length,y,C;if(z&&x){A=g(z);y=0;for(;y<x;y++){C=n+u(D[y])+n;if(A.indexOf(C)<0){return t}}return i}return t};l.mix(w.prototype,{before:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.insertBefore(A,z.childNodes[0])})}},append:function(y){var z=this.getEL(),x=[y];if(z){if(j(y)){x=l.parseHTML(y)}v(x,function(A){z.appendChild(A)})}},html:function(y){var x=this.getEL();if(x){if(l.isUndef(y)){return a(x)}x.innerHTML="";v(l.parseHTML(y),function(z){x.appendChild(z)})}},attr:function(z,x){var y=this.getEL();if(y){if(l.isUndef(x)){if(z==="readonly"){return y.readOnly?"readonly":""}if(z==="style"||!p){y=y.attributes[z];if(y){y=y.value}}else{y=y[z]}return y}if(z=="class"){y.className=x}else{y[z]=x}}},style:function(z,x){var y=this.getEL();if(y){return l.style(y,z,x)}},css:function(x){v(this,function(y){v(x,function(z,A){l.style(y,A,z)})})},addClass:function(x){var y=this.getEL();if(y){q(y,x.split(n))}},removeClass:function(x){var y=this.getEL();if(y){k(y,x.split(n))}},hasClass:function(x){var y=this.getEL();if(y){return c(y,x.split(n))}},parent:function(){var x=this.getEL();if(x){x=x.parentNode}return new w(x)},remove:function(){var x=this.getEL();if(x){x.parentNode.removeChild(x)}},offset:function(){var x=this.getEL();return l.DOM.getElDimensions(x,i)}});function e(x,z){var y=z;if(y&&y.isNodeList){y=y.getEL()}if(o(x)){if(j(x)){l.err("Err 4002.")}return new w(l.sizzle(x,y))}if(x.isNodeList){return x}return new w(x)}l.mix(l,{all:e,one:function(x,y){var z=e(x,y);return z.length?z.slice(0,1):z},isNodeList:function(x){return x instanceof w}});l.ready(function(){l.all=e})})(dynamsoft);(function(e){var d=e.win,c=e.doc,b=isNaN;var a=20180508;if(e._dom_ver){if(e.isNumber(e._dom_ver)&&e._dom_ver>=a){return}}e._dom_ver=a;e.DOM={getOffset:function(p,j,l){p=p||d.event;var g=l||p.target,o=0,n=0,k=0,m=0,f,i,h=false;while(g&&!b(g.offsetLeft)&&!b(g.offsetTop)){i=g.scrollLeft;f=g.scrollTop;if(g.tagName==="BODY"){if(h){i=0;f=0}else{i=i|c.documentElement.scrollLeft;f=f|c.documentElement.scrollTop}}else{if(g.style.position==="fixed"){h=true}}o+=g.offsetLeft-i;n+=g.offsetTop-f;g=g.offsetParent}if(j){k=j.Left;m=j.Top}o=p.clientX-o-k;n=p.clientY-n-m;return{x:o,y:n}},getElDimensions:function(g,i){var f,h;if(!g){return{offsetTop:0,offsetLeft:0,offsetWidth:0,offsetHeight:0}}f=g.style.display;g.style.display="";h=i?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:(parseInt(g.style.width)?parseInt(g.style.width):0),clientHeight:g.clientHeight?g.clientHeight:(parseInt(g.style.height)?parseInt(g.style.height):0)};g.style.display=f;return h}};e.getElDimensions=e.DOM.getElDimensions})(dynamsoft.lib);(function(h,i){var j=20180627,l=h.lib,d=h.navInfo,r="data:image/gif;base64,R0lGODlhzAETAPf/AK/a/sfn/qnW/aLV/bPb/pnP/KnZ/9Ds/6jZ/8/s/6fY/57S/aTW/qHU/s3r/5XM/Mbn/sLk/bzh/Mrp/rje/K3b/6/d/6va/7nh/szq/8vq/8rp/8Xn/7Tf/8np/7Le/6rZ/6za/8Pm/6bX/sjp/7fe/J/T/bPe/6ra/7/k/5vQ/Lbg/sLm/8zr/7ri/rHd/77k/5rP/KjY/6zb/8Tm/rrg/Mjo/8bo/87r/8Tn/8bn/8Dl/6XW/s3q/8Ll/qPV/r/j/rfg/sXm/sfo/6LV/rbe/MLl/7Lc/bXf/s7s/67d/73j/5jO/Mrq/7zi/rrh/pfN/Ljh/rvh/MDj/ZbN/LTd/KjY/rnf/Kza/r7i/aLU/qHU/cjo/rvg/KXV/Ljf/bni/sDk/6fX/8np/sPl/qrY/cfo/sXn/qnY/sHj/bHb/pbM/KTV/b/j/arZ/rPf/6fX/rPe/aHS/LXe/M/r/8Hk/bjg/r7j/7Da/Z7S/KvZ/a7Z/b3j/pnO/Lvh/qvb/6fV/abW/p/S/LXg/sno/rTe/ZzR/L3i/cDk/rbf/rng/qHT/Lvi/qvZ/sHk/qvY/bvg/bzj/63a/qTU/LLd/p3R/ZzR/bDe/7Te/77j/rDZ/bXd/szq/sHl/6DU/rzh/a7b/prQ/b3i/sro/pjN/J/R/JXM+7bf/ZvQ/bbd/KjX/K3b/ZTM/K3d/6rY/rDb/pvP/JTL+53R/K3Y/aXX/rPc/bXd/K7b/7rg/cno/7jf/KfY/qna/6DT/aDU/aTV/sbm/rnf/Z7T/afX/aPU/KrX/JrQ/Lzj/sTm/7Hd/rbe/aTW/aXW/J3Q/KbV/KbW/bzi/6rX/ZrO/K/Z/anZ/r3h/b/l/7Lb/rfh/qjX/qvX/bvj/qbW/KzZ/bvi/73k/7ff/rHa/qLT/KDS/K7Y/bXe/bHa/cTl/anY/bbd+6LU/aXW/bfg/bjg/aTV/Lrf/LPd/p/T/MTl/q/b/anX/JXN/MPm/qnY/77i/q/Y/ZfO/LPc+7Tc/ZnO+63Y/AAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjAwMjY2NzMzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjAwMjY2NzQzQTQyMTFFODlFMUQ4ODdDOEJCNjY0RkEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMDAyNjY3MTNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMDAyNjY3MjNBNDIxMUU4OUUxRDg4N0M4QkI2NjRGQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5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K9cHYMOKfeC17NizZb2eHZu261qxbb++BRuXwly6ce+SzXu3rl6/ffnOBTxY8FvChw2vRbxYMVrHbCHDlRyW8eO2ekuUSOevgMICD6AwYVJAgunTp4GiXq16deqfrl/7jG26dWzbrnGzhk1bN2rfsnvSlgC8Nu/bx3Mn3z279/Lfz4PzHF6ceHTjPZl0qUHBc8KboSxV/1qwIIL58+fJq19PHr179vDdo4fPXn56+urtm8efXz//9v79p18E/5UXIH8DFpiggAfityCCDdL3oIMRxldhfReuN6GEGfZnn4IdVmJJFsR9hsoCJjSgYgMQtOiiiyvGGOOLNMpoI40v2igjjjDquCKPLfr4I5BCqggkBEWySGSRRybZJJNLCvmklFH6OKWVVep4pZZZ3tjljl/OGOaQPDo5pgkLtOGdTQt4QgQDcMI5wZx00hnnnXfWqSeefOpZJ594+mknoHEKOiehhRqKqJyKLmroBIsy8GikkzraKKKVYnopoZlyuimgnYL6aZ+jBlpqnqcmKiilpxLhyQJrHv9UgAlvjiCGArgq4MCuvPKa66+/9iossMQK2yuxwBrrK7K5Krsrs806Cy2uzjowra7STlvttdtqmy203YL7LbPhkjsusuWie26x6ybbbrDvRqsst+eKMQIDRJgQq0EFNMDACArIgMDAAydg8MEHE6ywwgg3vPDDDSP88MIRJzwxwRUbfDHGGW9ccMceZ5yAxwiITLLJIYO8Mcorq3wxyy+7PDHMM8sMsc0U48ywzhxXfLLLMihwbwP7FtQvA2LIYMDSTBtwwNNQQ9301EtHbTXVU1sdNdZNay0111V7fQDYYXtNttNiny322GSvrXbabcMNtttxm1231m/bPbfcXNP/vbfeffONtd+BAz443zKIwQDRn0HAgAIIFI733VdTvrXlX/89ueaVc36555lL3rnon5Me+uGGU0046pub/nTerbM+uuyl03666oLjnnrWciOgwOJFE1QABBMkDfrrmCN/PNvLwz677rFD/zzvu3edO/XRYz+99dUzvbr0tYN/u/bhkz8+99mjv73316tfvvtfJw78Z8GMwgnkLfucsv75R/wz/zEDYM0EeDMC5syAO0Ngz/y3Pwb2z2ENhOADJRZBCk7QYhfUWAUxGEAHdlCCH7RgCA8WtHvpqypTSaEKV8jCFrrwhTCMoQxnqJSa2PCGOMyhDnfIwx768IdADKIQDYdIxCIa8YhITOIPAwIAOw==";if(l._dialog_ver){if(l.isNumber(l._dialog_ver)&&l._dialog_ver>=j){return}}l._dialog_ver=j;var g=l.win,z=l.doc,k=!0,q=!1,u,e,o=500000,a=1000;function b(A){var D,C,B;D=z.body.scrollTop||z.documentElement.scrollTop;if(g.innerHeight){B=g.innerHeight}else{B=z.documentElement.clientHeight}C=D+(B-A.offsetHeight)/2;A.style.top=C+"px";A._dlgInfo.isTopOverridden=k}function p(A,C){for(var B=0;B<A.length;++B){if(A[B]==C){return k}}return q}function v(D){for(var E=0;E<z.styleSheets.length;++E){var J=z.styleSheets[E],G=q,B=q,I,K;try{G=J.cssRules;B=z.querySelectorAll}catch(F){}if(G&&B){for(var C=0;C<G.length;++C){I=G[C];K=q;try{K=B(I.selectorText)}catch(F){}if(K&&p(K,D)){var A=I.style.getPropertyValue("top"),H=I.style.getPropertyValue("bottom");if((A&&A!="auto")||(H&&H!="auto")){return k}}}}}return q}function t(B){var A=q;if(g.getComputedStyle){A=g.getComputedStyle(B)}else{if(B.currentStyle){A=B.currentStyle}}if(A&&A.position!="absolute"){return q}if((B.style.top!="auto"&&B.style.top!="")||(B.style.bottom!="auto"&&B.style.bottom!="")){return q}return !v(B)}function x(B){var A=z.createEvent("MouseEvents");A.initMouseEvent(B.type,B.bubbles,B.cancelable,g,B.detail,B.screenX,B.screenY,B.clientX,B.clientY,B.ctrlKey,B.altKey,B.shiftKey,B.metaKey,B.button,B.relatedTarget);return A}function c(A){z.body.dispatchEvent(x(A))}function y(){u=z.createElement("div");e=u.style;e.position="fixed";e.display="block";e.left=e.top=e.margin=e.padding=0;e.backgroundColor="#000";e.filter="alpha(opacity=30)";e.opacity=e.MozOpacity=0.3;e.zIndex=o;e.width=e.height="100%";if(z.createEvent){l.addEventListener(u,"click",c)}}function m(){if(u===i){y()}if(!z.body.contains(u)){z.body.appendChild(u)}}function w(){if(u!==i){l.removeEventListener(u,"click",c);z.body.removeChild(u);u=i}}var f={pendingDialogStack:[],_updateStacking:function(D){var F=this,A,C,B,E;C=F.pendingDialogStack;if(C.length==0){w();return}if(D!=true){m()}E=o;l.each(C,function(G){E++;G._dlgInfo.mask.style.zIndex=E++;G.style.zIndex=E})},pushDialog:function(B,D){var E=this,A,C=B.getBoundingClientRect();if(E.pendingDialogStack.length>=a){l.error("Too many modal dialogs.");return}A=z.createElement("div");A.className="dynamsoft-backdrop";if(D==true){A.style.left=(C.x|C.left)+"px";A.style.top=(C.y|C.top)+"px";A.style.width=C.width+"px";A.style.height=C.height+"px"}if(z.createEvent){l.addEventListener(A,"click",function(F){if(B.dispatchEvent){var G=x(F);B.dispatchEvent(G)}})}B.parentNode.insertBefore(A,B.nextSibling);B._dlgInfo.mask=A;E.pendingDialogStack.push(B);E._updateStacking(D)},removeDialog:function(C){var D=this,B,A;B=l.isArray(D.pendingDialogStack)?l.indexOf(C,D.pendingDialogStack):-1;if(B==-1){return}D.pendingDialogStack.splice(B,1);A=C._dlgInfo.mask;A.parentNode.removeChild(A);C._dlgInfo.mask=null;D._updateStacking()}};function n(C,B){var D=this,A;if(D.open){l.error("showDialog called on open dialog.");return}D.open=k;D.removeAttribute("closed");D.setAttribute("open","open");if(t(D)){b(D)}if(C){D._dlgInfo.modal=k;f.pushDialog(D,B)}}function s(A){var B=this;if(!B.open){l.error("closeDialog called on closed dialog.")}B.open=q;B.removeAttribute("open");B.setAttribute("closed","closed");if(typeof A!="undefined"){B.returnValue=A}if(B._dlgInfo.isTopOverridden){B.style.top="auto"}if(B._dlgInfo.modal){f.removeDialog(B)}return B.returnValue}l.dialog={setup:function(A,B){A.show=n.bind(A,q,B);A.showModal=n.bind(A,k,B);A.close=s.bind(A);A._dlgInfo={}}};l.mask={container:false,bConfined:false,dlgMask:false};l.showMask=function(){if(l.mask.dlgMask){return}var C=l.mask.bConfined,B=l.mask.container,A;if(B){A=B.getBoundingClientRect();var H=B.firstChild;while(H){if(l.isFunction(H.getBoundingClientRect)){A=H.getBoundingClientRect();break}H=H.nextSibling}}var F=document.createElement("div"),E="460px",D="300px";F.className="dynamsoft-dialog-wrap";if(C&&A){window.onresize=window.onscroll=function(){A=B.getBoundingClientRect();var I=B.firstChild;while(I){if(l.isFunction(I.getBoundingClientRect)){A=I.getBoundingClientRect();break}I=I.nextSibling}F.style.left=(A.x|A.left)+"px";F.style.top=(A.y|A.top)+"px";F.style.width=A.width+"px";if(A.width<470){E=(A.width-10)+"px"}F.style.height=D=A.height+"px";if(l.mask.dlgMask){l.mask.dlgMask.close();l.mask.dlgMask.showModal()}};window.onscroll()}var G=['<div style="margin:0 auto; width:',E,";line-height:",D,'"><img src="',r,'" style="margin:0 auto; width:',E,'" /></div>'].join("");F.innerHTML=G;document.body.appendChild(F);l.mask.dlgMask=F;l.dialog.setup(l.mask.dlgMask,C);l.mask.dlgMask.showModal()};l.hideMask=function(){var A=l.mask.dlgMask;if(A){A.close();document.body.removeChild(A);l.mask.dlgMask=false}window.onresize=window.onscroll=null}})(dynamsoft);(function(t){var w=20180508;if(t._sizzle_ver){if(t.isNumber(t._sizzle_ver)&&t._sizzle_ver>=w){return}}t._sizzle_ver=w;var aq,g=RegExp,ae,ab,d,k,u,al,Y,U,s,v,o,p,ao=!0,f,M,b,S,am="dws_"+1*new Date(),an=window.document,K=0,y=0,ai,aj,G,z,A=function(i,e){if(i===e){s=true}return 0},I=[],V=I.pop,aa=I.push,ak=I.push,F=I.slice,H=function(ax,aw){var av=0,e=ax.length;for(;av<e;av++){if(ax[av]===aw){return av}}return -1},ag="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Q="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ad=["\\[",Q,"*(",C,")(?:",Q,"*([*^$|!~]?=)",Q,"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(",C,"))|)",Q,"*\\]"].join(""),E=new g(Q+"+","g"),ah=new g(["^",Q,"+|((?:^|[^\\\\])(?:\\\\.)*)",Q,"+$"].join(""),"g"),m=new g(["^",Q,"*,",Q,"*"].join("")),X=new g(["^",Q,"*([>+~]|",Q,")",Q,"*"].join("")),h=new g("^"+C+"$"),W={ID:new g("^#("+C+")"),CLASS:new g("^\\.("+C+")"),TAG:new g("^("+C+"|[*])"),ATTR:new g("^"+ad),needsContext:new g(["^",Q,"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(",Q,"*((?:-\\d)?\\d*)",Q,"*\\)|)(?=[^-]|$)"].join(""),"i")},L=/^[^{]+\{\s*\[native \w/,ac=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,c=/^(?:#([\w-]+)|(\w+)|\.([\w-]+)) .*$/,R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,l=function(i,e){if(e){if(i==="\0"){return"\uFFFD"}return i.slice(0,-1)+"\\"+i.charCodeAt(i.length-1).toString(16)+" "}return"\\"+i},q=function(){v()};function au(){var i=[];function e(av,aw){if(i.push(av+" ")>ab.cacheLength){delete e[i.shift()]}return(e[av+" "]=aw)}return e}function a(ax){var aw=0,av=ax.length,e="";for(;aw<av;aw++){e+=ax[aw].value}return e}ai=au();aj=au();G=au();z=au();try{ak.apply((I=F.call(an.childNodes)),an.childNodes);var r=I[an.childNodes.length].nodeType}catch(at){ak={apply:I.length?function(i,e){aa.apply(i,F.call(e))}:function(ax,aw){var e=ax.length,av=0;while((ax[e++]=aw[av++])){}ax.length=e-1}}}function af(aB,av,aE,aH){var az,aF,ay,e,aG,ax,aC,aw=av&&av.ownerDocument,aD=av?av.nodeType:9;aE=aE||[];if(typeof aB!=="string"||!aB||aD!==1&&aD!==9&&aD!==11){return aE}if(!aH){if((av?av.ownerDocument||av:an)!==o){v(av)}av=av||o;if(aD!==11){if((aG=ac.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){aE.push(ay);return aE}}else{return aE}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){aE.push(ay);return aE}}}else{if(aG[2]){ak.apply(aE,av.getElementsByTagName(aB));return aE}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));return aE}}}}else{if((aG=c.exec(aB))){if((az=aG[1])){if(aD===9){if((ay=av.getElementById(az))){if(ay.id===az){av=ay}}}else{if(aw&&(ay=aw.getElementById(az))&&S(av,ay)&&ay.id===az){av=ay}}az="#"+az+" "}else{if((az=aG[2])){ak.apply(aE,av.getElementsByTagName(aB));av=aE[0];az=az+" "}else{if((az=aG[3])&&ae.getElementsByClassName&&av.getElementsByClassName){ak.apply(aE,av.getElementsByClassName(az));av=aE[0];az=az+" "}}}aB=aB.replace(az,"")}}}if(ae.qsa&&!z[aB+" "]&&(!f||!f.test(aB))){if(aD!==1){aw=av;aC=aB}else{if(av.nodeName.toLowerCase()!=="object"){if((e=av.getAttribute("id"))){e=e.replace(R,l)}else{av.setAttribute("id",(e=am))}ax=k(aB);aF=ax.length;while(aF--){ax[aF]="#"+e+" "+a(ax[aF])}aC=ax.join(",");aw=av}}if(aC){try{ak.apply(aE,aw.querySelectorAll(aC));return aE}catch(aA){z(aB,!0)}finally{if(e===am){av.removeAttribute("id")}}}}}return al(aB.replace(ah,"$1"),av,aE,aH)}function ap(e){e[am]=true;return e}function Z(av){var i=o.createElement("fieldset");try{return !!av(i)}catch(aw){return false}finally{if(i.parentNode){i.parentNode.removeChild(i)}i=null}}function B(e,i){}function j(i,e){var aw=e&&i,av=aw&&i.nodeType===1&&e.nodeType===1&&i.sourceIndex-e.sourceIndex;if(av){return av}if(aw){while((aw=aw.nextSibling)){if(aw===e){return -1}}}return i?1:-1}function T(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}ae=af.support={};v=af.setDocument=function(av){var e,i,aw=av?av.ownerDocument||av:an;if(aw===o||aw.nodeType!==9||!aw.documentElement){return o}o=aw;p=o.documentElement;if(an!==o&&(i=o.defaultView)&&i.top!==i){if(i.addEventListener){i.addEventListener("unload",q,false)}else{if(i.attachEvent){i.attachEvent("onunload",q)}}}ae.attributes=Z(function(ax){ax.className="i";return !ax.getAttribute("className")});ae.getElementsByTagName=Z(function(ax){ax.appendChild(o.createComment(""));return !ax.getElementsByTagName("*").length});ae.getElementsByClassName=L.test(o.getElementsByClassName);ae.getById=Z(function(ax){p.appendChild(ax).id=am;return !o.getElementsByName||!o.getElementsByName(am).length});if(ae.getById){ab.filter.ID=function(ay){var ax=ay;return function(az){return az.getAttribute("id")===ax}}}else{ab.filter.ID=function(ay){var ax=new g(["^",ay,"$"].join(""),"g");return function(aA){var az=typeof aA.getAttributeNode!=="undefined"&&aA.getAttributeNode("id");return az&&ax.test(az.value)}}}ab.find.TAG=ae.getElementsByTagName?function(ax,ay){if(typeof ay.getElementsByTagName!=="undefined"){return ay.getElementsByTagName(ax)}else{if(ae.qsa){return ay.querySelectorAll(ax)}}}:function(ax,aB){var aC,aA=[],az=0,ay=aB.getElementsByTagName(ax);if(ax==="*"){while((aC=ay[az++])){if(aC.nodeType===1){aA.push(aC)}}return aA}return ay};ab.find.CLASS=ae.getElementsByClassName&&function(ay,ax){if(typeof ax.getElementsByClassName!=="undefined"){return ax.getElementsByClassName(ay)}};M=[];f=[];if((ae.qsa=L.test(o.querySelectorAll))){Z(function(ax){p.appendChild(ax).innerHTML="<a id='"+am+"'></a><select id='"+am+"-\r\\' msallowcapture=''><option selected=''></option></select>";if(ax.querySelectorAll("[msallowcapture^='']").length){f.push("[*^$]="+Q+"*(?:''|\"\")")}if(!ax.querySelectorAll("[selected]").length){f.push("\\["+Q+"*(?:value|"+ag+")")}if(!ax.querySelectorAll("[id~="+am+"-]").length){f.push("~=")}if(!ax.querySelectorAll(":checked").length){f.push(":checked")}if(!ax.querySelectorAll("a#"+am+"+*").length){f.push(".#.+[+~]")}});Z(function(ay){ay.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ax=o.createElement("input");ax.setAttribute("type","hidden");ay.appendChild(ax).setAttribute("name","D");if(ay.querySelectorAll("[name=d]").length){f.push("name"+Q+"*[*^$|!~]?=")}if(ay.querySelectorAll(":enabled").length!==2){f.push(":enabled",":disabled")}p.appendChild(ay).disabled=true;if(ay.querySelectorAll(":disabled").length!==2){f.push(":enabled",":disabled")}ay.querySelectorAll("*,:x");f.push(",.*:")})}if((ae.matchesSelector=L.test((b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)))){Z(function(ax){ae.disconnectedMatch=b.call(ax,"*");b.call(ax,"[s!='']:x")})}f=f.length&&new g(f.join("|"));M=M.length&&new g(M.join("|"));e=L.test(p.compareDocumentPosition);S=e||L.test(p.contains)?function(ay,ax){var aA=ay.nodeType===9?ay.documentElement:ay,az=ax&&ax.parentNode;return ay===az||!!(az&&az.nodeType===1&&(aA.contains?aA.contains(az):ay.compareDocumentPosition&&ay.compareDocumentPosition(az)&16))}:function(ay,ax){if(ax){while((ax=ax.parentNode)){if(ax===ay){return true}}}return false};A=e?function(ay,ax){if(ay===ax){s=true;return 0}var az=!ay.compareDocumentPosition-!ax.compareDocumentPosition;if(az){return az}az=(ay.ownerDocument||ay)===(ax.ownerDocument||ax)?ay.compareDocumentPosition(ax):1;if(az&1||(!ae.sortDetached&&ax.compareDocumentPosition(ay)===az)){if(ay===o||ay.ownerDocument===an&&S(an,ay)){return -1}if(ax===o||ax.ownerDocument===an&&S(an,ax)){return 1}return U?(H(U,ay)-H(U,ax)):0}return az&4?-1:1}:function(ay,ax){if(ay===ax){s=true;return 0}var aE,aB=0,aD=ay.parentNode,aA=ax.parentNode,az=[ay],aC=[ax];if(!aD||!aA){return ay===o?-1:ax===o?1:aD?-1:aA?1:U?(H(U,ay)-H(U,ax)):0}else{if(aD===aA){return j(ay,ax)}}aE=ay;while((aE=aE.parentNode)){az.unshift(aE)}aE=ax;while((aE=aE.parentNode)){aC.unshift(aE)}while(az[aB]===aC[aB]){aB++}return aB?j(az[aB],aC[aB]):az[aB]===an?-1:aC[aB]===an?1:0};return o};af.matches=function(i,e){return af(i,null,null,e)};af.matchesSelector=function(av,ax){if((av.ownerDocument||av)!==o){v(av)}if(ae.matchesSelector&&!z[ax+" "]&&(!M||!M.test(ax))&&(!f||!f.test(ax))){try{var i=b.call(av,ax);if(i||ae.disconnectedMatch||av.document&&av.document.nodeType!==11){return i}}catch(aw){z(ax,!0)}}return af(ax,o,null,[av]).length>0};af.contains=function(e,i){if((e.ownerDocument||e)!==o){v(e)}return S(e,i)};af.escape=function(e){return(e+"").replace(R,l)};af.error=function(e){throw new Error("Syntax error: "+e)};af.uniqueSort=function(aw){var ax,ay=[],e=0,av=0;s=!ae.detectDuplicates;U=!ae.sortStable&&aw.slice(0);aw.sort(A);if(s){while((ax=aw[av++])){if(ax===aw[av]){e=ay.push(av)}}while(e--){aw.splice(ay[e],1)}}U=null;return aw};d=af.getText=function(ay){var ax,av="",aw=0,e=ay.nodeType;if(!e){while((ax=ay[aw++])){av+=d(ax)}}else{if(e===1||e===9||e===11){if(typeof ay.textContent==="string"){return ay.textContent}else{for(ay=ay.firstChild;ay;ay=ay.nextSibling){av+=d(ay)}}}else{if(e===3||e===4){return ay.nodeValue}}}return av};ab=af.selectors={cacheLength:50,match:W,find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[3]=(e[3]||e[4]||e[5]||"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)}},filter:{TAG:function(i){var e=i.toLowerCase();return i==="*"?function(){return true}:function(av){return av.nodeName&&av.nodeName.toLowerCase()===e}},CLASS:function(e){var i=ai[e+" "];return i||(i=new g("(^|"+Q+")"+e+"("+Q+"|$)"))&&ai(e,function(av){return i.test(typeof av.className==="string"&&av.className||typeof av.getAttribute!=="undefined"&&av.getAttribute("class")||"")})},ATTR:function(av,i,e){return function(ax){var aw=af.attr(ax,av);if(aw==null){return i==="!="}if(!i){return true}aw+="";return i==="="?aw===e:i==="!="?aw!==e:i==="^="?e&&aw.indexOf(e)===0:i==="*="?e&&aw.indexOf(e)>-1:i==="$="?e&&aw.slice(-e.length)===e:i==="~="?(" "+aw.replace(E," ")+" ").indexOf(e)>-1:i==="|="?aw===e||aw.slice(0,e.length+1)===e+"-":false}}}};function D(){}D.prototype=ab.filters=ab.pseudos;ab.setFilters=new D();k=af.tokenize=function(ax,aC){var i,ay,aA=[],aB,az,av,e,aw=aj[ax+" "];if(aw){return aC?0:aw.slice(0)}az=ax;av=[];e=ab.preFilter;while(az){if(!i||(ay=m.exec(az))){if(ay){az=az.slice(ay[0].length)||az}av.push((aA=[]))}i=false;if((ay=X.exec(az))){i=ay.shift();aA.push({value:i,type:ay[0].replace(ah," ")});az=az.slice(i.length)}for(aB in ab.filter){if((ay=W[aB].exec(az))&&(!e[aB]||(ay=e[aB](ay)))){i=ay.shift();aA.push({value:i,type:aB,matches:ay});az=az.slice(i.length)}}if(!i){break}}return aC?az.length:az?af.error(ax):aj(ax,av).slice(0)};function O(az,ax,ay){var e=ax.dir,aw=ax.next,av=aw||e,aA=ay&&av==="parentNode",i=y++;return ax.first?function(aD,aC,aB){while((aD=aD[e])){if(aD.nodeType===1||aA){return az(aD,aC,aB)}}return false}:function(aG,aE,aD){var aH,aB,aF,aC=[K,i];if(aD){while((aG=aG[e])){if(aG.nodeType===1||aA){if(az(aG,aE,aD)){return true}}}}else{while((aG=aG[e])){if(aG.nodeType===1||aA){aF=aG[am]||(aG[am]={});aB=aF[aG.uniqueID]||(aF[aG.uniqueID]={});if(aw&&aw===aG.nodeName.toLowerCase()){aG=aG[e]||aG}else{if((aH=aB[av])&&aH[0]===K&&aH[1]===i){return(aC[2]=aH[2])}else{aB[av]=aC;if((aC[2]=az(aG,aE,aD))){return true}}}}}}return false}}function x(e){return e.length>1?function(ay,ax,av){var aw=e.length;while(aw--){if(!e[aw](ay,ax,av)){return false}}return true}:e[0]}function J(av,ay,ax){var aw=0,e=ay.length;for(;aw<e;aw++){af(av,ay[aw],ax)}return ax}function N(e,av,aw,ax,aA){var ay,aD=[],az=0,aB=e.length,aC=av!=null;for(;az<aB;az++){if((ay=e[az])){if(!aw||aw(ay,ax,aA)){aD.push(ay);if(aC){av.push(az)}}}}return aD}function ar(av,i,ax,aw,ay,e){if(aw&&!aw[am]){aw=ar(aw)}if(ay&&!ay[am]){ay=ar(ay,e)}return ap(function(aJ,aG,aB,aI){var aL,aH,aD,aC=[],aK=[],aA=aG.length,az=aJ||J(i||"*",aB.nodeType?[aB]:aB,[]),aE=av&&(aJ||!i)?N(az,aC,av,aB,aI):az,aF=ax?ay||(aJ?av:aA||aw)?[]:aG:aE;if(ax){ax(aE,aF,aB,aI)}if(aw){aL=N(aF,aK);aw(aL,[],aB,aI);aH=aL.length;while(aH--){if((aD=aL[aH])){aF[aK[aH]]=!(aE[aK[aH]]=aD)}}}if(aJ){if(ay||av){if(ay){aL=[];aH=aF.length;while(aH--){if((aD=aF[aH])){aL.push((aE[aH]=aD))}}ay(null,(aF=[]),aL,aI)}aH=aF.length;while(aH--){if((aD=aF[aH])&&(aL=ay?H(aJ,aD):aC[aH])>-1){aJ[aL]=!(aG[aL]=aD)}}}}else{aF=N(aF===aG?aF.splice(aA,aF.length):aF);if(ay){ay(null,aG,aF,aI)}else{ak.apply(aG,aF)}}})}function P(aA){var av,ay,aw,az=aA.length,aD=ab.relative[aA[0].type],aE=aD||ab.relative[" "],ax=aD?1:0,aB=O(function(i){return i===av},aE,true),aC=O(function(i){return H(av,i)>-1},aE,true),e=[function(aH,aG,aF){var i=(!aD&&(aF||aG!==Y))||((av=aG).nodeType?aB(aH,aG,aF):aC(aH,aG,aF));av=null;return i}];for(;ax<az;ax++){if((ay=ab.relative[aA[ax].type])){e=[O(x(e),ay)]}else{ay=ab.filter[aA[ax].type].apply(null,aA[ax].matches);if(ay[am]){aw=++ax;for(;aw<az;aw++){if(ab.relative[aA[aw].type]){break}}return ar(ax>1&&x(e),ax>1&&a(aA.slice(0,ax-1).concat({value:aA[ax-2].type===" "?"*":""})).replace(ah,"$1"),ay,ax<aw&&P(aA.slice(ax,aw)),aw<az&&P((aA=aA.slice(aw))),aw<az&&a(aA))}e.push(ay)}}return x(e)}function n(aw,av){var e=av.length>0,ax=aw.length>0,i=function(aH,aB,aG,aF,aK){var aC,aD,aI,aM=0,aE="0",ay=aH&&[],aN=[],aL=Y,aA=aH||ax&&ab.find.TAG("*",aK),az=(K+=aL==null?1:Math.random()||0.1),aJ=aA.length;if(aK){Y=aB===o||aB||aK}for(;aE!==aJ&&(aC=aA[aE])!=null;aE++){if(ax&&aC){aD=0;if(!aB&&aC.ownerDocument!==o){v(aC);aG=!ao}while((aI=aw[aD++])){if(aI(aC,aB||o,aG)){aF.push(aC);break}}if(aK){K=az}}if(e){if((aC=!aI&&aC)){aM--}if(aH){ay.push(aC)}}}aM+=aE;if(e&&aE!==aM){aD=0;while((aI=av[aD++])){aI(ay,aN,aB,aG)}if(aH){if(aM>0){while(aE--){if(!(ay[aE]||aN[aE])){aN[aE]=V.call(aF)}}}aN=N(aN)}ak.apply(aF,aN);if(aK&&!aH&&aN.length>0&&(aM+av.length)>1){af.uniqueSort(aF)}}if(aK){K=az;Y=aL}return ay};return e?ap(i):i}u=af.compile=function(e,aw){var ax,av=[],az=[],ay=G[e+" "];if(!ay){if(!aw){aw=k(e)}ax=aw.length;while(ax--){ay=P(aw[ax]);if(ay[am]){av.push(ay)}else{az.push(ay)}}ay=G(e,n(az,av));ay.selector=e}return ay};al=af.select=function(e,az,ay,av){var ax,aA=typeof e==="function"&&e,aw=!av&&k((e=aA.selector||e));ay=ay||[];(aA||u(e,aw))(av,az,!ao,ay,!az||az);return ay};ae.sortStable=am.split("").sort(A).join("")===am;ae.detectDuplicates=!!s;v();ae.sortDetached=Z(function(e){return e.compareDocumentPosition(o.createElement("fieldset"))&1});if(!Z(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){B("type|href|height|width",function(i,e){return i.getAttribute(e,e.toLowerCase()==="type"?1:2)})}if(!ae.attributes||!Z(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){B("value",function(i,e){if(i.nodeName.toLowerCase()==="input"){return i.defaultValue}})}if(!Z(function(e){return e.getAttribute("disabled")==null})){B(ag,function(i,e){var av;return i[e]===true?e.toLowerCase():(av=i.getAttributeNode(e))&&av.specified?av.value:null})}t.support=ae;t.sizzle=af})(dynamsoft.lib);(function(j){var aa=Array.prototype,t=aa.slice,f=j.doc,U=j.each,d=f.documentElement;var y=20180508;if(j._ui_nodelistExt_ver){if(j.isNumber(j._ui_nodelistExt_ver)&&j._ui_nodelistExt_ver>=y){return}}j._ui_nodelistExt_ver=y;var M=j.support,Q=j.sizzle;var b,S,T,I,r,k,K=f.createElement("div"),Y=f.createElement("div");function p(){var ad,ac;d.appendChild(K);Y.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";b=T=k=false;S=r=true;if(window.getComputedStyle){ac=window.getComputedStyle(Y);b=(ac||{}).top!=="1%";k=(ac||{}).marginLeft==="2px";T=(ac||{width:"4px"}).width==="4px";Y.style.marginRight="50%";S=(ac||{marginRight:"4px"}).marginRight==="4px";ad=Y.appendChild(document.createElement("div"));ad.style.cssText=Y.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";ad.style.marginRight=ad.style.width="0";Y.style.width="1px";r=!parseFloat((window.getComputedStyle(ad)||{}).marginRight);Y.removeChild(ad)}Y.style.display="none";I=Y.getClientRects().length===0;if(I){Y.style.display="";Y.innerHTML="<table><tr><td></td><td>t</td></tr></table>";Y.childNodes[0].style.borderCollapse="separate";ad=Y.getElementsByTagName("td");ad[0].style.cssText="margin:0;border:0;padding:0;display:none";I=ad[0].offsetHeight===0;if(I){ad[0].style.display="";ad[1].style.display="none";I=ad[0].offsetHeight===0}}d.removeChild(K)}if(!Y.style){return}Y.style.cssText="float:left;opacity:.5";M.opacity=Y.style.opacity==="0.5";M.cssFloat=!!Y.style.cssFloat;Y.style.backgroundClip="content-box";Y.cloneNode(true).style.backgroundClip="";M.clearCloneStyle=Y.style.backgroundClip==="content-box";K=document.createElement("div");K.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute";Y.innerHTML="";K.appendChild(Y);M.boxSizing=Y.style.boxSizing===""||Y.style.MozBoxSizing===""||Y.style.WebkitBoxSizing==="";j.mix(M,{reliableHiddenOffsets:function(){if(b==null){p()}return I},boxSizingReliable:function(){if(b==null){p()}return T},pixelMarginRight:function(){if(b==null){p()}return S},pixelPosition:function(){if(b==null){p()}return b},reliableMarginRight:function(){if(b==null){p()}return r},reliableMarginLeft:function(){if(b==null){p()}return k}});var i,g,x=(/^margin/),q=/^(top|right|bottom|left)$/,Z=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source,J=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),o=new RegExp("^("+Z+")(.*)$","i");if(window.getComputedStyle){i=function(ae){var ad,ac;ad=j.isFunction(ae.getEL)?ae.getEL():ae;ac=ad.ownerDocument.defaultView;if(!ac||!ac.opener){ac=window}return ac.getComputedStyle(ad)};g=function(aj,ad,ai){var ag,af,ah,ac,ae=aj.style;ai=ai||i(aj);ac=ai?ai.getPropertyValue(ad)||ai[ad]:undefined;if((ac===""||ac===undefined)&&!Q.contains(aj.ownerDocument,aj)){ac=j.style(aj,ad)}if(ai){if(!M.pixelMarginRight()&&J.test(ac)&&x.test(ad)){ag=ae.width;af=ae.minWidth;ah=ae.maxWidth;ae.minWidth=ae.maxWidth=ae.width=ac;ac=ai.width;ae.width=ag;ae.minWidth=af;ae.maxWidth=ah}}return ac===undefined?ac:ac+""}}else{if(d.currentStyle){i=function(ac){return ac.currentStyle};g=function(ai,af,ah){var aj,ad,ac,ae,ag=ai.style;ah=ah||i(ai);ae=ah?ah[af]:undefined;if(ae==null&&ag&&ag[af]){ae=ag[af]}if(J.test(ae)&&!q.test(af)){aj=ag.left;ad=ai.runtimeStyle;ac=ad&&ad.left;if(ac){ad.left=ai.currentStyle.left}ag.left=af==="fontSize"?"1em":ae;ae=ag.pixelLeft+"px";ag.left=aj;if(ac){ad.left=ac}}return ae===undefined?ae:ae+""||"auto"}}}var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,n=(/<([\w:-]+)/),c=(/^\s+/),u=/<|&#?\w+;/,E=/<tbody/i,G=/^-ms-/,z=/-([\da-z])/gi,A=/^(none|table(?!-c[ea]).+)/,O=(/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/),L={position:"absolute",visibility:"hidden",display:"block"},D={letterSpacing:"0",fontWeight:"400"},a=["Top","Right","Bottom","Left"];var R={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:M.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};var C,X=["Webkit","O","Moz","ms"],H="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";var V=document.createElement("div");if(!V.style){return}C=V.style;M.cssFloat=!!V.style.cssFloat;var B=function(ac,ad){return ad.toUpperCase()};var v={type:j.type,cssHooks:{},htmlPrefilter:function(ac){return ac.replace(e,"<$1></$2>")},nodeName:function(ad,ac){return ad.nodeName&&ad.nodeName.toLowerCase()===ac.toLowerCase()},merge:function(ag,ae){var ac=+ae.length,ad=0,af=ag.length;while(ad<ac){ag[af++]=ae[ad++]}if(ac!==ac){while(ae[ad]!==undefined){ag[af++]=ae[ad++]}}ag.length=af;return ag},camelCase:function(ac){return ac.replace(G,"ms-").replace(z,B)},cssProps:{"float":M.cssFloat?"cssFloat":"styleFloat"},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true}};function N(ac){if(ac in C){return ac}var ae=ac.charAt(0).toUpperCase()+ac.slice(1),ad=X.length;while(ad--){ac=X[ad]+ae;if(ac in C){return ac}}}function m(af,ac){var ad,ag,ae=0,ah=typeof af.getElementsByTagName!=="undefined"?af.getElementsByTagName(ac||"*"):typeof af.querySelectorAll!=="undefined"?af.querySelectorAll(ac||"*"):undefined;if(!ah){ah=[];for(ad=af.childNodes||af;(ag=ad[ae])!=null;ae++){if(!ac||v.nodeName(ag,ac)){ah.push(ag)}else{v.merge(ah,m(ag,ac))}}}return ac===undefined||ac&&v.nodeName(af,ac)?v.merge([af],ah):ah}function W(ae){var ad=H.split("|"),ac=ae.createDocumentFragment();if(ac.createElement){while(ad.length){ac.createElement(ad.pop())}}return ac}function h(ad,af){var ak,ah,aj,am,ao,an,ae,ai=ad.length,ag=W(af),ac=[],al=0;for(;al<ai;al++){ah=ad[al];if(ah||ah===0){if(j.type(ah)==="object"){v.merge(ac,ah.nodeType?[ah]:ah)}else{if(!u.test(ah)){ac.push(af.createTextNode(ah))}else{am=am||ag.appendChild(af.createElement("div"));ao=(n.exec(ah)||["",""])[1].toLowerCase();ae=R[ao]||R._default;am.innerHTML=ae[1]+v.htmlPrefilter(ah)+ae[2];ak=ae[0];while(ak--){am=am.lastChild}if(!M.leadingWhitespace&&c.test(ah)){ac.push(af.createTextNode(c.exec(ah)[0]))}if(!M.tbody){ah=ao==="table"&&!E.test(ah)?am.firstChild:ae[1]==="<table>"&&!E.test(ah)?am:0;ak=ah&&ah.childNodes.length;while(ak--){if(v.nodeName((an=ah.childNodes[ak]),"tbody")&&!an.childNodes.length){ah.removeChild(an)}}}v.merge(ac,am.childNodes);am.textContent="";while(am.firstChild){am.removeChild(am.firstChild)}am=ag.lastChild}}}}if(am){ag.removeChild(am)}al=0;while((ah=ac[al++])){if(ah.tagName!=="SCRIPT"){aj=Q.contains(ah.ownerDocument,ah);ag.appendChild(ah)}}am=null;return ag}var F=function(ah,ag,ai,af){var ae,ad,ac={};U(ag,function(ak,aj){ac[aj]=ah.style[aj];ah.style[aj]=ag[aj]});ae=ai.apply(ah,af||[]);U(ag,function(ak,aj){ah.style[aj]=ac[aj]});return ae};function s(ag,ad,ac,ai,af){var ae=ac===(ai?"border":"content")?4:ad==="width"?1:0,ah=0;for(;ae<4;ae+=2){if(ac==="margin"){ah+=j.css(ag,ac+a[ae],true,af)}if(ai){if(ac==="content"){ah-=j.css(ag,"padding"+a[ae],true,af)}if(ac!=="margin"){ah-=j.css(ag,"border"+a[ae]+"Width",true,af)}}else{ah+=j.css(ag,"padding"+a[ae],true,af);if(ac!=="padding"){ah+=j.css(ag,"border"+a[ae]+"Width",true,af)}}}return ah}function ab(ag,ad,ac){var af=true,ah=ad==="width"?ag.offsetWidth:ag.offsetHeight,ae=i(ag),ai=M.boxSizing&&j.css(ag,"boxSizing",false,ae)==="border-box";if(ah<=0||ah==null){ah=g(ag,ad,ae);if(ah<0||ah==null){ah=ag.style[ad]}if(J.test(ah)){return ah}af=ai&&(M.boxSizingReliable()||ah===ag.style[ad]);ah=parseFloat(ah)||0}return(ah+s(ag,ad,ac||(ai?"border":"content"),af,ae))}function P(ac){var ad=new RegExp("^(?:([+-])=|)("+Z+")([a-z%]*)$","i");return ad.exec(ac)}function w(ac,ae,af){var ad=o.exec(ae);return ad?Math.max(0,ad[1]-(af||0))+(ad[2]||"px"):ae}function l(ad,ac,ag,al){var am,ae=1,ai=20,ak=al?function(){return al.cur()}:function(){return j.css(ad,ac,"")},ah=ak(),aj=ag&&ag[3]||(v.cssNumber[ac]?"":"px"),af=(v.cssNumber[ac]||aj!=="px"&&+ah)&&P(j.css(ad,ac));if(af&&af[3]!==aj){aj=aj||af[3];ag=ag||[];af=+ah||1;do{ae=ae||".5";af=af/ae;j.style(ad,ac,af+aj)}while(ae!==(ae=ak()/ah)&&ae!==1&&--ai)}if(ag){af=+af||+ah||0;am=ag[1]?af+(ag[1]+1)*ag[2]:+ag[2];if(al){al.unit=aj;al.start=af;al.end=am}}return am}U(["height","width"],function(ac,ad){v.cssHooks[ac]={get:function(ag,af,ae){if(af){return A.test(j.css(ag,"display"))&&ag.offsetWidth===0?F(ag,L,function(){return ab(ag,ac,ae)}):ab(ag,ac,ae)}},set:function(ag,ah,ae){var af=ae&&i(ag);return w(ag,ah,ae?s(ag,ac,ae,M.boxSizing&&j.css(ag,"boxSizing",false,af)==="border-box",af):0)}}});j.style=function(ae,ad,aj,af){if(!ae||ae.nodeType===3||ae.nodeType===8||!ae.style){return}var ah,ai,ak,ag=v.camelCase(ad),ac=ae.style;ad=v.cssProps[ag]||(v.cssProps[ag]=N(ag)||ag);ak=v.cssHooks[ad]||v.cssHooks[ag];if(aj!==undefined){ai=typeof aj;if(ai==="string"&&(ah=P(aj))&&ah[1]){aj=l(ae,ad,ah);ai="number"}if(aj==null||aj!==aj){return}if(ai==="number"){aj+=ah&&ah[3]||(v.cssNumber[ag]?"":"px")}if(!M.clearCloneStyle&&aj===""&&ad.indexOf("background")===0){ac[ad]="inherit"}if(!ak||!("set" in ak)||(aj=ak.set(ae,aj,af))!==undefined){ac[ad]=aj}}else{if(ak&&"get" in ak&&(ah=ak.get(ae,false,af))!==undefined){return ah}return ac[ad]+""}};j.css=function(ai,ag,ad,ah){var af,aj,ac,ae=v.camelCase(ag);ag=v.cssProps[ae]||(v.cssProps[ae]=N(ae)||ae);ac=v.cssHooks[ag]||v.cssHooks[ae];if(ac&&"get" in ac){aj=ac.get(ai,true,ad)}if(aj===undefined){aj=g(ai,ag,ah)}if(aj==="normal"&&ag in D){aj=D[ag]}if(ad===""||ad){af=parseFloat(aj);return ad===true||isFinite(af)?af||0:aj}return aj};j.parseHTML=function(ae,ad){if(!ae||typeof ae!=="string"){return[]}if(typeof ad==="boolean"){ad=false}ad=ad||document;var ac=O.exec(ae);if(ac){return[ad.createElement(ac[1])]}ac=h([ae],ad);return v.merge([],ac.childNodes)}})(dynamsoft.lib);(function(b,i){var g=b.lib,e=b.navInfo,c=b.managerEnv,h=e.host,d,a,f=20180425,j=function(){if(dynamsoft.dcp){var k=dynamsoft.dcp.dcpJSVer;if(g.isNumber(k)){return k>=f}}return false};if(!c){c=dynamsoft.managerEnv={}}c.resourcesPath=c.resourcesPath||"Resources";c.IfUpdateService=c.IfUpdateService?true:false;if(j()){j=i;f=i;return}a={dcpStatus:0,bConnected:false,curPortIndex:0,bTrial:false,bConnectNumLimited:true,IMAXCONNECTCOUNT:3,EnumDCP_DetectStatus:{Init:0,Connected:1,DownloadingZip:2,DownloadedZip:3,DownloadFailed:4,CheckingManagerVer:15,CheckingServiceVer:16,NotInstalled:17,CheckedService:5,VerifyingZip:6,VerifiedZip:7,UpdatingService:8,UpdateSucceed:9,UpdateFailed:10,UpdateSkipped:11}};dynamsoft.dcp=d={ip:"127.0.0.1",ports:[[18625,18626],[18993,18994]],win64Port:[18627,18628],ifCheck64bitServiceFirst:false,dcpJSVer:f,oldDWASMVerStr:"dwasm_13000404",oldDWASMVer:[13,0,0,"0404"],DWASMVer14:[14,0,0,"0618"],managerVersion:[14,0,0,"0618"],serviceVersion:[1,4,0,"0618"],detect:a,strSID:"",bEnhancedMode:false,b64bit:false,onReadys:[],versionInfo:function(o,k){var n=0,m=function(t){if(g.isArray(t)&&t.length>0&&t[0]){a.curPort=d.ports[n%d.ports.length];var w=t[0];if(g.isString(w)&&d._compareVersion(w.split(","),d.oldDWASMVer)){var p=d._compareVersion(w.split(","),d.DWASMVer14),v=g.isString(t[1])&&t[1].toLowerCase(),u="",s=false,q=false;if(p&&t.length>4){u=g.isString(t[2])?t[2]:"";s=g.isString(t[3])&&(t[3]==="true");q=g.isString(t[4])&&(t[4]==="64")}d.strSID=u;d.bEnhancedMode=s;d.b64bit=q;a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.Connected;d._sendStatusEvent(false,w);if(g.isFunction(o)){setTimeout(function(){o(u,s)},0)}return true}}return false},l=function(q,r,p){++n;a.curPortIndex=n%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&n>=a.IMAXCONNECTCOUNT){setTimeout(function(){o(q,r,p)},0);return true}return false};a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,k,m,l)},_checkOldManagerVersion:function(l,k){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",true,i,l,k)},_checkManagerVersion:function(k,m,l){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingManagerVer;this._postBase("VersionInfo",false,k,m,l)},_checkService:function(l,k){a.dcpStatus=a.EnumDCP_DetectStatus.CheckingServiceVer;this._postBase("DSVersion",false,i,l,k)},_checkUpdateFile:function(l,k){this._postBase("CheckUpdateFile",false,i,l,k)},_updateService:function(l,k){this._postBase("UpdateService",false,i,l,k)},_postBase:function(m,p,k,o,n){var q,l;if(p){q=d.oldDWASMVerStr}else{q="dwasm2_"+d._getModuleVer()}l={id:"1",method:m,version:q,parameter:[]};if(k){l.productKey=k}this._postBaseV2(m,p,l,o,n)},_postBaseV2:function(l,o,k,r,q){var p,s,m,n=g.stringify(k);if(!g.isFunction(r)||!g.isFunction(q)){return}p=function(v,u){var t=[d._getPreUrl(a.curPortIndex),o?"dcp/":d._getModuleName(),o?d.oldDWASMVerStr:d._getModuleVer(),"/",l,"?type=1&dsver=",d.serviceVersion.join(""),"&ts=",g.now()].join("");g.ajax({method:"POST",url:t,data:n,onSuccess:v,onError:u})};s=function(u,v,t){if(q(u,v,t)){return}setTimeout(function(){p(m,s)},1000)};m=function(u,w,t){var v=d._getJSON(u);if(v&&"result" in v){if(r(v.result)){return}}s(u,w,t)};p(m,s)},loadZip:function(l,p,o,q){var n,m=p,k=o;if(m===100){m=0;k=function(s){if(g.isString(s)){s=s.replace('"result" : [ 0,','"result" : [ 100,')}o(s)}}if(dynamsoft.managerEnv.IfUpdateService){n=[d._getPreUrl(a.curPortIndex),d._getModuleName(),d._getModuleVer(),"/LoadZipFromBytes?type=",m,"&dsver=",d.serviceVersion.join(""),"&ts=",g.now()].join("")}else{n=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.serviceVersion.join(""),"&ts=",g.now()].join("")}g.ajax({method:"POST",url:n,async:true,data:l,onSuccess:k,onError:q})},oldLoadZip:function(l,k,n,o){var m=[d._getPreUrl(a.curPortIndex),"dcp/",d.oldDWASMVerStr,"/LoadZipFromBytes?type=0","&dsver=",d.serviceVersion.join(""),"&ts=",g.now()].join("");g.ajax({method:"POST",url:m,async:true,data:l,onSuccess:n,onError:o})},_getPreUrl:function(m){var k,l;if(e.bSSL){l="https://";k=d.ports[m][1]}else{l="http://";k=d.ports[m][0]}return[l,d.ip,":",k,"/"].join("")},_getJSON:function(k){return k?g.parse(k):!1},_getModuleName:function(){return"dcp/dwasm2_"},_getModuleVer:function(){return d.managerVersion.join("")},_compareVersion:function(l,k){if(g.isArray(l)&&l.length==4&&g.isArray(k)&&k.length>=4){return l[0]>k[0]||l[0]==k[0]&&l[1]>k[1]||l[0]==k[0]&&l[1]==k[1]&&l[2]>k[2]||l[0]==k[0]&&l[1]==k[1]&&l[2]==k[2]&&parseInt(l[3])>=parseInt(k[3])}else{if(g.isArray(l)&&l.length==1&&g.isArray(k)&&k.length>=1){return parseInt(l[0])>=parseInt(k[0])}}return false},_getDSUpdateZipUrl:function(){var l=dynamsoft.navInfo,m,k,n="";m="Win";if(l.bMac){m="Mac"}else{if(l.bLinux){m="Linux"}}if(l.bFileSystem){k=""}else{k="?t="+g.now()}if(l.bWin&&d.b64bit){n="_x64"}return[dynamsoft.managerEnv.resourcesPath,"/dist/serviceupdate/",m,"DSUpdate_",d.managerVersion.join("."),n,".zip",k].join("")},getPorts:function(k,o,n){var m="GetPorts",p="dwasm2_"+d._getModuleVer(),l={id:"1",method:m,version:p,parameter:[k]};this._postBaseV2(m,false,l,o,n)},checkDcpForUpdate:function(p,k,r,s,n,m,C,u){var q=false,E=true,A=3,l=0,x=function(H){if(!(g.isArray(H)&&H.length>0&&H[0])){return false}var I=H[0].split(",");if(!dynamsoft.managerEnv.IfUpdateService){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(C,0)}else{if(d._compareVersion(I,d.oldDWASMVer)){var G=d._getDSUpdateZipUrl();q=true;var K=function(L){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadedZip;d._sendStatusEvent();var M=0;d.oldLoadZip(L,M,function(){setTimeout(function(){d._checkManagerVersion(u,t,o)},5000)},J)},J=function(M,N,L){d._funUpdateFailed(n,m,M,L.status);setTimeout(C,0)},F=function(M,O,L){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(n){n()}var P=L.status,N;if(P==200){N=M}else{N="The update package can't be downloaded. The error code is "+P+"."}if(m){m(true,N)}d._sendStatusEvent(true,N);setTimeout(C,0)};if(r){r()}if(s){s()}a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();g.ajax({method:"GET",url:G,async:true,dataType:"blob",onSuccess:K,onError:F})}else{if(E){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;if(r){r()}if(p){p()}d._sendStatusEvent();E=false}}}return true},w=function(F,G){++l;a.curPortIndex=l%d.ports.length;a.bConnected=false;if(a.bConnectNumLimited&&l>=a.IMAXCONNECTCOUNT){a.dcpStatus=a.EnumDCP_DetectStatus.NotInstalled;d._sendStatusEvent()}else{setTimeout(function(){d._checkOldManagerVersion(x,w)},1000)}return true},t=function(F){if(!(g.isArray(F)&&F.length>0&&F[0])){return false}var G=F[0].split(",");if(d._compareVersion(G,d.managerVersion)){if(dynamsoft.managerEnv.IfUpdateService){if(q){setTimeout(function(){d._checkUpdateZip(s,n,m,C)},0)}else{setTimeout(function(){d._checkService(D,v)},0)}}else{a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(C,0)}return true}return false},o=function(H,I,G){var F=1000;if(A<3){F=500}A--;if(A<0){d._funShowUpgradeDialogWhenUpdateFailed(n,m);setTimeout(C,0)}else{setTimeout(function(){d._checkManagerVersion(u,t,o)},F)}return true},D=function(G){if(!(g.isArray(G)&&G.length>0&&G[0])){if(r){r()}return false}var F=G[0].split(",");if(d._compareVersion(F,d.serviceVersion)){a.bConnected=true;if(n){n()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,G[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(C,0)}else{setTimeout(function(){d._checkUpdateZip(s,n,m,C)},0)}return true},v=function(G,H,F){d._funUpdateFailed(n,m,G,F.status);setTimeout(C,0);return true};var z=false,B=function(I){if(!(g.isArray(I)&&I.length>0&&I[0])){return false}var L=I[0];if(g.isString(L)&&d._compareVersion(L.split(","),d.oldDWASMVer)){var F=d._compareVersion(L.split(","),d.DWASMVer14),K=g.isString(I[1])&&I[1].toLowerCase(),J="",H=false,G=false;if(F&&I.length>4){z=true;J=g.isString(I[2])?I[2]:"";H=g.isString(I[3])&&(I[3]==="true");G=g.isString(I[4])&&(I[4]==="64")}d.strSID=J;d.bEnhancedMode=H;d.b64bit=G;a.curPort=d.ports[l%d.ports.length];if(!dynamsoft.managerEnv.IfUpdateService){a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSkipped;d._sendStatusEvent();setTimeout(C,0)}else{setTimeout(function(){d._checkService(D,v)},0)}}else{l=0;a.curPortIndex=0;if(E){if(r){r()}if(p){p()}E=false}setTimeout(function(){d._checkOldManagerVersion(x,w)},1000)}return true},y=function(F,G){++l;a.curPortIndex=l%d.ports.length;a.bConnected=false;if(E){if(r){r()}if(p){p(F,G)}E=false}if(a.bConnectNumLimited&&l>=a.IMAXCONNECTCOUNT){l=0;a.curPortIndex=0;setTimeout(function(){d._checkOldManagerVersion(x,w)},1000)}else{setTimeout(function(){d._checkManagerVersion(u,B,y)},1000)}return true};if(k){k()}d._checkManagerVersion(u,B,y)},_checkUpdateZip:function(o,v,n,w,p){var q=function(A,B,z){var C=-1;if(z){C=z.status}if(C==0){setTimeout(function(){d._checkService(u,r)},5000);return true}var y=d._getDSUpdateZipUrl();a.dcpStatus=a.EnumDCP_DetectStatus.DownloadingZip;d._sendStatusEvent();g.ajax({method:"GET",url:y,async:true,dataType:"blob",onSuccess:k,onError:t});return true},t=function(z,B,y){a.dcpStatus=a.EnumDCP_DetectStatus.DownloadFailed;if(v){v()}var C=y.status,A;if(C==200){A=z}else{A="The update package can't be downloaded. The error code is "+C+"."}if(n){n(true,A)}d._sendStatusEvent(true,A);setTimeout(w,0);return true},s=function(z){if(!(g.isArray(z)&&z.length>1)){return false}if(z[1]==true){a.dcpStatus=a.EnumDCP_DetectStatus.VerifiedZip;d._sendStatusEvent();a.dcpStatus=a.EnumDCP_DetectStatus.UpdatingService;d._sendStatusEvent();setTimeout(function(){d._checkService(u,r)},5000)}else{var y=0;if("exception" in z){y=z.exception}if(y==-2373){d._funUpdateFailed(v,n,z,200);setTimeout(w,0);return true}setTimeout(q,0)}return true},k=function(y){var z=1;dynamsoft.dcp.loadZip(y,z,function(A){var C,B;try{if(g.isString(A)){B=g.parse(A.replace(/\0/g,""));if("result" in B){C=B.result}}}catch(D){}if(g.isArray(C)&&C.length>2&&C[2]==true){setTimeout(function(){d._checkService(u,r)},5000);return}d._funUpdateFailed(v,n,A,200);setTimeout(w,0)},m)},m=function(z,A,y){var B=-1;if(y){B=y.status}if(B==0){setTimeout(function(){d._checkService(u,r)},5000)}else{d._funUpdateFailed(v,n,z,y.status);setTimeout(w,0)}return true},x=function(y){if(!(g.isArray(y)&&y.length>0)){return false}if(y[0]==true){setTimeout(function(){d._checkService(u,r)},5000)}else{d._funUpdateFailed(v,n,y,200);setTimeout(w,0)}return true},l=3,u=function(z){if(!(g.isArray(z)&&z.length>0&&z[0])){return false}var y=z[0].split(",");if(d._compareVersion(y,d.serviceVersion)){a.bConnected=true;if(v){v()}a.dcpStatus=a.EnumDCP_DetectStatus.CheckedService;d._sendStatusEvent(false,z[0]);a.dcpStatus=a.EnumDCP_DetectStatus.UpdateSucceed;d._sendStatusEvent();setTimeout(w,0);return true}return false},r=function(z,A){var y=1000;if(l<3){y=500}l--;if(l<0){d._funShowUpgradeDialogWhenUpdateFailed(v,n);setTimeout(w,0);return true}setTimeout(function(){d._checkService(u,r)},y);return true};if(o){o()}a.dcpStatus=a.EnumDCP_DetectStatus.VerifyingZip;d._sendStatusEvent();d._checkUpdateFile(s,q)},_getStatusString:function(o,n){var l,k,m="";if(o==a.EnumDCP_DetectStatus.Init){return"Getting manager version"}else{if(o==a.EnumDCP_DetectStatus.Connected){if(n){m=n}return"Getting manager version succeeded and the version is "+m}else{if(o==a.EnumDCP_DetectStatus.DownloadingZip){return"Downloading the update package"}else{if(o==a.EnumDCP_DetectStatus.DownloadedZip){return"Update package downloaded"}else{if(o==a.EnumDCP_DetectStatus.DownloadFailed){k=".";if(n&&n.length>0){if(n.slice(n.length-1)=="."){k=""}l=" with the error: "+n}else{l=""}return"Update package failed to download"+l+k}else{if(o==a.EnumDCP_DetectStatus.CheckingManagerVer){return"Getting manager version"}else{if(o==a.EnumDCP_DetectStatus.CheckingServiceVer){return"Getting service version"}else{if(o==a.EnumDCP_DetectStatus.NotInstalled){return"Dynamsoft Service Not Installed"}else{if(o==a.EnumDCP_DetectStatus.UpdateSkipped){return"Update skipped"}else{if(o==a.EnumDCP_DetectStatus.CheckedService){if(n){m=n}return"Getting service version succeeded and the version is "+m}else{if(o==a.EnumDCP_DetectStatus.VerifyingZip){return"Verifying the update package"}else{if(o==a.EnumDCP_DetectStatus.VerifiedZip){return"Update package verified"}else{if(o==a.EnumDCP_DetectStatus.UpdatingService){return"Updating the service"}else{if(o==a.EnumDCP_DetectStatus.UpdateSucceed){return"Update succeeded"}else{if(o==a.EnumDCP_DetectStatus.UpdateFailed){k=".";if(n&&n.length>0){if(n.slice(n.length-1)=="."){k=""}l=" with the error: "+n}else{l=""}return"The update failed"+l+k}}}}}}}}}}}}}}}return""},_sendStatusEvent:function(l,m){var k=l?true:false;if(g.isFunction(h.OnGetServiceUpdateStatus)){h.OnGetServiceUpdateStatus(k,a.dcpStatus,d._getStatusString(a.dcpStatus,m))}},_getErr:function(l){var m,k="";try{if(g.isString(l)){m=l.replace(/\0/g,"");m=g.parse(m)}else{if(l){m=l}}if("description" in m){k=m.description}}catch(n){}return k},_funShowUpgradeDialogWhenUpdateFailed:function(l,k){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(l){l()}if(k){k()}d._sendStatusEvent(true);return true},_funUpdateFailed:function(l,k,m,p){a.bConnected=true;a.dcpStatus=a.EnumDCP_DetectStatus.UpdateFailed;if(l){l()}var n,o;if(p==200){n="The update failed.";o=d._getStatusString(a.dcpStatus,d._getErr(m))}else{n="The update failed. The error code is "+p;o=n}if(k){k(true,n)}d._sendStatusEvent(true,o);return true},getDSPath:function(){var k;if(e.bMac){k="/dist/mac/DynamsoftServiceSetup.pkg"}else{if(e.bLinux){k="/dist/linux/DynamsoftServiceSetup.deb"}else{k="/dist/win/DynamsoftServiceSetup.msi"}}return dynamsoft.managerEnv.resourcesPath+k}};j=i;f=i;c=i;g.ready(function(){if(d.onReadys.length>0){g.each(d.onReadys,function(k){if(g.isFunction(k)){k()}})}if(e.bWin&&e.isX64){if(d.ifCheck64bitServiceFirst){d.ports.unshift(d.win64Port)}else{d.ports.push(d.win64Port)}}})})(dynamsoft);(function(b){var g=b.lib,f=b.dcsEnv,a=g.detect,d=b.navInfo;f.navInfo=d;f._uiMaxSize=100000;f.resourcesPath=f.resourcesPath||"DCSResources";f._dwsObjClientIdPrefix="dwsObject_";f._imgViewerClientIdPrefix="imageViewer_";f._dcoEditorClientIdPrefix="documentEditor_";f._getInstallPackageUrl=function(){if(d.bWin){return f.resourcesPath+"/DynamsoftServiceSetup.msi"}else{if(d.bMac){return f.resourcesPath+"/DynamsoftServiceSetup.pkg"}}return""};f._getProductKey=function(){return g.isString(f.productKey)?f.productKey:""};var c="6, 2, 0, 0720";var e=4;f._getFrontendSdkVersion=function(){return c};f._getFrontendSdkVersionWithDot=function(){var h=c;h=h.split(",").join(".");return h.split(" ").join("")};f._getFrontendSdkVersionWithoutComma=function(){var h=c;h=h.split(",").join("");return h.split(" ").join("")};f._getVersionStrForCommand=function(){var h=f._getFrontendSdkVersionWithoutComma();return["dcs/dcs_",f.bTrial?"trial_":"",h].join("")};f._enumSdkVersionComparisonResult={Unknown:0,Equal:1,FrontendHigher:2,BackendHigher:3,FrontendMiniVersionHigher:4,BackendMiniVersionHigher:5};f._getVersionInfoAry=function(h){if(!g.isString(h)){return null}var k=",";var l=h.split(k);if(isNaN(parseInt(l[0]))){return null}for(var j=0;j<e;j++){l[j]=parseInt(l[j]);if(isNaN(l[j])){l[j]=0}}return l};f._getSdkVersionComparisonResult=function(k){var m=f._enumSdkVersionComparisonResult,l=f._getVersionInfoAry(f._getFrontendSdkVersion()),n=f._getVersionInfoAry(k),h=m.Unknown;if(l===null||n===null){return h}if(l[0]>n[0]){h=m.FrontendHigher}else{if(l[0]<n[0]){h=m.BackendHigher}else{for(var j=1;j<e;j++){if(l[j]>n[j]){h=m.FrontendMiniVersionHigher;break}else{if(l[j]<n[j]){h=m.BackendMiniVersionHigher;break}}}}}if(h===m.Unknown){h=m.Equal}return h};g.ready(function(){if(!f.install){f.install={}}g.mix(f.install,{_divInstallBody:"dcs-InstallBody",_divDcsNonInstallContainerID:"dcs-NonInstallContainerID",_dlgInstall:false,bNeedUpgrade:false});f.install._strDynamsoftWithClose=['<div class="dynamsoft-dcs-dlg-header">','<div class="dynamsoft-dialog-close"></div>',"</div>"].join("");f.install._strDynamsoftWithoutClose=['<div style="height:40px;"></div>'].join("");f.install._strNonInstallDIV=['<div style="text-align:center;" id="',f.install._divDcsNonInstallContainerID,'"></div>'].join("")});f.showInstallDialog=function(i){var h;if(!i){h=['<div class="dwt-box-title"></div>','<div style="font-size: 14px;">',"This page is using a newer version of Dynamsoft Camera SDK than your local copy. Please download and upgrade now.","</div>",'<a id="dwt-btn-install" target="_blank" href="',f._getInstallPackageUrl(),'"><div class="dwt-button"></div></a>','<div style="text-align:center"><i>* Please manually install it</i></div><p></p>']}else{h=['<div class="dynamsoft-dcs-box-title">',"Dynamsoft Camera SDK ",parseInt(f._getFrontendSdkVersion())," is not installed</div>",'<div style="margin:20px;text-align:center"><a id="dwt-btn-install" target="_blank" href="',f._getInstallPackageUrl(),"",'"><div class="dwt-button"></div></a>',"<i>* Please manually install it</i></div>"]}h.push('<div style="margin:20px;">');h.push("If you still see the dialog after the installation,<br />");h.push('please check <a target="_blank" href="http://developer.dynamsoft.com/dws/why-is-the-browser-prompting-me-to-install-dynamsoft-webcam-service-repeatedly">this article</a> for troubleshooting.');h.push("</div>");if(d.bFirefox&&d.bSSL){h.push('<div class="dwt-red" style="padding-top: 10px;">After installation, please RESTART your browser.</div>')}f.ShowDialog(392,230,h.join(""))};f.ShowDialog=function(k,n,o,l){var i=f.install,s;if(!g.get("dynamsoft_waiting")){var h=document.createElement("div");h.className="dynamsoft-dialog-wrap";h.style.width="100%";s=['<div id="dynamsoft_waiting" class="dynamsoft-dialog dynamsoft-dialog2">','<div id="',i._divInstallBody,'"></div></div>'];h.innerHTML=s.join("");document.body.appendChild(h);i._dlgInstall=h;g.dialog.setup(i._dlgInstall)}if(o===false){return}var m=g.one(".dynamsoft-dialog");if(m&&m.getEL()){m[0].style.width=k+"px";if(n&&n>0){m[0].style.height=n+"px"}}var q=(l?i._strDynamsoftWithoutClose:i._strDynamsoftWithClose);g.get(i._divInstallBody).innerHTML=['<div class="dynamsoft-dcs-dialog-body">',q,o,"</div>"].join("");var r=g.get("dynamsoft_waiting");r.style.width=k;if(i._dlgInstall.open){i._dlgInstall.close()}i._dlgInstall.showModal();var j=g.all(".dynamsoft-dialog-close");g.each(j,function(p,t){g.addEventListener(p,"click",Dynamsoft_DCS_OnclickCloseInstall)})};f.CloseDialog=function(){var i=f.install._dlgInstall;if(i){var h=g.all(".dynamsoft-dialog-close");g.each(h,function(j,k){g.removeEventListener(j,"click",Dynamsoft_DCS_OnclickCloseInstall)});if(i.open){i.close()}document.body.removeChild(i);f.install._dlgInstall=false}}})(dynamsoft);function Dynamsoft_DCS_OnclickCloseInstall(a){var d=dynamsoft.dcsEnv;var c=a||window.event;if(c){dynamsoft.lib.stopPropagation(c)}if(!d.install){return}d.CloseDialog();d.install.bNeedUpgrade=false;var b=dynamsoft.lib.get(d.install._divDcsNonInstallContainerID);if(b){b.parentNode.removeChild(b)}}(function(b){var f=b.lib,a=f.detect,e=b.dcsEnv,d=b.navInfo;a.IE_PERMISSION_DENIED_Err_Code=-2146828218;a.IE_Unknown_Err_Code=-2147024891;a.IP="127.0.0.1";a.IMAXCONNECTCOUNT=6;a.bConnectNumLimited=true;a.sdkVersionComparisonResult=e._enumSdkVersionComparisonResult.Unknown;a.isFullVersion=!1;a.portInfo={nonSslPorts:[18646,18987],sslPorts:[18647,18988]};a.orgPortInfo={nonSslPorts:[18620,18991],sslPorts:[18621,18992]};if(!Array.prototype.indexOf){Array.prototype.indexOf=f.indexOf}a.preUrl=[(d.bSSL?"https":"http"),"://",a.IP,":"].join("");a.sendCommand=function(n,l,i,m,j,g,h,k){n=n||"POST";l=l||null;i=i||[a.preUrl,a.portInfo.curPort,"/",e._getVersionStrForCommand(),"/ts=",f.now()].join("");m=m||function(){};j=j||function(){};g=g||"json";k=k||0;f.ajax({method:n,data:l,url:i,onSuccess:m,onError:j,dataType:g,async:h,timeout:k})};a.asyncGetServiceInfo=function(h,i,n,g){var p=0,j=0,m=d.bSSL?a.portInfo.sslPorts:a.portInfo.nonSslPorts;g=f.isNumber(g)?g:a.IMAXCONNECTCOUNT;var k=function(r){if(a.isValidResponseValue(r)&&f.isArray(r.result)){var q=r.result[0];a.sdkVersionComparisonResult=e._getSdkVersionComparisonResult(q);if(a.sdkVersionComparisonResult===e._enumSdkVersionComparisonResult.Equal){a.portInfo.curPort=m[p%m.length];a.bConnected=true;a.isFullVersion=!!r.result[1];if(f.isFunction(h)){setTimeout(function(){h()},0)}return}else{a.bConnected=false;if(f.isFunction(i)){setTimeout(function(){i()},0)}return}}else{o()}},o=function(){++p;a.bConnected=false;if(a.bConnectNumLimited&&p>=g){if(f.isFunction(i)){setTimeout(function(){i()},0)}return}j=p%m.length;setTimeout(function(){l([a.preUrl,m[j],"/",e._getVersionStrForCommand(),"/GetServiceInfo?ts=",f.now()].join(""),k,o)},n&&f.isNumber(n)?n:0)},l=function(q,s,r){a.sendCommand("GET",null,q,s,r,"json",!0,0.5)};l([a.preUrl,m[j],"/",e._getVersionStrForCommand(),"/GetServiceInfo?ts=",f.now()].join(""),k,o)};a.getSessionIdSync=function(){if(f.isString(a.sessionId)){return a.sessionId}var h={method:"GetSessionId",parameter:[a.getSessionTimeout()]},g=function(j){if(a.isValidResponseValue(j)&&f.isArray(j.result)&&f.isString(j.result[0])){a.sessionId=j.result[0]}else{a.sessionId=null}},i=function(){a.sessionId=null};a.sendCommand("POST",f.stringify(h),[a.preUrl,a.portInfo.curPort,"/",e._getVersionStrForCommand(),"/ts=",(new Date()).getTime()].join(""),g,i,"json",!1);return a.sessionId};a.checkServiceConnection=function(g,q){var n=d.bSSL?a.portInfo.sslPorts:a.portInfo.nonSslPorts,l=a.bConnected&&a.portInfo.curPort?a.portInfo.curPort:n[0],r=n.indexOf(l)+1,h=[a.preUrl,l,"/",e._getVersionStrForCommand(),"/GetServiceInfo?ts=",f.now()].join(""),p=false,o=function(s){if(a.isValidResponseValue(s)&&f.isArray(s.result)){var i=s.result[0];a.sdkVersionComparisonResult=e._getSdkVersionComparisonResult(i);if(a.sdkVersionComparisonResult===e._enumSdkVersionComparisonResult.Equal||a.sdkVersionComparisonResult===e._enumSdkVersionComparisonResult.FrontendMiniVersionHigher||a.sdkVersionComparisonResult===e._enumSdkVersionComparisonResult.BackendMiniVersionHigher){a.isFullVersion=!!s.result[1];a.portInfo.curPort=l;if(!f.isString(a.sessionId)){a.sessionId=a.getSessionIdSync()}if(f.isString(a.sessionId)){p=true}else{k()}}else{k()}}else{k()}},j=function(i,s){k();if(q&&d.bIE&&(parseInt(d.strBrowserVersion)<=9)&&f.isString(s)&&(s.toLowerCase().indexOf("denied")!==-1||s.toLowerCase().indexOf(a.IE_PERMISSION_DENIED_Err_Code)!==-1||s.toLowerCase().indexOf(a.IE_Unknown_Err_Code)!==-1)){q.bNeedAddToLocalIntranet=true}},k=function(){a.isFullVersion=false;a.portInfo.curPort=undefined;p=false};g=f.isNumber(g)&&g>0?g:1;for(var m=0;m<g;m++){a.sendCommand("GET",null,h,o,j,"json",!1,0.5);if(p){break}else{l=n[(r+m)%n.length];h=[a.preUrl,l,"/",e._getVersionStrForCommand(),"/GetServiceInfo?ts=",f.now()].join("")}}return p};a.getInitInfo=function(k,i){var g,j=function(l){g=l},h=function(l,n,m){a.sendCommand("GET",null,l,n,m,"json",!1)};if(!a.bConnected||!a.portInfo.curPort||!a.sessionId){return g}else{h([a.preUrl,a.portInfo.curPort,"/",e._getVersionStrForCommand(),"/init?session=",a.sessionId,"&object=",k,"&imageviewer=",i,"&lang=",e._lang,"&ts=",f.now()].join(""),j,j)}return g};a.postSyncCommand=function(p,k,n,l,i){var h=!1,g="POST",o="json",j=!1,m=function(s,r){if(a.isValidResponseValue(s)){if(f.errorInfo.isUnknownCode(s.exception)){s.description=f.errorInfo.getUnknownString(s.exception,s.description);s.exception=EnumDCS_ErrorCode.Unknown}if((s.exception===EnumDCS_ErrorCode.ConnectionToServiceReset||s.exception===EnumDCS_ErrorCode.CameraOccupied)&&f.isString(s.description)){s.description=s.description.replace("Webcam","Camera")}if(s.exception==0){if(f.isFunction(n)){n(s)}h=!0}else{if(p instanceof f.sdk.DcsObject){if(s.exception===f.errorInfo.getLicenseVerificationFailedCode()&&s.result){p._setErrCodeErrString(s.exception,s.result[1]);if(!a.isFullVersion&&s.result[0]!==1&&f.isFunction(n)){n(s)}}else{p._setErrCodeErrString(s.exception,s.description)}}if(!(s.exception===f.errorInfo.getLicenseVerificationFailedCode()&&!a.isFullVersion&&s.result&&s.result[0]!==1)&&f.isFunction(l)){l(s)}h=!1}}else{if(f.isString(r)&&(p instanceof f.sdk.DcsObject)&&(r.toLowerCase()==="maximum call stack size exceeded"||r.toLowerCase()==="out of memory")){p._setErrCodeErrString(f.errorInfo.getConversionFailedCode(),f.errorInfo.getConversionFailedString());h=!1}}},q=function(r,s){if(p instanceof f.sdk.DcsObject){if(d.bIE&&(parseInt(d.strBrowserVersion)<=9)&&f.isString(s)&&(s.toLowerCase().indexOf("denied")!==-1||s.toLowerCase().indexOf(a.IE_PERMISSION_DENIED_Err_Code)!==-1||s.toLowerCase().indexOf(a.IE_Unknown_Err_Code)!==-1)){p._setErrCodeErrString(f.errorInfo.getOperationNotSupportedCode(),f.errorInfo.getOperationNotSupportedString())}else{a.throwServiceNotConnectException(p)}}if(f.isFunction(l)){l()}h=!1};i=i||[a.preUrl,a.portInfo.curPort,"/",e._getVersionStrForCommand(),"/ts=",f.now()].join("");k=k||null;a.sendCommand(g,k,i,m,q,o,j);return h};a.sendRemoveObjectCommand=function(h){var g={session:a.sessionId,object:h,method:"RemoveObject"};a.sendCommand("POST",f.stringify(g),null,null,null,"json",!0)};a.bIsSendingHeartBeat=false;var c=0;a.sendHeartBeatCommand=function(g){if(a.getSessionTimeout()==0){return}if(a.bIsSendingHeartBeat&&g){return}if(!a.bConnected){a.bIsSendingHeartBeat=false;return}if(!f.isString(a.sessionId)){a.bIsSendingHeartBeat=false;return}var h={session:a.sessionId,method:"HeartBeat"};a.bIsSendingHeartBeat=true;a.sendCommand("POST",f.stringify(h),null,function(){setTimeout(a.sendHeartBeatCommand,1000);c=0},function(){c+=1;if(c<a.IMAXCONNECTCOUNT){setTimeout(a.sendHeartBeatCommand,1000)}else{a.bIsSendingHeartBeat=false}},null,true)};a.isValidResponseValue=function(g){if(!g||!f.isObject(g)||!f.isNumber(g.exception)||!f.isString(g.description)){return false}return true};a.setServiceNotConnectErroInfo=function(g){a.bConnected=false;if(g instanceof f.sdk.DcsObject){g._setErrCodeErrString(f.errorInfo.getConnectionToServiceLostCode(),f.errorInfo.getConnectionToServiceLostString())}};a.throwServiceNotConnectException=function(g){a.setServiceNotConnectErroInfo(g);throw {errorCode:f.errorInfo.getConnectionToServiceLostCode(),errorString:f.errorInfo.getConnectionToServiceLostString(),toString:function(){return this.errorCode+": "+this.errorString}}};a.handleImageLoadingError=function(i,h){if(!i||!f.isString(h)){return}var g=function(k){if(a.isValidResponseValue(k)){i._setErrCodeErrString(k.exception,k.description)}},j=function(){a.setServiceNotConnectErroInfo(i)};a.sendCommand("GET",null,h,g,j,"json",!1)};a.getSessionTimeout=function(){var i=dynamsoft.dcsEnv.sessionTimeout,g=((0|1<<31)>>>0)-1,h=5;if(!f.isNumber(i)){i=20*60}i=Math.round(i);if(i>g){i=g}if(i>0&&i<h){i=h}if(i<0){i=0}return i};a.enumDownloadDcsModuleStatus={idle:0,downloading:1,success:2,fail:3};a.downloadDcsModuleStatus=a.enumDownloadDcsModuleStatus.idle;a.dcsModuleBinary=null;a.downloadDcsModule=function(h,g){var i=function(){var n;if(d.bMac){n="MacDCS_"}else{n="WinDCS_"}var m=[e.resourcesPath,"/",n,e._getFrontendSdkVersionWithDot(),dynamsoft.dcp.b64bit?"_x64":"",".zip","?ts=",f.now()].join(""),l=function(p){a.dcsModuleBinary=p;a.downloadDcsModuleStatus=a.enumDownloadDcsModuleStatus.success},o=function(){a.dcsModuleBinary=null;a.downloadDcsModuleStatus=a.enumDownloadDcsModuleStatus.fail};a.downloadDcsModuleStatus=a.enumDownloadDcsModuleStatus.downloading;var k={method:"GET",url:m,dataType:"blob",onSuccess:l,onError:o,async:true};if(d.bIE&&parseInt(d.strBrowserVersion)<10){k.contentType="text/plain; charset=x-user-defined";k.mimeType="text/plain; charset=x-user-defined";k.headers={"Accept-Charset":"x-user-defined"}}else{k.xhrFields={responseType:d.bSafari?"arraybuffer":"blob"}}f.ajax(k)},j=function(){var k=setInterval(function(){if(a.downloadDcsModuleStatus===a.enumDownloadDcsModuleStatus.success){clearInterval(k);if(f.isFunction(h)){h()}}else{if(a.downloadDcsModuleStatus===a.enumDownloadDcsModuleStatus.fail){clearInterval(k);if(f.isFunction(g)){g()}}}},1000)};if(a.downloadDcsModuleStatus===a.enumDownloadDcsModuleStatus.idle||a.downloadDcsModuleStatus===a.enumDownloadDcsModuleStatus.fail){i();j()}else{if(a.downloadDcsModuleStatus===a.enumDownloadDcsModuleStatus.downloading){j()}else{if(f.isFunction(h)){h()}}}}})(dynamsoft);var EnumDCS_ErrorCode={OK:0,ParameterNumberUnmatched:-1001,TypeNotValid:-1002,ValueOutOfRange:-1003,CameraNotFound:-1004,StateNotCorrect:-1005,CameraOccupied:-1006,OperationNotSupported:-1007,ValueNotValid:-1008,CameraNotAuthorized:-1009,MultipageNotSupported:-1010,AsyncTaskNotCompleted:-1011,HttpError:-1012,ContainerTypeNotValid:-1013,ContainerIdNotValid:-1014,LicenseVerificationFailed:-1015,OperationOutOfMemory:-1016,BufferIsFull:-1017,ObjectNotExist:-1018,ObjectExists:-1019,ObjectOccupied:-1020,AccessDenied:-1021,ConnectionToServiceLost:-1022,ConnectionToServiceReset:-1023,OperationSequenceError:-1024,DataFormatInvalid:-1025,JPEGCompressionError:-1026,OperationCancelled:-1027,DocumentNotExist:-1028,DocumentUndetected:-1029,ConversionFailed:-1501,SessionNotFound:-2597,CameraDisconnected:-2792,Unknown:-3001,DownloadDcsModuleFailed:-4001,SendDcsModuleFailed:-4002,ConnectDcsModuleFailed:-4003,DCSModuleNotExist:-4004,DCSModuleDownloadFailure:-4005};(function(a){var b={isUnknownCode:function(c){if(c===EnumDCS_ErrorCode.Unknown){return true}for(var d in EnumDCS_ErrorCode){if(EnumDCS_ErrorCode[d]===c){return false}}return true},getOkCode:function(){return EnumDCS_ErrorCode.OK},getOkString:function(){return"Successful."},getParameterNumberUnmatchedCode:function(){return EnumDCS_ErrorCode.ParameterNumberUnmatched},getParameterNumberUnmatchedString:function(c){return c?"One or more parameters are missing.":"There are too many parameters."},getTypeNotValidCode:function(){return EnumDCS_ErrorCode.TypeNotValid},getTypeNotValidString:function(d,c){return["The type of ",(c?"event ":"parameter "),d," is invalid."].join("")},getObjectNotExistCode:function(){return EnumDCS_ErrorCode.ObjectNotExist},getObjectNotExistString:function(c){return["The object ",c," does not exist."].join("")},getContainerTypeNotValidCode:function(){return EnumDCS_ErrorCode.ContainerTypeNotValid},getContainerTypeNotValidString:function(c){return["The ",(c?c=="document"?"document editor":"image viewer":"video stream")," container must be a DIV element."].join("")},getContainerIdNotValidCode:function(){return EnumDCS_ErrorCode.ContainerIdNotValid},getContainerIdNotValidString:function(){return"The IDs for the video stream container and the image viewer container can not be the same."},getObjectOccupiedCode:function(){return EnumDCS_ErrorCode.ObjectOccupied},getObjectOccupiedString:function(c){return["The object ",c," is occupied."].join("")},getValueOutOfRangeCode:function(){return EnumDCS_ErrorCode.ValueOutOfRange},getValueOutOfRangeString:function(c){return["The value of parameter ",c," is out of range."].join("")},getValueNotValidCode:function(){return EnumDCS_ErrorCode.ValueNotValid},getValueNotValidString:function(c){return["The value of parameter ",c," is invalid."].join("")},getBufferIsFullCode:function(){return EnumDCS_ErrorCode.BufferIsFull},getBufferIsFullString:function(c){return["The ",(c?c=="document"?"document":"image":"image")," buffer is full."].join("")},getOperationSequenceErrorCode:function(){return EnumDCS_ErrorCode.OperationSequenceError},getOperationSequenceErrorString:function(){return"Operation out of expected sequence."},getConnectionToServiceLostCode:function(){return EnumDCS_ErrorCode.ConnectionToServiceLost},getConnectionToServiceLostString:function(){return"The local service (Dynamsoft Service) is disconnected."},getAccessDeniedCode:function(){return EnumDCS_ErrorCode.AccessDenied},getAccessDeniedString:function(d,f,c){var e=arguments.length;if(e==3&&c==true){return"The document is being edited now."}else{if(e==2&&f=="Document"){return["The access to document editor "+d+" is denied"].join("")}else{return["The access to image viewer "+d+" is denied"].join("")}}},getCameraNotFoundCode:function(){return EnumDCS_ErrorCode.CameraNotFound},getCameraNotFoundString:function(){return"There is no camera found on the machine."},getStateNotCorrectCode:function(){return EnumDCS_ErrorCode.StateNotCorrect},getStateNotCorrectString:function(){return"The camera capability [capability] can not be set because it is automatically adjusted."},getCameraOccupiedCode:function(){return EnumDCS_ErrorCode.CameraOccupied},getCameraOccupiedString:function(){return"The camera you are trying to access is currently occupied by another Dynamsoft Camera process"},getOperationNotSupportedCode:function(){return EnumDCS_ErrorCode.OperationNotSupported},getOperationNotSupportedString:function(c){return c?c=="Image"?"This operation is only supported under document mode.":c=="Document"?"This operation is only supported under image mode.":c=="HTML5"?"Your browser doesn't support HTML5, please use a modern browser like Chrome, Firefox, etc.":"Dynamsoft Camera JS library cannot be used in current Internet options settings.":"Dynamsoft Camera JS library cannot be used in current Internet options settings."},getCameraNotAuthorizedCode:function(){return EnumDCS_ErrorCode.CameraNotAuthorized},getCameraNotAuthorizedString:function(){return"You have disallowed access to the local cameras out of security concerns."},getMultipageNotSupportedCode:function(){return EnumDCS_ErrorCode.MultipageNotSupported},getMultipageNotSupportedString:function(){return"The formats BMP, JPEG, PNG only allow one page per file."},getAsyncTaskNotCompletedCode:function(){return EnumDCS_ErrorCode.AsyncTaskNotCompleted},getAsyncTaskNotCompletedString:function(c){return["The asynchronous task ",c," is not completed yet."].join("")},getHttpErrorCode:function(){return EnumDCS_ErrorCode.HttpError},getHttpErrorString:function(c){return["The server returned the error code ",c,"."].join("")},getLicenseVerificationFailedCode:function(){return EnumDCS_ErrorCode.LicenseVerificationFailed},getLicenseVerificationFailedString:function(){return""},getOperationOutOfMemoryCode:function(){return EnumDCS_ErrorCode.OperationOutOfMemory},getOperationOutOfMemoryString:function(c){return["There is not enough memory for the operation ",c,"."].join("")},getObjectExistsCode:function(){return EnumDCS_ErrorCode.ObjectExists},getObjectExistsString:function(c){return["The object ",c," already exists."].join("")},getConnectionToServiceResetCode:function(){return EnumDCS_ErrorCode.ConnectionToServiceReset},getConnectionToServiceResetString:function(){return"The connection to the local service (Dynamsoft Service) has been reset."},getDataFormatInvalidCode:function(){return EnumDCS_ErrorCode.DataFormatInvalid},getDataFormatInvalidString:function(c){return c?"The format of the image you are trying to download is invalid.":"The format of the image loaded from system clipboard must be DIB (Windows OS) or NSImage (MAC OS)."},getJPEGCompressionErrorCode:function(){return EnumDCS_ErrorCode.JPEGCompressionError},getJPEGCompressionErrorString:function(){return"Only 24-bit true color bmp and 8-bit gray-scaled image are supported for JPEG compression."},getOperationCancelledCode:function(){return EnumDCS_ErrorCode.OperationCancelled},getOperationCancelledString:function(c){return c?"The document cannot be edited when another document is being edited in the document editor.":"User cancelled the operation."},getSessionNotFoundCode:function(){return EnumDCS_ErrorCode.SessionNotFound},getSessionNotFoundString:function(){return"The specified session is not found."},getCameraDisconnectedCode:function(){return EnumDCS_ErrorCode.CameraDisconnected},getCameraDisconnectedString:function(){return"The camera is disconnected, please check."},getConversionFailedCode:function(){return EnumDCS_ErrorCode.ConversionFailed},getConversionFailedString:function(){return"The conversion to base64 string failed."},getUnknownCode:function(){return EnumDCS_ErrorCode.Unknown},getUnknownString:function(c,d){return["(",c,")",d].join("")},getDownloadDcsModuleFailedCode:function(){return EnumDCS_ErrorCode.DownloadDcsModuleFailed},getDownloadDcsModuleFailedString:function(){return"Failed to download the DCS module. Please check the network connection and try again later."},getSendDcsModuleFailedCode:function(){return EnumDCS_ErrorCode.SendDcsModuleFailed},getSendDcsModuleFailedString:function(){return"Failed to send the DCS module to Dynamsoft Service. Please check the network connection and try again later."},getConnectDcsModuleFailedCode:function(){return EnumDCS_ErrorCode.ConnectDcsModuleFailed},getConnectDcsModuleFailedString:function(){return"Failed to connect to the DCS module. Please check the network connection and try again later."},getDocumentNotExistCode:function(){return EnumDCS_ErrorCode.DocumentNotExist},getDocumentNotExistString:function(){return"There is no document in the document editor."},getDocumentUndetectedCode:function(){return EnumDCS_ErrorCode.DocumentUndetected},getDocumentUndetectedString:function(){return"There is no document detected."},getDCSModuleNotExistCode:function(){return EnumDCS_ErrorCode.DCSModuleNotExist},getDCSModuleNotExistString:function(){return"The DCS module is not installed and it is also missing on the server, please contact the site administrator."},getDCSModuleDownloadFailureCode:function(){return EnumDCS_ErrorCode.DCSModuleDownloadFailure},getDCSModuleDownloadFailureString:function(){return"The module for DCS has failed to download."}};a.errorInfo=a.errorInfo||{};a.mix(a.errorInfo,b)})(dynamsoft.lib);(function(c){c.lib.sdk=c.lib.sdk||{};var g=c.lib,e=g.sdk,b=g.detect,f=c.dcsEnv,d=c.navInfo;function a(h,j,l,i){var k=this;k._dwsObjectId=l;k._errorCode=0;k._errorString="";k.camera=new e.Camera(k);k.videoviewer=new e.VideoViewer(k,h);f._videoViewerDic[h]={dwsObject:k,videoViewer:k.videoviewer};k._imageViewerManager=new g.sdk.ImageViewerManager(k);k._imageViewerManager.addImageViewer(j,i);k._documentEditorManager=new g.sdk.DocumentEditorManager(k);k._bDestoryed=false}a.prototype._validateParamNum=function(i,h){if(i.length!=h){this._setErrCodeErrString(g.errorInfo.getParameterNumberUnmatchedCode(),g.errorInfo.getParameterNumberUnmatchedString(i.length<h));return false}this._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString());return true};g.each(["Number","Boolean","String","Array"],function(h){a.prototype["_validate"+h+"Type"]=function(i,j){if(!g["is"+h](j)){this._setErrCodeErrString(g.errorInfo.getTypeNotValidCode(),g.errorInfo.getTypeNotValidString(i));return false}if(h=="Number"&&g.isNaN(j)){this._setErrCodeErrString(g.errorInfo.getTypeNotValidCode(),g.errorInfo.getTypeNotValidString(i));return false}this._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString());return true}});a.prototype._validateValue=function(l,m,j,k){var n=this;if(k&&j.length==2){if(m>Math.max(j[0],j[1])||m<Math.min(j[0],j[1])){n._setErrCodeErrString(g.errorInfo.getValueOutOfRangeCode(),g.errorInfo.getValueOutOfRangeString(l));return false}n._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString());return true}if(!k){for(var h=0;h<j.length;h++){if(m==j[h]){n._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString());return true}}n._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString(l));return false}};a.prototype._validateElExist=function(i,h){var j;try{j=!!(g.one("#"+i).getEL())}catch(k){j=false}if(j){if(!h){this._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString())}}else{this._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString(i))}return j};a.prototype._validateDivDom=function(i,k,h){if(!this._validateElExist(i,h)){return false}var j=g.one("#"+i).getEL();if(j.nodeName.toUpperCase()!="DIV"){this._setErrCodeErrString(g.errorInfo.getContainerTypeNotValidCode(),g.errorInfo.getContainerTypeNotValidString(k));return false}else{if(!h){this._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString())}return true}};a.prototype._validateImgViewerExist=function(k,h){var j=f._imageViewerDic[k],i=j&&j.dwsObject===this;if(i&&!h){this._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString())}else{this._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString("image viewer"))}return i&&!h};a.prototype._validateDocEditorExist=function(i,h){var k=f._documentEditorDic[i],j=k&&k.dwsObject===this;if(j&&!h){this._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString())}else{this._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString("document editor"))}return j&&!h};a.prototype._setErrCodeErrString=function(i,h){this._errorCode=i;this._errorString=h};a.prototype.getErrorCode=function(){if(this._bDestoryed){return false}return this._errorCode};a.prototype.getErrorString=function(){if(this._bDestoryed){return false}return this._errorString};a.prototype.getImageViewer=function(h){var k=this,j=null;if(k._bDestoryed){return false}if(!k._validateParamNum(arguments,1)||!k._validateStringType("imageContainerId",h)){return j}if(!k._validateDivDom(h,!0)){return j}var i=f._imageViewerDic[h];if(!i){k._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString("image viewer"));return j}if(!k._validateDivDom(h,!0)){delete f._imageViewerDic[h];return j}if(i.dwsObject!==k){k._setErrCodeErrString(g.errorInfo.getAccessDeniedCode(),g.errorInfo.getAccessDeniedString(h));return j}j=i.imageViewer;return j};a.prototype.getAllImageViewers=function(){var l=this,k=[],j;if(l._bDestoryed){return false}if(!l._validateParamNum(arguments,0)){return null}for(var h in f._imageViewerDic){j=f._imageViewerDic[h];if(j.dwsObject!==l){continue}k.push(j.imageViewer)}k.sort(function(m,i){return m._innerIndex-i._innerIndex});k.at=function(i){return this[i]};return k};a.prototype.addImageViewer=function(k){var m=this;if(m._bDestoryed){return false}if(!m._validateParamNum(arguments,1)||!m._validateStringType("imageContainerId",k)){return null}if(!m._validateDivDom(k,!0)){return null}var j=f._imageViewerDic[k];var i=f._documentEditorDic[k];var h=f._videoViewerDic[k];if(j){if(j.dwsObject===m){m._setErrCodeErrString(g.errorInfo.getObjectExistsCode(),g.errorInfo.getObjectExistsString(k))}else{m._setErrCodeErrString(g.errorInfo.getObjectOccupiedCode(),g.errorInfo.getObjectOccupiedString(k))}return null}if(i||h){m._setErrCodeErrString(g.errorInfo.getObjectOccupiedCode(),g.errorInfo.getObjectOccupiedString(k));return null}var l=m._imageViewerManager.addImageViewer(k);return l?(f._imageViewerDic[k]).imageViewer:null};a.prototype.removeImageViewer=function(i){var k=this,h=false;if(k._bDestoryed){return h}if(!k._validateParamNum(arguments,1)||!k._validateStringType("imageContainerId",i)){return h}if(!k._validateDivDom(i,!0)){return h}var j=f._imageViewerDic[i];if(!j){k._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString("image viewer"));return h}if(j.dwsObject!==k){k._setErrCodeErrString(g.errorInfo.getAccessDeniedCode(),g.errorInfo.getAccessDeniedString(i));return h}if(j.imageViewer.io._validateImgIsHandlingAsyncOperation()){return h}h=k._imageViewerManager.removeImageViewer(i);return h};a.prototype.getDocumentEditor=function(h){var k=this,i=null;if(k._bDestoryed){return false}if(!k._validateParamNum(arguments,1)||!k._validateStringType("documentEditorContainerId",h)){return i}if(!k._validateDivDom(h,"document")){return i}var j=f._documentEditorDic[h];if(!j){k._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString("document editor"));return i}if(!k._validateDivDom(h,!0)){delete f._documentEditorDic[h];return i}if(j.dwsObject!==k){k._setErrCodeErrString(g.errorInfo.getAccessDeniedCode(),g.errorInfo.getAccessDeniedString(h,"Document"));return i}i=j.documentEditor;return i};a.prototype.getAllDocumentEditors=function(){var l=this,k=[],j,h;if(l._bDestoryed){return false}if(!l._validateParamNum(arguments,0)){return null}for(h in f._documentEditorDic){j=f._documentEditorDic[h];if(j.dwsObject!==l){continue}k.push(j.documentEditor)}k.sort(function(m,i){return m._innerIndex-i._innerIndex});k.at=function(i){return this[i]};return k};a.prototype.addDocumentEditor=function(j){var m=this;if(m._bDestoryed){return false}if(!m._validateParamNum(arguments,1)||!m._validateStringType("documentEditorContainerId",j)){return null}if(!m._validateDivDom(j,"document")){return null}var i=f._documentEditorDic[j];var l=f._imageViewerDic[j];var h=f._videoViewerDic[j];if(i){if(i.dwsObject===m){m._setErrCodeErrString(g.errorInfo.getObjectExistsCode(),g.errorInfo.getObjectExistsString(j))}else{m._setErrCodeErrString(g.errorInfo.getObjectOccupiedCode(),g.errorInfo.getObjectOccupiedString(j))}return null}if(l||h){m._setErrCodeErrString(g.errorInfo.getObjectOccupiedCode(),g.errorInfo.getObjectOccupiedString(j));return null}if(d.bEdge){if(!window.applicationCache){m._setErrCodeErrString(g.errorInfo.getOperationNotSupportedCode(),g.errorInfo.getOperationNotSupportedString("HTML5"))}}else{if(!d.bHTML5Edition){m._setErrCodeErrString(g.errorInfo.getOperationNotSupportedCode(),g.errorInfo.getOperationNotSupportedString("HTML5"))}}var k=m._documentEditorManager.addDocumentEditor(j);return k?(f._documentEditorDic[j]).documentEditor:null};a.prototype.removeDocumentEditor=function(i){var k=this,h=false;if(k._bDestoryed){return h}if(!k._validateParamNum(arguments,1)||!k._validateStringType("documentEditorContainerId",i)){return h}if(!k._validateDivDom(i,"document")){return h}var j=f._documentEditorDic[i];if(!j){k._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString("document editor"));return h}if(j.dwsObject!==k){k._setErrCodeErrString(g.errorInfo.getAccessDeniedCode(),g.errorInfo.getAccessDeniedString(i,"Document"));return h}h=k._documentEditorManager.removeDocumentEditor(i);return h};a.prototype.destroy=function(){var n=this,l;if(n._bDestoryed){return false}var h=!1;if(!n._validateParamNum(arguments,0)){return h}var j,m,r,o,p;for(l in f._imageViewerDic){m=f._imageViewerDic[l];if(!m||m.dwsObject!==n||!(m.imageViewer)){continue}r=m.imageViewer;if(r.io._isHandlingAsyncOperation()){n._setErrCodeErrString(g.errorInfo.getAsyncTaskNotCompletedCode(),g.errorInfo.getAsyncTaskNotCompletedString(r.io._isHandlingAsyncDownloadOperation()?"httpDownloadAsync":"httpUploadAsync"));return h}}var k={session:g.detect.sessionId,object:n._dwsObjectId,method:"Destroy"},q=function(i){if(g.detect.isValidResponseValue(i)){if(i.exception==0){h=!0}else{n._setErrCodeErrString(i.exception,i.description);h=!1}}},s=function(){g.detect.throwServiceNotConnectException(n);h=!1};g.detect.sendCommand("POST",g.stringify(k),null,q,s,"json",!1);if(h){g.detect.sendRemoveObjectCommand(n._dwsObjectId);for(l in f._videoViewerDic){j=f._videoViewerDic[l];if(!j||j.dwsObject!==n){continue}n.camera._destory();n.videoviewer._destory();delete f._videoViewerDic[l];break}for(l in f._imageViewerDic){m=f._imageViewerDic[l];if(!m||m.dwsObject!==n||!(m.imageViewer)){continue}r=m.imageViewer;r.ui._destory();r.image._destory();r.io._destory();delete f._imageViewerDic[l]}for(l in f._documentEditorDic){o=f._documentEditorDic[l];if(!o||o.dwsObject!==n||!(o.documentEditor)){continue}p=o.documentEditor;p.ui._destory();p.document._destory();delete f._documentEditorDic[l]}n._bDestoryed=true}return h};e.DcsObject=a})(dynamsoft);(function(c){var f=c.lib,d=f.sdk,b=f.detect,e=c.dcsEnv;function a(g){var h=this;h._dwsObject=g;h._bDestoryed=false;f.sdk.ktCamera.apply(h)}a.prototype.playVideo=function(){var j=this;if(j._bDestoryed){return false}var h=!1;if(!j._dwsObject._validateParamNum(arguments,0)){return h}if(!j._dwsObject._validateDivDom(j._dwsObject.videoviewer._getVideoViewerId(),!1)){return h}var i={session:dynamsoft.lib.detect.sessionId,object:j._dwsObject._dwsObjectId,method:"PlayVideo",parameter:[e._getProductKey()]},g=function(){var k=j._dwsObject.getErrorCode(),l=j._dwsObject.getErrorString();j._dwsObject.videoviewer._showStream();j._dwsObject._setErrCodeErrString(k,l);j._dwsObject.videoviewer._documentDetected=true};h=f.detect.postSyncCommand(j._dwsObject,f.stringify(i),g,null);return h};a.prototype.captureImage=function(m){var n=this,h=!1;if(n._bDestoryed){return h}if(n._dwsObject.videoviewer._mode=="Document"){n._dwsObject._setErrCodeErrString(f.errorInfo.getOperationNotSupportedCode(),f.errorInfo.getOperationNotSupportedString("Document"));return h}if(!n._dwsObject._validateParamNum(arguments,1)||!n._dwsObject._validateStringType("imageViewer",m)){return h}if(!n._dwsObject._validateDivDom(n._dwsObject.videoviewer._getVideoViewerId(),!1)){return h}var k;try{k=f.one("#"+m).getEL()}catch(j){k=false}if(!k){n._dwsObject._setErrCodeErrString(f.errorInfo.getObjectNotExistCode(),f.errorInfo.getObjectNotExistString(m));return h}if(k.nodeName.toUpperCase()!="DIV"){n._dwsObject._setErrCodeErrString(f.errorInfo.getContainerTypeNotValidCode(),f.errorInfo.getContainerTypeNotValidString(true));return h}if(!e._imageViewerDic[m]){n._dwsObject._setErrCodeErrString(f.errorInfo.getObjectNotExistCode(),f.errorInfo.getObjectNotExistString("imageViewer"));return h}if(e._imageViewerDic[m].dwsObject!==n._dwsObject){n._dwsObject._setErrCodeErrString(f.errorInfo.getObjectOccupiedCode(),f.errorInfo.getObjectOccupiedString(m));return h}var l=e._imageViewerDic[m].imageViewer;if(l.image.getCount()==l.image.getCapacity()){n._dwsObject._setErrCodeErrString(f.errorInfo.getBufferIsFullCode(),f.errorInfo.getBufferIsFullString());return h}if(l.io._validateImgIsHandlingAsyncOperation()){return h}var i={session:dynamsoft.lib.detect.sessionId,object:n._dwsObject._dwsObjectId,method:"CaptureImage",parameter:[e._getProductKey(),l._imgViewerId]},g=function(){var o=n._dwsObject.getErrorCode(),p=n._dwsObject.getErrorString();l.ui._addImageControl();n._dwsObject._setErrCodeErrString(o,p)};h=f.detect.postSyncCommand(n._dwsObject,f.stringify(i),g,null);return h};a.prototype.captureDocument=function(l,g){var m=this,h=!1;if(m._bDestoryed){return h}if(m._dwsObject.videoviewer._mode=="Image"){m._dwsObject._setErrCodeErrString(f.errorInfo.getOperationNotSupportedCode(),f.errorInfo.getOperationNotSupportedString("Image"));return h}if(arguments.length<1||!m._dwsObject._validateStringType("imageViewer",l)){return h}if(!m._dwsObject._validateDivDom(m._dwsObject.videoviewer._getVideoViewerId(),!1)){return h}var i;try{i=f.one("#"+l).getEL()}catch(o){i=false}if(!i){m._dwsObject._setErrCodeErrString(f.errorInfo.getObjectNotExistCode(),f.errorInfo.getObjectNotExistString(l));return h}if(i.nodeName.toUpperCase()!="DIV"){m._dwsObject._setErrCodeErrString(f.errorInfo.getContainerTypeNotValidCode(),f.errorInfo.getContainerTypeNotValidString(true));return h}if(!e._imageViewerDic[l]){m._dwsObject._setErrCodeErrString(f.errorInfo.getObjectNotExistCode(),f.errorInfo.getObjectNotExistString("imageViewer"));return h}if(e._imageViewerDic[l].dwsObject!==m._dwsObject){m._dwsObject._setErrCodeErrString(f.errorInfo.getObjectOccupiedCode(),f.errorInfo.getObjectOccupiedString(l));return h}var j=e._imageViewerDic[l].imageViewer;if(j.image.getCount()==j.image.getCapacity()){m._dwsObject._setErrCodeErrString(f.errorInfo.getBufferIsFullCode(),f.errorInfo.getBufferIsFullString());return h}if(j.io._validateImgIsHandlingAsyncOperation()){return h}var k={session:dynamsoft.lib.detect.sessionId,object:m._dwsObject._dwsObjectId,method:"CaptureDocument",parameter:[e._getProductKey(),j._imgViewerId,m._dwsObject.videoviewer._bAllow,g]},n=function(){var p=m._dwsObject.getErrorCode(),q=m._dwsObject.getErrorString();j.ui._addImageControl();m._dwsObject._setErrCodeErrString(p,q)};h=f.detect.postSyncCommand(m._dwsObject,f.stringify(k),n,null);return h};a.prototype.takeCameraOwnership=function(h){var k=this,i=!1;if(k._bDestoryed){return i}if(!k._dwsObject._validateParamNum(arguments,1)||!k._dwsObject._validateStringType("cameraName",h)){return i}if(h.length===0||h.length>64){k._dwsObject._setErrCodeErrString(f.errorInfo.getValueNotValidCode(),f.errorInfo.getValueNotValidString("cameraName"));return i}var j={session:dynamsoft.lib.detect.sessionId,object:k._dwsObject._dwsObjectId,method:"TakeCameraOwnership",parameter:[h]},g=function(l){k._dwsObject._setErrCodeErrString(f.errorInfo.getOkCode(),f.errorInfo.getOkString());if(!l.result[1]){k._dwsObject.videoviewer._StopStream()}};i=f.detect.postSyncCommand(k._dwsObject,f.stringify(j),g,null);return i};a.prototype._destory=function(){this._bDestoryed=true};f.sdk.Camera=a})(dynamsoft);(function(a){var e=a.lib,c=e.sdk,d=a.dcsEnv;c.Camera._CameraProp=function(g,f){this.parent=g;this._camera=g;this._dwsObject=g._dwsObject;this.strProp=f};c.Camera._CameraProp.prototype.getCurrent=function(){if(!this.parent._check()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this.parent._communicateWithService("GetCurrent",[this.strProp]);if(!f){return null}return f.result[0]};c.Camera._CameraProp.prototype.setCurrent=function(g){if(!this.parent._check()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}if((typeof g!="number")){this._dwsObject._setErrCodeErrString(e.errorInfo.getTypeNotValidCode(),e.errorInfo.getTypeNotValidString("iValue"));return false}if(g<-2147483648||g>2147483647){this._dwsObject._setErrCodeErrString(e.errorInfo.getValueOutOfRangeCode(),e.errorInfo.getValueOutOfRangeString("iValue"));return false}var f=this.parent._communicateWithService("SetCurrent",[this.strProp,g]);if(!f){if(this._dwsObject.getErrorCode()==-1003){this._dwsObject._setErrCodeErrString(-1003,e.errorInfo.getValueOutOfRangeString("iValue"))}return false}return f.result[0]};c.Camera._CameraResolution=dynamsoft.lib.extend(dynamsoft.lib.sdk.Camera._CameraProp);c.Camera._CameraResolution.prototype.getCurrent=function(){if(!this.parent._check()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this.parent._communicateWithService("GetResolutionCurrent");if(!f){return null}return new c.Camera.prototype.Resolution(f.result[0],f.result[1])};c.Camera._CameraResolution.prototype.setCurrent=function(g){if(!this.parent._check()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}if((typeof g.width!="number")||(typeof g.width!="number")){this._dwsObject._setErrCodeErrString(e.errorInfo.getTypeNotValidCode(),e.errorInfo.getTypeNotValidString("resolution"));return false}if(g.width<0||g.width>2147483647||g.height<0||g.height>2147483647){this._dwsObject._setErrCodeErrString(e.errorInfo.getValueOutOfRangeCode(),e.errorInfo.getValueOutOfRangeString("resolution"));return false}var f=this.parent._communicateWithService("SetResolutionCurrent",[g.width,g.height]);if(!f){if(this._dwsObject.getErrorCode()==-1003){this._dwsObject._setErrCodeErrString(-1003,e.errorInfo.getValueOutOfRangeString("resolution"))}else{if(this._dwsObject.getErrorCode()==-1002){this._dwsObject._setErrCodeErrString(-1002,e.errorInfo.getTypeNotValidString("resolution"))}else{if(this._dwsObject.getErrorCode()==-1008){this._dwsObject._setErrCodeErrString(-1008,e.errorInfo.getValueNotValidString("resolution"))}}}return false}this._dwsObject.videoviewer._setObjImgSize(g.width,g.height);return f.result[0]};var b=function(g,f){return g.width-f.width};c.Camera._CameraResolution.prototype.getAllowedValues=function(){if(!this.parent._check()){return[]}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return[]}var h=this.parent._communicateWithService("GetResolutionAllowedValues");if(!h){return[]}var g=[];for(var f=0;f<h.result.length/2;++f){g[f]=new c.Camera.prototype.Resolution(h.result[2*f],h.result[2*f+1])}g=g.sort(b);g.at=function(i){return this[i]};return g};c.Camera._CameraUnautoProp=dynamsoft.lib.extend(dynamsoft.lib.sdk.Camera._CameraProp);c.Camera._CameraUnautoProp.prototype.getDefault=function(){if(!this.parent._check()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this.parent._communicateWithService("GetDefault",[this.strProp]);if(!f){return null}return f.result[0]};c.Camera._CameraUnautoProp.prototype.getMin=function(){if(!this.parent._check()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this.parent._communicateWithService("GetMin",[this.strProp]);if(!f){return null}return f.result[0]};c.Camera._CameraUnautoProp.prototype.getMax=function(){if(!this.parent._check()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this.parent._communicateWithService("GetMax",[this.strProp]);if(!f){return null}return f.result[0]};c.Camera._CameraAutoProp=dynamsoft.lib.extend(dynamsoft.lib.sdk.Camera._CameraUnautoProp);c.Camera._CameraAutoProp.prototype.getIfAuto=function(){if(!this.parent._check()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this.parent._communicateWithService("GetIfAuto",[this.strProp]);if(!f){return null}return f.result[0]};c.Camera._CameraAutoProp.prototype.setIfAuto=function(g){if(!this.parent._check()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}if(typeof g!=="boolean"){this._dwsObject._setErrCodeErrString(e.errorInfo.getTypeNotValidCode(),e.errorInfo.getTypeNotValidString("auto"));return false}var f=this.parent._communicateWithService("SetIfAuto",[this.strProp,g]);if(!f){return false}return f.result[0]};c.Camera._CameraAutoProp.prototype.getIfDefaultAuto=function(){if(!this.parent._check()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this.parent._communicateWithService("GetIfDefaultAuto",[this.strProp]);if(!f){return null}return f.result[0]};c.ktCamera=function(){this.resolution=new dynamsoft.lib.sdk.Camera._CameraResolution(this,"resolution");this.exposure=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"exposureTime");this.iris=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"iris");this.focus=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"focus");this.zoom=new dynamsoft.lib.sdk.Camera._CameraUnautoProp(this,"zoom");this.pan=new dynamsoft.lib.sdk.Camera._CameraUnautoProp(this,"pan");this.tilt=new dynamsoft.lib.sdk.Camera._CameraUnautoProp(this,"tilt");this.roll=new dynamsoft.lib.sdk.Camera._CameraUnautoProp(this,"roll");this.backlightCompensation=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"backlightCompensation");this.brightness=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"brightness");this.gain=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"gain");this.saturation=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"saturation");this.sharpness=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"sharpness");this.gamma=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"gamma");this.whiteBalanceTemperature=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"whiteBalanceTemperature");this.contrast=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"contrast");this.hue=new dynamsoft.lib.sdk.Camera._CameraAutoProp(this,"hue")};c.Camera.prototype.Resolution=function(g,f){this.width=g;this.height=f};c.Camera.prototype._checkBeforeSelect=function(){this._dwsObject._setErrCodeErrString(e.errorInfo.getOkCode(),e.errorInfo.getOkString());return true};c.Camera.prototype._check=function(){if(!this._checkBeforeSelect()){return false}if(!e.one("#"+this._dwsObject.videoviewer._videoContainerId)||!e.one("#"+this._dwsObject.videoviewer._videoContainerId).getEL()){this._dwsObject._setErrCodeErrString(e.errorInfo.getObjectNotExistCode(),e.errorInfo.getObjectNotExistString("video viewer"));return false}return true};c.Camera.prototype._communicateWithService=function(k,j){var f={session:e.detect.sessionId,object:this._dwsObject._dwsObjectId,method:k,parameter:j?j:[]};var h=e.stringify(f);var g;var i=this;e.ajax({method:"POST",data:h,url:[e.detect.preUrl,e.detect.portInfo.curPort,"/",d._getVersionStrForCommand(),"/ts=",e.now()].join(""),onSuccess:function(l){g=l},onError:function(l){dynamsoft.lib.detect.throwServiceNotConnectException(i._dwsObject)},dataType:"json",async:false});if(!g){return null}if(g.exception!=0){switch(g.exception){case EnumDCS_ErrorCode.CameraOccupied:case EnumDCS_ErrorCode.ConnectionToServiceReset:if(e.isString(g.description)){g.description=g.description.replace("Webcam","Camera")}break;case -1002:g.exception=e.errorInfo.getTypeNotValidCode();g.description=e.errorInfo.getTypeNotValidString("iValue");break;case -1008:g.exception=e.errorInfo.getValueNotValidCode();g.description=e.errorInfo.getValueNotValidString("iValue");break;default:if(e.errorInfo.isUnknownCode(g.exception)){g.description=e.errorInfo.getUnknownString(g.exception,g.description);g.exception=EnumDCS_ErrorCode.Unknown}break}this._dwsObject._setErrCodeErrString(g.exception,g.description);return null}return g};c.Camera.prototype.getCameraList=function(){if(!this._checkBeforeSelect()){return null}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return null}var f=this._communicateWithService("GetCameraList");if(!f){return null}return f.result?f.result:[]};c.Camera.prototype.selectCamera=function(h){if(!this._checkBeforeSelect()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}if(typeof h!=="string"){this._dwsObject._setErrCodeErrString(e.errorInfo.getTypeNotValidCode(),e.errorInfo.getTypeNotValidString("CameraName"));return false}var g=this._communicateWithService("SelectCamera",[h]);if(!g){if(this._dwsObject.getErrorCode()==-1008){this._dwsObject._setErrCodeErrString(-1008,e.errorInfo.getValueNotValidString("CameraName"))}return false}var f=g.result[0];if(f&&!g.result[1]){this._dwsObject.videoviewer._StopStream()}return f};c.Camera.prototype.closeCamera=function(){if(!this._check()){return false}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return false}var g=this._communicateWithService("CloseCamera");if(!g){return false}var f=g.result[0];if(f){this._dwsObject.videoviewer._StopStream()}return f};c.Camera.prototype.stopVideo=function(){if(!this._check()){return false}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return false}var g=this._communicateWithService("StopVideo");if(!g){return false}var f=g.result[0];if(f){this._dwsObject.videoviewer._StopStream()}return f};c.Camera.prototype.pauseVideo=function(){if(!this._check()){return false}if(arguments.length!=0){this._dwsObject._setErrCodeErrString(e.errorInfo.getParameterNumberUnmatchedCode(),e.errorInfo.getParameterNumberUnmatchedString(arguments.length<0));return false}var g=this._communicateWithService("PauseVideo");if(!g){return false}var f=g.result[0];if(f){this._dwsObject.videoviewer._pauseStream()}this._dwsObject.videoviewer._documentDetected=false;this._dwsObject.videoviewer._objImage.src=this._dwsObject.videoviewer._getFrameUrl(true);return f}})(dynamsoft);(function(c){var h=c.lib,b=h.detect,g=c.dcsEnv,e=c.navInfo;var f=g.FPSINTERVAL?1000/g.FPSINTERVAL:20;var a=null;d.prototype.setFPS=function(j){if(isNaN(j)){this._dwsObject._setErrCodeErrString(EnumDCS_ErrorCode.TypeNotValid,h.errorInfo.getTypeNotValidString("fps"));return false}else{if(j<=0){this._dwsObject._setErrCodeErrString(EnumDCS_ErrorCode.ValueNotValid,h.errorInfo.getValueNotValidString("fps"));return false}else{f=parseFloat(j);if(a){try{clearTimeout(a)}catch(i){}this._getFrame()}this._dwsObject._setErrCodeErrString(EnumDCS_ErrorCode.OK,h.errorInfo.getOkString());return true}}};d.prototype.getFPS=function(){this._dwsObject._setErrCodeErrString(EnumDCS_ErrorCode.OK,h.errorInfo.getOkString());return f};function d(j,i){var l=this;l._dwsObject=j;l._videoContainerId=i;l._userVideoContainer=h.one("#"+i).getEL();h.empty(l._userVideoContainer);var k=h.getElDimensions(l._userVideoContainer,false);l._userVideoContainerWidth=k?k.clientWidth:l._userVideoContainer.clientWidth;l._userVideoContainerHeight=k?k.clientHeight:l._userVideoContainer.clientHeight;l._userVideoContainer.innerHTML='<div class="ds-dws-video-viewer-wrapper" oncontextmenu="return false;"></div>';l._videoContainerWrapper=h.one(".ds-dws-video-viewer-wrapper",l._userVideoContainer).getEL();l._videoContainerWrapper.style.width=l._userVideoContainerWidth+"px";l._videoContainerWrapper.style.height=l._userVideoContainerHeight+"px";l._initObjImg();l._objImgWidth=NaN;l._objImgHeight=NaN;l._bStreamStopped=false;l._bStreamPaused=false;l._bDestoryed=false;l._MAXLOADINGIMGCOUNT=4;l._curLoadingImgCount=0;l.EnumMode={Image:0,Document:1};l._mode="Image";l.pollDocument=null;l._documentDetected=false;l._MINCOLOR=0;l._MAXCOLOR=4294967295;l._documentBoundaryColor=1589110015;l._bAllow=false;l._documentBoundaryThickness=2;l._bIe9_10=e.bIE&&(parseInt(e.strBrowserVersion)===9||parseInt(e.strBrowserVersion)===10);h.sdk.ktVideoViewer.apply(l)}d.prototype.ondocumentboundarydetected=null;d.prototype.setMode=function(j){var k=this;if(k._dwsObject._bDestoryed){return false}if(k._bDestoryed){k._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!h.one("#"+k._videoContainerId)||!h.one("#"+k._videoContainerId).getEL()){k._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!k._dwsObject._validateParamNum(arguments,1)||!k._dwsObject._validateNumberType("mode",j)){return false}if(j!=0&&j!==1){k._dwsObject._setErrCodeErrString(h.errorInfo.getValueNotValidCode(),h.errorInfo.getValueNotValidString(j));return false}for(var i in k.EnumMode){if(j==k.EnumMode[i]){k._mode=i}}if(k._mode=="Document"){k._documentDetected=true}return true};d.prototype.getMode=function(){var i=this;if(i._dwsObject._bDestoryed){return null}if(i._bDestoryed){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!h.one("#"+i._videoContainerId)||!h.one("#"+i._videoContainerId).getEL()){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!i._dwsObject._validateParamNum(arguments,0)){return null}return i._mode};d.prototype.setAllowCaptureUndetectedDocument=function(i){var j=this;if(j._dwsObject._bDestoryed){return false}if(j._bDestoryed){j._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!h.one("#"+j._videoContainerId)||!h.one("#"+j._videoContainerId).getEL()){j._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!j._dwsObject._validateParamNum(arguments,1)||!j._dwsObject._validateBooleanType("bAllow",i)){return false}if(i==true||i==false){j._bAllow=i}else{j._dwsObject._setErrCodeErrString(h.errorInfo.getValueNotValidCode(),h.errorInfo.getValueNotValidString(i))}return true};d.prototype.getAllowCaptureUndetectedDocument=function(){var i=this;if(i._dwsObject._bDestoryed){return null}if(i._bDestoryed){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!h.one("#"+i._videoContainerId)||!h.one("#"+i._videoContainerId).getEL()){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!i._dwsObject._validateParamNum(arguments,0)){return null}return this._bAllow};d.prototype.setDocumentBoundaryThickness=function(i){var j=this;if(j._dwsObject._bDestoryed){return false}if(j._bDestoryed){j._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!h.one("#"+j._videoContainerId)||!h.one("#"+j._videoContainerId).getEL()){j._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!j._dwsObject._validateParamNum(arguments,1)||!j._dwsObject._validateNumberType("thickness",i)||!j._dwsObject._validateValue("thickness",i,[0,100000],true)){return false}j._documentBoundaryThickness=Math.round(i);return true};d.prototype.getDocumentBoundaryThickness=function(){var i=this;if(i._dwsObject._bDestoryed){return null}if(i._bDestoryed){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!h.one("#"+i._videoContainerId)||!h.one("#"+i._videoContainerId).getEL()){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!i._dwsObject._validateParamNum(arguments,0)){return null}return i._documentBoundaryThickness};d.prototype.setDocumentBoundaryColor=function(i){var j=this;if(j._dwsObject._bDestoryed){return false}if(j._bDestoryed){j._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!h.one("#"+j._videoContainerId)||!h.one("#"+j._videoContainerId).getEL()){j._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return false}if(!j._dwsObject._validateParamNum(arguments,1)||!j._dwsObject._validateNumberType("color",i)||!j._dwsObject._validateValue("color",i,[j._MINCOLOR,j._MAXCOLOR],true)){return false}j._documentBoundaryColor=i;return true};d.prototype.getDocumentBoundaryColor=function(){var i=this;if(i._dwsObject._bDestoryed){return null}if(i._bDestoryed){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!h.one("#"+i._videoContainerId)||!h.one("#"+i._videoContainerId).getEL()){i._dwsObject._setErrCodeErrString(h.errorInfo.getObjectNotExistCode(),h.errorInfo.getObjectNotExistString("video viewer"));return null}if(!i._dwsObject._validateParamNum(arguments,0)){return null}return i._documentBoundaryColor};d.prototype._initObjImg=function(){var i=this;i._objImage=new Image();i._objImage.className="ds-dws-img-obj";i._makeImgObjUndragable(i._objImage)};d.prototype._getVideoViewerId=function(){return this._videoContainerId};d.prototype._getVideoViewerEl=function(){try{return h.one("#"+this._videoContainerId).getEL()}catch(i){return false}};d.prototype._attachImage=function(){var j=this;if(!j._dwsObject._validateDivDom(j._getVideoViewerId(),!1,!0)){j._clearStreamProp();return}if(j._bStreamPaused){j._objImage.style.display="block"}if(j._bStreamStopped){j._objImage.style.display="none"}if((j._bStreamPaused&&j._objImage.parentNode)||j._bStreamStopped){return}j._objImage.onload="";j._objImage.onerror="";var i=h.now();j._curLoadingImgCount=0;j._objImage.onload=function(){var n=this;j._objImage.onload="";j._objImage.onerror="";j._positionImgObj(isNaN(j._objImgWidth)?(j._bIe9_10&&n.naturalWidth?n.naturalWidth:n.width):j._objImgWidth,isNaN(j._objImgHeight)?(j._bIe9_10&&n.naturalHeight?n.naturalHeight:n.height):j._objImgHeight);if(j._bStreamStopped){j._objImage.style.display="none"}j._curLoadingImgCount=0;var k=h.now();if(!j._bStreamPaused&&!j._bStreamStopped){var m=parseInt(k-i),l=parseInt((1000/f)-m);a=setTimeout(function(){j._getFrame()},(h.isNaN(l)||l<=0)?0:l)}};j._objImage.onerror=function(){var k=this;++j._curLoadingImgCount;h.log("Stream "+k.src+" error.");k.style.display="none";if(j._curLoadingImgCount>=j._MAXLOADINGIMGCOUNT){j._clearStreamProp();b.handleImageLoadingError(j._dwsObject,k.src)}else{k.src=j._getFrameUrl(true)}};j._objImage.src=j._getFrameUrl(true)};d.prototype._repositionImgObj=function(){var i=this;if(i._bStreamPaused&&i._objImage&&i._objImage.width>0&&i._objImage.height>0){i._positionImgObj(i._objImage.width,i._objImage.height)}};d.prototype._positionImgObj=function(k,m,l){var n=this,j=0,i=0;l=l||n._objImage;if(!l){return}if(k/n._userVideoContainerWidth>m/n._userVideoContainerHeight){j=n._userVideoContainerWidth;i=m*n._userVideoContainerWidth/k}else{i=n._userVideoContainerHeight;j=k*n._userVideoContainerHeight/m}if(j<=0||isNaN(j)||i<=0||isNaN(i)){l.style.display="none";return}l.style.position="absolute";l.style.top=(n._userVideoContainerHeight-i)/2+"px";l.style.left=(n._userVideoContainerWidth-j)/2+"px";l.style.width=j+"px";l.style.height=i+"px";l.style.display="block";if(!l.parentNode){n._videoContainerWrapper.appendChild(l)}};d.prototype._showStream=function(){var i=this;i._bStreamStopped=false;i._bStreamPaused=false;if(e.bIE){if(i._objImage&&i._objImage.parentNode){i._objImage.setAttribute("onmousedown","");i._objImage.setAttribute("unselectable","");i._objImage.setAttribute("draggable","");i._objImage.parentNode.removeChild(i._objImage)}i._initObjImg()}if(i._objImage){i._objImage.style.display="none"}i._objImgWidth=NaN;i._objImgHeight=NaN;i._getFrame(true);i._ifDocumentDetected()};d.prototype._ifDocumentDetected=function(){var i=this;i.pollDocument=setInterval(function(){if(i._bStreamStopped||i._bStreamPaused||i._bDestoryed){return false}if(i._dwsObject.getErrorCode()==-1022){return false}if(!h.isFunction(i.ondocumentboundarydetected)){return false}if(!i._documentDetected){return false}var j=i._GetDocBoundaryInfoFromVideo();if(j.length&&j.length==10&&i._mode=="Document"){i.ondocumentboundarydetected()}},500)};d.prototype._GetDocBoundaryInfoFromVideo=function(){var l=this,j;var k={session:b.sessionId,object:l._dwsObject._dwsObjectId,method:"GetDocBoundaryInfo"},i=function(m){j=m.result};h.detect.postSyncCommand(l._dwsObject,h.stringify(k),i,null);return j};d.prototype.setPassDocDetectAtDocMode=function(i){this._passDocDetectAtDocMode=i};d.prototype._getFrameUrl=function(k){var i=this;var j=i._mode;return[b.preUrl,b.portInfo.curPort,"/",g._getVersionStrForCommand(),"/stream?session=",b.sessionId,"&object=",i._dwsObject._dwsObjectId,"&width=",h.isNumber(i._userVideoContainerWidth)?i._userVideoContainerWidth:0,"&height=",h.isNumber(i._userVideoContainerHeight)?i._userVideoContainerHeight:0,"&mode=",((i._mode=="Document"&&!i._passDocDetectAtDocMode)?"document":"image"),"&documentBoundaryThickness=",i._documentBoundaryThickness,"&documentBoundaryColor=",i._documentBoundaryColor,k?("&ts="+h.now()):""].join("")};d.prototype._getFrame=function(){var i=this;setTimeout(function(){i._attachImage()},0)};d.prototype._pauseStream=function(){var i=this;i._bStreamPaused=true;i._bStreamStopped=false;i._objImage.style.display="block"};d.prototype._StopStream=function(){var i=this;i._bStreamPaused=false;i._bStreamStopped=true;if(i._objImage){i._objImage.style.display="none"}};d.prototype._clearStreamProp=function(){var i=this;i._bStreamPaused=false;i._bStreamStopped=false};d.prototype._makeImgObjUndragable=function(i){i.setAttribute("onmousedown","return false;");i.setAttribute("unselectable","on");i.setAttribute("draggable","false")};d.prototype._setObjImgSize=function(j,i){this._objImgWidth=j;this._objImgHeight=i};d.prototype._destory=function(){var i=this;i._clearStreamProp();i._removeUserVideoContainerEvents();h.empty(i._videoContainerWrapper);h.empty(i._userVideoContainer);i._bDestoryed=true};h.sdk.VideoViewer=d})(dynamsoft);(function(b){var f=b.lib,e=b.dcsEnv,d=f.sdk,a=f.detect,c=b.navInfo;d.ktVideoViewer=function(){var g=this;this._origDispaly="";this.onmouseclick=null;this.onmouserightclick=null;this.onmousedoubleclick=null;this.timer=null;this.isOnClickWait=false;this._onLeftclickWraper=function(h){g._onLeftclick.apply(g,[h])};f.addEventListener(this._userVideoContainer,"click",this._onLeftclickWraper);if(!dynamsoft.navInfo.bHTML5Edition){f.addEventListener(this._userVideoContainer,"dblclick",this._onLeftclickWraper)}this._onRightclickWraper=function(h){g._onRightclick.apply(g,[h])};f.addEventListener(this._userVideoContainer,"contextmenu",this._onRightclickWraper)};d.VideoViewer.prototype._onLeftclick=function(g){g=f.switchEvent(g);if(g.which!=1){return}if(!this.isOnClickWait){this.isOnClickWait=true;var h=this;this.timer=setTimeout(function(){h.isOnClickWait=false;if(h.onmouseclick){h.onmouseclick.apply(h._userVideoContainer,[g])}},500)}else{this.isOnClickWait=false;clearTimeout(this.timer);if(this.onmousedoubleclick){this.onmousedoubleclick.apply(this._userVideoContainer,[g])}}};d.VideoViewer.prototype._onRightclick=function(g){g=f.switchEvent(g);if(this.onmouserightclick){this.onmouserightclick.apply(this._userVideoContainer,[g])}};d.VideoViewer.prototype._removeUserVideoContainerEvents=function(){f.removeEventListener(this._userVideoContainer,"click",this._onLeftclickWraper);f.removeEventListener(this._userVideoContainer,"contextmenu",this._onRightclickWraper)};d.VideoViewer.prototype._check=function(){this._dwsObject._setErrCodeErrString(f.errorInfo.getOkCode(),f.errorInfo.getOkString());var g=true;if(!f.one("#"+this._videoContainerId)||!f.one("#"+this._videoContainerId).getEL()){this._dwsObject._setErrCodeErrString(f.errorInfo.getObjectNotExistCode(),f.errorInfo.getObjectNotExistString("video viewer"));g=false}return g};d.VideoViewer.prototype._parseInt=function(g){return Math.round(parseFloat(g))};d.VideoViewer.prototype.getWidth=function(){if(!this._check()){return false}return this._userVideoContainer.style.width?this._parseInt(this._userVideoContainer.style.width):this._userVideoContainer.clientWidth};d.VideoViewer.prototype.setWidth=function(g){if(!this._check()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(f.errorInfo.getParameterNumberUnmatchedCode(),f.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}g=this._parseInt(g);if(!g&&g!=0){this._dwsObject._setErrCodeErrString(f.errorInfo.getTypeNotValidCode(),f.errorInfo.getTypeNotValidString("width"));return false}else{if(g>e._uiMaxSize||g<1){this._dwsObject._setErrCodeErrString(f.errorInfo.getValueOutOfRangeCode(),f.errorInfo.getValueOutOfRangeString("width"));return false}}this._userVideoContainerWidth=g;this._userVideoContainer.style.width=g+"px";this._videoContainerWrapper.style.width=g+"px";this._repositionImgObj();return true};d.VideoViewer.prototype.getHeight=function(){if(!this._check()){return null}return this._userVideoContainer.style.height?this._parseInt(this._userVideoContainer.style.height):this._userVideoContainer.clientHeight};d.VideoViewer.prototype.setHeight=function(g){if(!this._check()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(f.errorInfo.getParameterNumberUnmatchedCode(),f.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}g=this._parseInt(g);if(!g&&g!=0){this._dwsObject._setErrCodeErrString(f.errorInfo.getTypeNotValidCode(),f.errorInfo.getTypeNotValidString("height"));return false}else{if(g>e._uiMaxSize||g<1){this._dwsObject._setErrCodeErrString(f.errorInfo.getValueOutOfRangeCode(),f.errorInfo.getValueOutOfRangeString("height"));return false}}this._userVideoContainerHeight=g;this._userVideoContainer.style.height=g+"px";this._videoContainerWrapper.style.height=g+"px";this._repositionImgObj();return true};d.VideoViewer.prototype.getVideoQuality=function(){if(!this._check()){return null}var g={session:f.detect.sessionId,object:this._dwsObject._dwsObjectId,method:"GetVideoQuality"};var i=f.stringify(g);var h;var j=this;f.ajax({method:"POST",data:i,url:[f.detect.preUrl,f.detect.portInfo.curPort,"/",e._getVersionStrForCommand(),"/ts=",f.now()].join(""),onSuccess:function(k){h=k},onError:function(k){j._dwsObject._setErrCodeErrString(f.errorInfo.getConnectionToServiceLostCode(),f.errorInfo.getConnectionToServiceLostString())},dataType:"json",async:false});if(!h){return false}if(h.exception!=0){this._dwsObject._setErrCodeErrString(h.exception,h.description);return null}return h.result[0]};d.VideoViewer.prototype.setVideoQuality=function(j){if(!this._check()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(f.errorInfo.getParameterNumberUnmatchedCode(),f.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}if((typeof j!="number")){this._dwsObject._setErrCodeErrString(f.errorInfo.getTypeNotValidCode(),f.errorInfo.getTypeNotValidString("quality"));return false}j=this._parseInt(j);if(!j&&j!=0){this._dwsObject._setErrCodeErrString(f.errorInfo.getTypeNotValidCode(),f.errorInfo.getTypeNotValidString("quality"));return false}else{if(j>100||j<1){this._dwsObject._setErrCodeErrString(f.errorInfo.getValueOutOfRangeCode(),f.errorInfo.getValueOutOfRangeString("quality"));return false}}var g={session:f.detect.sessionId,object:this._dwsObject._dwsObjectId,method:"SetVideoQuality",parameter:[j]};var i=f.stringify(g);var h;var k=this;f.ajax({method:"POST",data:i,url:[f.detect.preUrl,f.detect.portInfo.curPort,"/",e._getVersionStrForCommand(),"/ts=",f.now()].join(""),onSuccess:function(l){h=l},onError:function(l){k._dwsObject._setErrCodeErrString(f.errorInfo.getConnectionToServiceLostCode(),f.errorInfo.getConnectionToServiceLostString())},dataType:"json",async:false});if(!h){return false}if(h.exception!=0){this._dwsObject._setErrCodeErrString(h.exception,h.description);return null}return h.result[0]};d.VideoViewer.prototype.getBackgroundColor=function(){if(!this._check()){return null}return f.colorStrToInt(this._userVideoContainer.style.backgroundColor?this._userVideoContainer.style.backgroundColor:f.currentStyle(this._userVideoContainer,"background-color"))};d.VideoViewer.prototype.setBackgroundColor=function(g){if(!this._check()){return false}if(arguments.length!=1){this._dwsObject._setErrCodeErrString(f.errorInfo.getParameterNumberUnmatchedCode(),f.errorInfo.getParameterNumberUnmatchedString(arguments.length<1));return false}if((typeof g!="number")){this._dwsObject._setErrCodeErrString(f.errorInfo.getTypeNotValidCode(),f.errorInfo.getTypeNotValidString("backgroundColor"));return false}g=this._parseInt(g);if(!g&&g!=0){this._dwsObject._setErrCodeErrString(f.errorInfo.getTypeNotValidCode(),f.errorInfo.getTypeNotValidString("backgroundColor"));return false}else{if(g>4294967295||g<0){this._dwsObject._setErrCodeErrString(f.errorInfo.getValueOutOfRangeCode(),f.errorInfo.getValueOutOfRangeString("backgroundColor"));return false}}this._userVideoContainer.style.backgroundColor=f.IntToColorStr(g);return true};d.VideoViewer.prototype.show=function(){if(!this._check()){return false}if(arguments.length>0){this._dwsObject._setErrCodeErrString(f.errorInfo.getParameterNumberUnmatchedCode(),f.errorInfo.getParameterNumberUnmatchedString(false));return false}if(this._userVideoContainer.style.display=="none"){this._userVideoContainer.style.display=this._origDispaly}else{this._origDispaly=this._userVideoContainer.style.display;if(this._origDispaly=="none"){this._origDispaly=""}}return true};d.VideoViewer.prototype.hide=function(){if(!this._check()){return false}if(arguments.length>0){this._dwsObject._setErrCodeErrString(f.errorInfo.getParameterNumberUnmatchedCode(),f.errorInfo.getParameterNumberUnmatchedString(false));return false}this._origDispaly=this._userVideoContainer.style.display;if(this._origDispaly=="none"){this._origDispaly=""}this._userVideoContainer.style.display="none";return true}})(dynamsoft);(function(b){var e=b.lib,c=e.sdk,d=b.dcsEnv;function a(f){if(f&&f._imageViewerManager){return}this._dwsObject=f}a.prototype.addImageViewer=function(g,f){var k=this,h=!0;if(!e.isString(f)||f.indexOf(d._imgViewerClientIdPrefix)==-1){f=d._imgViewerClientIdPrefix+e.getRandom();var i={session:dynamsoft.lib.detect.sessionId,object:k._dwsObject._dwsObjectId,method:"AddImageViewer",parameter:[f]};h=dynamsoft.lib.detect.postSyncCommand(k._dwsObject,e.stringify(i),null,null)}if(h){var j=new c.ImageViewer(k._dwsObject,g,f);d._imageViewerDic[g]={dwsObject:k._dwsObject,imageViewer:j,imgViewerClientId:f};j.ui.setImageViewMode(1,1)}return h};a.prototype.removeImageViewer=function(g){var k=this,f=false,j=d._imageViewerDic[g],i=j.imageViewer,h={session:dynamsoft.lib.detect.sessionId,object:k._dwsObject._dwsObjectId,method:"RemoveImageViewer",parameter:[i._imgViewerId]};f=dynamsoft.lib.detect.postSyncCommand(k._dwsObject,e.stringify(h),null,null);if(f){i.ui._destory(true);i.image._destory(true);i.io._destory(true);delete d._imageViewerDic[g]}return f};c.ImageViewerManager=a})(dynamsoft);(function(b){var d=b.lib,c=d.sdk;function a(g,f,e){var h=this;this._innerIndex=d.guid();h._dwsObject=g;h._imgViewerId=e;h.image=new c.Image(g,h);h.ui=new c.UI(g,h,f);h.io=new c.IO(g,h)}c.ImageViewer=a})(dynamsoft);(function(f){var j=f.lib,h=j.sdk,t=j.detect,m=f.dcsEnv,d=f.navInfo;var b=[],r={None:4,FitToWindow:0},p={UP:0,DOWN:1,LEFT:2,RIGHT:3},a={ZOOMIN:0,ZOOMOUT:1},n=m._uiMaxSize,s=0.02,v=65;function i(E,z,D){var B=this;B._dwsObject=E;B._imageViewer=z;B._imageContainerId=D;B._userImageContainer=j.one("#"+D).getEL();j.empty(B._userImageContainer);var C=j.getElDimensions(B._userImageContainer,false);B._userImageViewerWidth=C?C.clientWidth:B._userImageContainer.clientWidth;B._userImageViewerHeight=C?C.clientHeight:B._userImageContainer.clientHeight;B._userImageContainer.innerHTML='<div class="ds-dws-img-viewer-wrapper" oncontextmenu="return false;"><div class="ds-dws-img-viewer-container ds-dws-display-inline-block"></div></div>';B._imageContainerWrapper=j.one(".ds-dws-img-viewer-wrapper",B._userImageContainer).getEL();B._imageContainerWrapper.style.width=B._userImageViewerWidth+"px";B._imageContainerWrapper.style.height=B._userImageViewerHeight+"px";B._imageContainerWrapper.style.position="relative";B._bFocus=false;var A=function(){B._bFocus=true};j.addEventListener(B._imageContainerWrapper,"mouseover",A);var x=function(){B._bFocus=false};j.addEventListener(B._imageContainerWrapper,"mouseout",x);var y=function(){return false};j.addEventListener(B._imageContainerWrapper,"selectstart",y);var w=function(G){G=G||window.event;if(!B._bFocus||B._bSingleMode||B._bVerticalMode){return true}var H=j.getWheelDelta(G);j.stopPropagation(G);B._imageContainerWrapper.scrollLeft-=H*120;return false};j.addEventListener(B._imageContainerWrapper,"mousewheel",w);var F=function(){if(!B._bFocus||!B._bSingleMode||!B._fitToWindowType){return true}B._calImgCtrlActualCentralPoint();return false};j.addEventListener(B._imageContainerWrapper,"scroll",F);B._onImgContainerWrapperScroll=F;i.prototype._removeImgContainerWrapperEvents=function(){j.removeEventListener(this._imageContainerWrapper,"mouseover",A);j.removeEventListener(this._imageContainerWrapper,"mouseout",x);j.removeEventListener(this._imageContainerWrapper,"selectstart",y);j.removeEventListener(this._imageContainerWrapper,"mousewheel",w);j.removeEventListener(this._imageContainerWrapper,"scroll",F)};B._imageContainerBox=j.one(".ds-dws-img-viewer-container",B._imageContainerWrapper).getEL();B._imageContainerBox.style.position="relative";B._imageMargin=-1;B._calcImageMargin=-1;B._borderWidth=1;B._selectedImageBorderWidth=1;B._calcSelectedImageBorderWidth=1;B._selectedBorderColor=2107821823;B._mouseShape=false;B.EnumFitToWindowType=r;B._fitToWindowType=r.FitToWindow;B._imagesPerRow=0;B._imagesPerColumn=0;B._bSingleMode=false;B._bVerticalMode=true;B._iControlWidth=0;B._iControlHeight=0;B._aryImageControls=[];B.imgSelector=null;B._onimageareaselected=null;B._onimageareadeselected=null;B.onmouseclick=null;B.onmouserightclick=null;B.onmousedoubleclick=null;B.onmousemove=null;B._displayMode="";B._scrollToImgCtrlIndexAfterShowed=-1;B._bAdjustNonFitToWindowImgCtrlAfterShowed=false;B._zoom=1;B._bDestoryed=false;B._bRemoved=false;B._ratio=0;b.push(B)}i.prototype._getImgViewerId=function(){return this._imageContainerId};i.prototype._getImgViewerEl=function(){try{return j.one("#"+this._imageContainerId).getEL()}catch(w){return false}};i.prototype.setSelectionRectAspectRatio=function(w){var x=this;if(x._bDestoryed){return false}if(!x._dwsObject._validateDivDom(x._getImgViewerId(),!0)){return false}if(!x._dwsObject._validateImgViewerExist(x._getImgViewerId(),x._bRemoved)){return false}if(!x._dwsObject._validateParamNum(arguments,1)||!x._dwsObject._validateNumberType("value",w)||!x._dwsObject._validateValue("value",w,[0,10000],true)){return false}x._ratio=w;return true};i.prototype.getSelectionRectAspectRatio=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return w._ratio};i.prototype.getMargin=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return(w._imageMargin<1)?w._calcImageMargin:w._imageMargin};i.prototype.setMargin=function(y){var z=this;if(z._bDestoryed){return false}if(!z._dwsObject._validateDivDom(z._getImgViewerId(),!0)){return false}if(!z._dwsObject._validateImgViewerExist(z._getImgViewerId(),z._bRemoved)){return false}if(!z._dwsObject._validateParamNum(arguments,1)||!z._dwsObject._validateNumberType("iValue",y)){return false}y=Math.round(y);if(y<1){z._dwsObject._setErrCodeErrString(j.errorInfo.getValueOutOfRangeCode(),j.errorInfo.getValueOutOfRangeString("iValue"));return false}if(!z._dwsObject._validateValue("iValue",y,[1,n],true)){return false}if(z._imageMargin==y){return true}z._imageMargin=y;var w=z._imageContainerWrapper.scrollLeft,x=z._imageContainerWrapper.scrollTop;z._refresh();z._setScrollBarPosition(x,w);return true};i.prototype.getWidth=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return w._userImageViewerWidth};i.prototype.setWidth=function(x){var y=this;if(y._bDestoryed){return false}if(!y._dwsObject._validateDivDom(y._getImgViewerId(),!0)){return false}if(!y._dwsObject._validateImgViewerExist(y._getImgViewerId(),y._bRemoved)){return false}if(!y._dwsObject._validateParamNum(arguments,1)||!y._dwsObject._validateNumberType("iValue",x)){return false}x=Math.round(x);if(x<1){y._dwsObject._setErrCodeErrString(j.errorInfo.getValueOutOfRangeCode(),j.errorInfo.getValueOutOfRangeString("iValue"));return false}if(!y._dwsObject._validateValue("iValue",x,[1,n],true)){return false}if(y._userImageViewerWidth==x){return true}y._userImageViewerWidth=x;var w=y._getFirstVisibleElemIndex();y._userImageContainer.style.width=x+"px";y._imageContainerWrapper.style.width=x+"px";y._refresh();y._scrollToImgCtrl(w);return true};i.prototype.getHeight=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return w._userImageViewerHeight};i.prototype.setHeight=function(x){var y=this;if(y._bDestoryed){return false}if(!y._dwsObject._validateDivDom(y._getImgViewerId(),!0)){return false}if(!y._dwsObject._validateImgViewerExist(y._getImgViewerId(),y._bRemoved)){return false}if(!y._dwsObject._validateParamNum(arguments,1)||!y._dwsObject._validateNumberType("iValue",x)){return false}x=Math.round(x);if(x<1){y._dwsObject._setErrCodeErrString(j.errorInfo.getValueOutOfRangeCode(),j.errorInfo.getValueOutOfRangeString("iValue"));return false}if(!y._dwsObject._validateValue("iValue",x,[1,n],true)){return false}if(y._userImageViewerHeight==x){return true}y._userImageViewerHeight=x;var w=y._getFirstVisibleElemIndex();y._userImageContainer.style.height=x+"px";y._imageContainerWrapper.style.height=x+"px";y._refresh();y._scrollToImgCtrl(w);return true};i.prototype.getSelectedImageBorderWidth=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return w._selectedImageBorderWidth};i.prototype.setSelectedImageBorderWidth=function(y){var z=this;if(z._bDestoryed){return false}if(!z._dwsObject._validateDivDom(z._getImgViewerId(),!0)){return false}if(!z._dwsObject._validateImgViewerExist(z._getImgViewerId(),z._bRemoved)){return false}if(!z._dwsObject._validateParamNum(arguments,1)||!z._dwsObject._validateNumberType("iValue",y)){return false}y=Math.round(y);if(y<1){z._dwsObject._setErrCodeErrString(j.errorInfo.getValueOutOfRangeCode(),j.errorInfo.getValueOutOfRangeString("iValue"));return false}if(!z._dwsObject._validateValue("iValue",y,[1,n],true)){return false}if(z._selectedImageBorderWidth==y||z._calcSelectedImageBorderWidth==y){return true}z._selectedImageBorderWidth=y;var w=z._imageContainerWrapper.scrollLeft,x=z._imageContainerWrapper.scrollTop;z._refresh();z._setScrollBarPosition(x,w);return true};i.prototype.getMouseShape=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return w._mouseShape};i.prototype.setMouseShape=function(x){var y=this;if(y._bDestoryed){return false}if(!y._dwsObject._validateDivDom(y._getImgViewerId(),!0)){return false}if(!y._dwsObject._validateImgViewerExist(y._getImgViewerId(),y._bRemoved)){return false}if(!y._dwsObject._validateParamNum(arguments,1)||!y._dwsObject._validateBooleanType("iValue",x)){return false}if(y._mouseShape==x){return true}y._mouseShape=x;for(var w=0;w<y._aryImageControls.length;w++){y._aryImageControls[w].setMouseShape(x)}return true};i.prototype.getFitToWindowType=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return w._fitToWindowType};i.prototype.setFitToWindowType=function(w){var x=this;if(x._bDestoryed){return false}if(!x._dwsObject._validateDivDom(x._getImgViewerId(),!0)){return false}if(!x._dwsObject._validateImgViewerExist(x._getImgViewerId(),x._bRemoved)){return false}if(!x._dwsObject._validateParamNum(arguments,1)||!x._dwsObject._validateNumberType("iValue",w)){return false}w=Math.round(w);if(!x._dwsObject._validateValue("iValue",w,[0,4],false)){return false}if(x._fitToWindowType==w){return true}x._fitToWindowType=w;if(x._bSingleMode){x._refresh()}return true};i.prototype.getZoom=function(){var w=this;if(w._bDestoryed){return null}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}return w._zoom};i.prototype.setZoom=function(w){var x=this;if(x._bDestoryed){return false}if(!x._dwsObject._validateDivDom(x._getImgViewerId(),!0)){return false}if(!x._dwsObject._validateImgViewerExist(x._getImgViewerId(),x._bRemoved)){return false}if(!x._dwsObject._validateParamNum(arguments,1)||!x._dwsObject._validateNumberType("iValue",w)){return false}if(!x._dwsObject._validateValue("iValue",w,[s,v],true)){return false}if(x._zoom==w){return true}x._zoom=w;if(!x._bSingleMode||x._fitToWindowType!=r.None){return true}x._refresh();x._bAdjustNonFitToWindowImgCtrlAfterShowed=x._bIsImageViewerHiden();return true};var l="getBackgroundColor",k="setBackgroundColor",o="getSelectedImageBorderColor",c="setSelectedImageBorderColor",u=0,e=4294967295;j.each([l,k,o,c],function(w){i.prototype[w]=function(){var x=this;if(x._bDestoryed){return false}if(!x._dwsObject._validateDivDom(x._getImgViewerId(),!0)){return(w==l||w==o)?undefined:false}if(!x._dwsObject._validateImgViewerExist(x._getImgViewerId(),x._bRemoved)){return(w==l||w==o)?undefined:false}if(w==l||w==o){if(!x._dwsObject._validateParamNum(arguments,0)){return null}}if(w==k||w==c){if(!x._dwsObject._validateParamNum(arguments,1)||!x._dwsObject._validateNumberType("iValue",arguments[0])||!x._dwsObject._validateValue("iValue",arguments[0],[u,e],true)){return false}}if(w==l){return j.colorStrToInt(x._userImageContainer.style.backgroundColor?x._userImageContainer.style.backgroundColor:j.currentStyle(x._userImageContainer,"background-color"))}if(w==k){x._userImageContainer.style.backgroundColor=j.IntToColorStr(arguments[0]);return true}if(w==o){return x._selectedBorderColor}if(w==c){x._selectedBorderColor=arguments[0];x._refresh();return true}}});j.each(["getContainerId","show","hide"],function(w){i.prototype[w]=function(){var y=this;if(y._bDestoryed){return w=="getContainerId"?null:false}var x=y._getImgViewerId();if(!y._dwsObject._validateDivDom(x,!0)){return w=="getContainerId"?null:!1}if(!y._dwsObject._validateImgViewerExist(y._getImgViewerId(),y._bRemoved)){return w=="getContainerId"?null:!1}if(!y._dwsObject._validateParamNum(arguments,0)){return w=="getContainerId"?null:!1}if(w=="getContainerId"){return x}if(w=="show"){y._displayMode=(y._displayMode=="none")?"":y._displayMode;if(y._userImageContainer.style.display=="none"){y._userImageContainer.style.display=y._displayMode}else{y._displayMode=y._userImageContainer.style.display}if(y._scrollToImgCtrlIndexAfterShowed!=-1){y._scrollToImgCtrl(y._scrollToImgCtrlIndexAfterShowed)}y._scrollToImgCtrlIndexAfterShowed=-1;if(y._bAdjustNonFitToWindowImgCtrlAfterShowed&&y._bSingleMode&&y._fitToWindowType){y._showNonFitToWinImgCtrl()}y._bAdjustNonFitToWindowImgCtrlAfterShowed=false}if(w=="hide"){if(y._userImageContainer.style.display!="none"){y._displayMode=y._userImageContainer.style.display}y._userImageContainer.style.display="none";y._displayMode=(y._displayMode=="none")?"":y._displayMode}return !0}});i.prototype._bIsImageViewerHiden=function(){return this._userImageContainer.style.display=="none"};i.prototype.setImageViewMode=function(y,B){var C=this;if(C._bDestoryed){return false}if(!C._dwsObject._validateDivDom(C._getImgViewerId(),!0)){return false}if(!C._dwsObject._validateImgViewerExist(C._getImgViewerId(),C._bRemoved)){return false}if(!C._dwsObject._validateParamNum(arguments,2)||!C._dwsObject._validateNumberType("column",y)||!C._dwsObject._validateNumberType("row",B)){return false}y=Math.round(y);B=Math.round(B);if((y==-1&&B!=-1)||(y>0&&B!=-1&&B<=0)){C._dwsObject._setErrCodeErrString(j.errorInfo.getValueNotValidCode(),j.errorInfo.getValueNotValidString("row"));return false}if((B==-1&&y!=-1&&y<=0)||(B>0&&y<=0)){C._dwsObject._setErrCodeErrString(j.errorInfo.getValueNotValidCode(),j.errorInfo.getValueNotValidString("column"));return false}if(y==0&&B==0){C._dwsObject._setErrCodeErrString(j.errorInfo.getValueNotValidCode(),j.errorInfo.getValueNotValidString("column"));return false}if(y<-1){C._dwsObject._setErrCodeErrString(j.errorInfo.getValueNotValidCode(),j.errorInfo.getValueNotValidString("column"));return false}if(B<-1){C._dwsObject._setErrCodeErrString(j.errorInfo.getValueNotValidCode(),j.errorInfo.getValueNotValidString("row"));return false}var A=C._bSingleMode,x=C._bVerticalMode,z=C._imagesPerRow,w=C._imagesPerColumn;if(y==-1&&B==-1){C._bSingleMode=true;C._bVerticalMode=false;C._imagesPerColumn=1;C._imagesPerRow=1}else{if(y>0&&B==-1){C._bSingleMode=false;C._bVerticalMode=false;C._imagesPerColumn=y;C._imagesPerRow=1}else{if(y>0&&B>0){C._bSingleMode=false;C._bVerticalMode=true;C._imagesPerColumn=y;C._imagesPerRow=B}}}if(A==C._bSingleMode&&x==C._bVerticalMode&&w==C._imagesPerColumn&&z==C._imagesPerRow){return true}C._refresh();if(!C._bSingleMode){C._scrollToImgCtrl(0)}else{C._imageViewer.image._innerSetIndexInfo(null,null,C._imageViewer.image.getIndex(),[C._imageViewer.image.getIndex()],false,false)}return true};i.prototype._addImageControl=function(x){var A=this,y=this;var w=A._imageViewer.image._innerIncCount();if(A.imgSelector){A.imgSelector.hide();A.imgSelector.clearRect();A.imgSelector=null;if(A._onimageareadeselected&&typeof A._onimageareadeselected=="function"){setTimeout(function(){y._onimageareadeselected(y._index)},0)}}A._imageViewer.image._innerSetIndexInfo(null,null,w-1,[w-1],false,false);var z=new h.ImageControl(A._dwsObject,A._mouseShape,A._imageViewer);z.imageIndex=A._imageViewer.image.getIndex();z.iImageViewerWidth=A._userImageViewerWidth;z.iImageViewerHeight=A._userImageViewerHeight;z.borderWidth=A._borderWidth;z.selectionBorderWidth=A._calcSelectedImageBorderWidth;z.selectionBorderColor=A._selectedBorderColor;A._attachImgControlEventHandlers(z);A._aryImageControls.push(z);A._refresh();A._imageContainerBox.appendChild(z.outerDiv);A._scrollToImgCtrl(z.imageIndex);x=x||[t.preUrl,t.portInfo.curPort,"/",m._getVersionStrForCommand(),"/img?session=",t.sessionId,"&object=",A._dwsObject._dwsObjectId,"&imageviewer=",A._imageViewer._imgViewerId,"&index=",A._imageViewer.image.getIndex()].join("");z.attachImage(x)};i.prototype._involkeUserMouseEventHandler=function(w,y){var x=this;if(!j.isFunction(x[w])&&!j.isNull(x[w])){x._dwsObject._setErrCodeErrString(j.errorInfo.getTypeNotValidCode(),j.errorInfo.getTypeNotValidString(w,!0))}else{if(!j.isNull(x[w])){x._dwsObject._setErrCodeErrString(j.errorInfo.getOkCode(),j.errorInfo.getOkString());setTimeout(function(){x[w](y.index,y.mouseX,y.mouseY)},0)}}};i.prototype._attachImgControlEventHandlers=function(x){if(!(x instanceof j.sdk.ImageControl)){return}var w=this;x.onMouseClick=function(y){w._onMouseClick(y);w._involkeUserMouseEventHandler("onmouseclick",y)};x.onMouseDoubleClick=function(y){w._involkeUserMouseEventHandler("onmousedoubleclick",y)};x.onMouseRightClick=function(y){w._involkeUserMouseEventHandler("onmouserightclick",y)};x.onMouseMove=function(y){w._involkeUserMouseEventHandler("onmousemove",y)};x.onImageAreaSelected=function(B){var z=B.imgSelector;var C=w._imageViewer.image._getIndex();var A=w._imageViewer.image._getSelectedIndices().slice().sort(function(E,D){return E-D});var y=B.index;w._imageViewer.image._innerSetIndexInfo(C,A,y,[y],true,false);w.imgSelector=B.imgSelector;if(!j.isFunction(w._onimageareaselected)&&!j.isNull(w._onimageareaselected)){w._dwsObject._setErrCodeErrString(j.errorInfo.getTypeNotValidCode(),j.errorInfo.getTypeNotValidString("_onimageareaselected",!0));return}if(!j.isNull(w._onimageareaselected)){setTimeout(function(){w._onimageareaselected(z.imgCtrl.imageIndex,z.actualImgRect.left,z.actualImgRect.top,z.actualImgRect.right,z.actualImgRect.bottom)},0)}};x.onImageDraggingFinished=function(){w._calImgCtrlActualCentralPoint()};x.onImageAreaDeSelected=function(){if(!(w.imgSelector instanceof j.sdk.ImageSelector)||w.imgSelector.bDestroy||!(w.imgSelector.isValidSelector())||w.imgSelector.imgCtrl.imageIndex<0||w.imgSelector.imgCtrl.imageIndex>w._imageViewer.image._getCount()-1){if(w.imgSelector){w.imgSelector.hide()}w.imgSelector=null;return}if(!j.isFunction(w._onimageareadeselected)&&!j.isNull(w._onimageareadeselected)){w._dwsObject._setErrCodeErrString(j.errorInfo.getTypeNotValidCode(),j.errorInfo.getTypeNotValidString("_onimageareadeselected",!0));w.imgSelector.hide();w.imgSelector=null;return}var y=w.imgSelector.imgCtrl.imageIndex;w.imgSelector.hide();w.imgSelector.clearRect();w.imgSelector=null;if(!j.isNull(w._onimageareadeselected)){setTimeout(function(){w._onimageareadeselected(y)},0)}};x.onImageDragging=function(y){w._setScrollBarPosition(w._imageContainerWrapper.scrollTop+y.deltaY,w._imageContainerWrapper.scrollLeft+y.deltaX)}};i.prototype._onMouseClick=function(A){var F=this;var C=0,I=0,M=A.index,x=F._imageViewer.image._getIndex(),B=F._imageViewer.image._getSelectedIndices().slice().sort(function(O,N){return O-N}),y=-1,L=F._imageViewer.image._getSelectedIndices().slice().sort(function(O,N){return O-N}),K=L.indexOf(M),w=A.e.ctrlKey,H=A.e.shiftKey,G=A.e.metaKey;var E=function(N){var O=F._aryImageControls[N];if(O&&O.imgSelector){O.imgSelector.bNeedResize=!0}};if(K==-1){if(w||H||G||L.length<1){L.push(M)}else{if(L.length==1){if(L[0]==M){E(M);return}L[0]=M}else{L=[];L.push(M)}}}else{if((w||G)&&L.length>1){L.splice(K,1)}else{if(H){L.push(M)}else{if(L.length==1&&x==M){E(M);return}L=[];L.push(M)}}}if(H){var J=L[0],D=L[L.length-1];L=[];if(D==J){L.push(parseInt(J))}else{if(D>J){I=D-J+1;for(C=0;C<I;C++){L.push(parseInt(J+C))}}else{I=J-D+1;L.push(parseInt(J));for(C=0;C<I-1;C++){L.push(parseInt(D+C))}}}}L.sort(function(O,N){return O-N});if(L.indexOf(M)!=-1){y=M}else{if(L.indexOf(x)==-1){var z=L.length;for(C=0;C<L.length;C++){if(L[C]>x){z=C;break}}y=(z<L.length)?L[z]:L[C-1]}else{y=x}}F._imageViewer.image._innerSetIndexInfo(x,B,y,L,true,false)};i.prototype.getImageSelectedAreaInfo=function(){var w=this;if(w._bDestoryed){return false}if(!w._dwsObject._validateDivDom(w._getImgViewerId(),!0)){return null}if(!w._dwsObject._validateImgViewerExist(w._getImgViewerId(),w._bRemoved)){return null}if(!w._dwsObject._validateParamNum(arguments,0)){return null}if(!(w.imgSelector instanceof j.sdk.ImageSelector)||w.imgSelector.bDestroy||!(w.imgSelector.isValidSelector())||w.imgSelector.imgCtrl.imageIndex<0||w.imgSelector.imgCtrl.imageIndex>w._imageViewer.image._getCount()-1){return null}return new q(w.imgSelector.imgCtrl.imageIndex,w.imgSelector.actualImgRect.left,w.imgSelector.actualImgRect.top,w.imgSelector.actualImgRect.right,w.imgSelector.actualImgRect.bottom)};i.prototype._performLeftKeyOperation=function(){this._performArrowKeyOpertion(p.LEFT)};i.prototype._performRightKeyOperation=function(){this._performArrowKeyOpertion(p.RIGHT)};i.prototype._performUpKeyOperation=function(){var w=this;if(!w._bSingleMode&&!w._fitToWindowType&&!w._bVerticalMode){return}w._performArrowKeyOpertion(p.UP)};i.prototype._performDownKeyOperaton=function(){var w=this;if(!w._bSingleMode&&!w._fitToWindowType&&!w._bVerticalMode){return}w._performArrowKeyOpertion(p.DOWN)};i.prototype._performPageUpKeyOperation=function(){var w=this;if(!w._bSingleMode&&!w._fitToWindowType&&!w._bVerticalMode){return}w._performPageUpDownOperation(true)};i.prototype._performPageDownKeyOperation=function(){var w=this;if(!w._bSingleMode&&!w._fitToWindowType&&!w._bVerticalMode){return}w._performPageUpDownOperation(false)};i.prototype._performHomeKeyOperation=function(){this._setScrollBarPosition(0,0)};i.prototype._performEndKeyOperation=function(){var w=this;if(w._bSingleMode){w._setScrollBarPosition(w._imageContainerWrapper.scrollHeight,w._imageContainerWrapper.scrollWidth)}else{if(w._bVerticalMode){w._setScrollBarPosition(w._imageContainerWrapper.scrollHeight,0)}else{w._setScrollBarPosition(0,w._imageContainerWrapper.scrollWidth)}}};i.prototype._performPageUpDownOperation=function(w){var z=this;if(!z._bSingleMode){var x=z._getFirstVisibleElemIndex(),y;if(w){y=x-z._imagesPerColumn*z._imagesPerRow;y=y<0?0:y}else{y=x+z._imagesPerColumn*z._imagesPerRow;y=(y>z._imageViewer.image._count-1)?(z._imageViewer.image._count-1):y}z._scrollToImgCtrl(y)}else{if(z._fitToWindowType){if(w){z._imageContainerWrapper.scrollTop-=(z._userImageViewerHeight-z._imageMargin)}else{z._imageContainerWrapper.scrollTop+=(z._userImageViewerHeight-z._imageMargin)}}}};i.prototype._performArrowKeyOpertion=function(A){var B=this;if(!B._bSingleMode){var y=-1,w=B._imageViewer.image.getIndex(),z=B._aryImageControls[w],x;switch(A){case p.UP:y=w-B._imagesPerColumn;break;case p.DOWN:y=w+B._imagesPerColumn;break;case p.LEFT:y=w-1;break;case p.RIGHT:y=w+1;break;default:break}x=B._aryImageControls[y];if(!z||!x){return}B._imageViewer.image._innerSetIndexInfo(w,B._imageViewer.image.getSelectedIndices(),y,[y],true,true)}else{if(B._fitToWindowType){switch(A){case p.UP:B._setScrollBarPosition(B._imageContainerWrapper.scrollTop-B._imageContainerWrapper.scrollHeight*0.05,undefined);break;case p.DOWN:B._setScrollBarPosition(B._imageContainerWrapper.scrollTop+B._imageContainerWrapper.scrollHeight*0.05,undefined);break;case p.LEFT:B._setScrollBarPosition(undefined,B._imageContainerWrapper.scrollLeft-B._imageContainerWrapper.scrollWidth*0.05);break;case p.RIGHT:B._setScrollBarPosition(undefined,B._imageContainerWrapper.scrollLeft+B._imageContainerWrapper.scrollWidth*0.05);break;default:break}B._calImgCtrlActualCentralPoint()}}};i.prototype._performZoomOpertion=function(w){if(w!=a.ZOOMIN&&w!=a.ZOOMOUT){return}var y=this;if(w===a.ZOOMIN&&y._zoom===v||w===a.ZOOMOUT&&y._zoom===s){return}var x=y._zoom*((w==a.ZOOMIN)?1.2:0.8);if(x<s){y._zoom=s}else{if(x>v){y._zoom=v}else{y._zoom=x}}y._refresh()};i.prototype._keydownEventHandler=function(x){var w=true,y=this;if(!y._bFocus){return w}switch(x.keyCode){case 37:w=false;y._performLeftKeyOperation();break;case 39:w=false;y._performRightKeyOperation();break;case 38:w=false;y._performUpKeyOperation();break;case 40:w=false;y._performDownKeyOperaton();break;case 33:w=false;y._performPageUpKeyOperation();break;case 34:w=false;y._performPageDownKeyOperation();break;case 35:w=false;y._performEndKeyOperation();break;case 36:w=false;y._performHomeKeyOperation();break;case 82:break;case 107:w=false;y._performZoomOpertion(a.ZOOMIN);break;case 109:w=false;y._performZoomOpertion(a.ZOOMOUT);break;default:break}if(!w){j.stopPropagation(x)}return w};var g=function(x){x=x||window.event;var w=true;j.each(b,function(y){if(y instanceof dynamsoft.lib.sdk.UI){if(y._bFocus){w=y._keydownEventHandler(x);if(!w){return false}}else{return w}}});return w};j.addEventListener(document.documentElement,"keydown",g);i.prototype._refreshIndexInfo=function(E,H,y,z,C,w){var B=this,G,A,D=[],x=B._imageContainerWrapper.scrollLeft,F=B._imageContainerWrapper.scrollTop;for(A=0;A<H.length;A++){if(z.indexOf(H[A])==-1){continue}D.push(H[A])}if(w){D=[]}for(A=0;A<H.length;A++){G=B._aryImageControls[H[A]];if(null!=G&&D.indexOf(H[A])==-1){G.bIfCurrentIndex=false;G.refresh(B._iControlWidth,B._iControlHeight);G.setSelect(false)}}for(A=0;A<z.length;A++){G=B._aryImageControls[z[A]];if(null!=G&&D.indexOf(z[A])==-1){if(z[A]==y){G.bIfCurrentIndex=true}G.refresh(B._iControlWidth-(B._calcSelectedImageBorderWidth-B._borderWidth)*2,B._iControlHeight-(B._calcSelectedImageBorderWidth-B._borderWidth)*2);G.setSelect(true)}}if(!B._bSingleMode&&B._bVerticalMode&&B._getHowManyRows()<=B._imagesPerRow||!B._bSingleMode&&!B._bVerticalMode&&B._imageViewer.image._count<=B._imagesPerColumn){B._refresh()}if(C){B._setImgCtrlVisible(y)}else{B._setScrollBarPosition(F,x)}};i.prototype._refreshWhenCountReduced=function(y){var B=this,w=B._imageViewer.image.getCount(),A=y-w,z;if(A<=0){return}for(var x=y-1;x>=w;x--){z=B._aryImageControls[x];if(z){B._aryImageControls.splice(x,1);z.destroy()}}B._refresh()};i.prototype._setScrollBarPosition=function(x,w){if(x!=undefined||x!=null){this._imageContainerWrapper.scrollTop=x}if(w!=undefined||w!=null){this._imageContainerWrapper.scrollLeft=w}};i.prototype._scrollToImgCtrl=function(w){var y=this;if(y._bSingleMode||w<0||w>=y._aryImageControls.length){return}var x=j.all(".ds-dws-img-container",y._imageContainerBox)[w];if(!x){return}if(y._bIsImageViewerHiden()){y._scrollToImgCtrlIndexAfterShowed=w}if(y._bVerticalMode){y._setScrollBarPosition(x.offsetTop-y._calcImageMargin,undefined)}else{y._setScrollBarPosition(undefined,x.offsetLeft-y._calcImageMargin)}};i.prototype._setImgCtrlVisible=function(w){var z=this;if(z._bSingleMode||w<0||w>=z._aryImageControls.length){return}var x=z._getVisibleElemIndices();if(x.length==0){return}if(x.indexOf(w)==-1){if(w<x[x.length-1]){z._scrollToImgCtrl(w)}else{var y=z._bVerticalMode?(parseInt((w+z._imagesPerColumn)/z._imagesPerColumn)-z._imagesPerRow)*z._imagesPerColumn:(parseInt((w+z._imagesPerRow)/z._imagesPerRow)-z._imagesPerColumn)*z._imagesPerRow;y=y<0?0:y;y=y>=z._aryImageControls.length?(z._aryImageControls.length-1):y;z._scrollToImgCtrl(y)}}else{z._scrollToImgCtrl(x[0])}};i.prototype._getFirstVisibleElemIndex=function(){var C=this;if(C._imageViewer.image._count==0){return -1}if(C._bSingleMode){return C._imageViewer.image.getIndex()}else{if(C._bVerticalMode){var A=C._imageContainerWrapper.scrollHeight,z=C._imageContainerWrapper.scrollTop,y;if(z<=0||A<=0){return 0}y=Math.round(z*C._getHowManyRows()/A);return y*C._imagesPerColumn}else{var w=C._imageContainerWrapper.scrollWidth,x=C._imageContainerWrapper.scrollLeft,B;if(x<=0||w<=0){return 0}B=Math.round(x*C._getHowManyCols()/w);return B*C._imagesPerRow}}};i.prototype._getVisibleElemIndices=function(){var w=this._getFirstVisibleElemIndex(),y=[];for(var x=0;x<this._imagesPerRow*this._imagesPerColumn;x++){y.push(w+x)}return y};i.prototype._getHowManyRows=function(){return parseInt((this._imageViewer.image._count+this._imagesPerColumn-1)/this._imagesPerColumn)};i.prototype._getHowManyCols=function(){return parseInt((this._imageViewer.image._count+this._imagesPerRow-1)/this._imagesPerRow)};i.prototype._getScrollBarWidth=function(){if(d.scrollBarWidth){return d.scrollBarWidth}var y=document.createElement("p");y.style.width="100%";y.style.height="200px";var z=document.createElement("div");z.style.position="absolute";z.style.top="0px";z.style.left="0px";z.style.visibility="hidden";z.style.width="200px";z.style.height="150px";z.style.overflow="hidden";z.appendChild(y);document.body.appendChild(z);var x=y.offsetWidth;z.style.overflow="scroll";var w=y.offsetWidth;if(x==w){w=z.clientWidth}document.body.removeChild(z);d.scrollBarWidth=x-w;return d.scrollBarWidth};i.prototype._calcControlsSize=function(){var C=this;if(C._imageMargin!=-1){C._calcImageMargin=C._imageMargin}if(!C._bSingleMode){var A=C._getScrollBarWidth();if(C._bVerticalMode){if(C._getHowManyRows()<=C._imagesPerRow){A=0}if(C._imageMargin==-1){var z=parseInt(C._userImageViewerHeight/(C._imagesPerRow*10));var B=parseInt((C._userImageViewerWidth-A)/(C._imagesPerColumn*10));var y=Math.min(z,B);if(C._calcImageMargin<=0){C._calcImageMargin=parseInt(y)}else{C._calcImageMargin=parseInt(C._calcImageMargin<y?C._calcImageMargin:y)}}}else{if(C._imageViewer.image._count<=C._imagesPerColumn){A=0}if(C._imageMargin==-1){var z=parseInt((C._userImageViewerHeight-A)/(C._imagesPerRow*10));var B=parseInt((C._userImageViewerWidth)/(C._imagesPerColumn*10));var y=z<B?z:B;if(C._calcImageMargin<=0){C._calcImageMargin=parseInt(y)}else{C._calcImageMargin=parseInt(C._calcImageMargin<y?C._calcImageMargin:y)}}}if(C._imagesPerColumn==C._imagesPerRow&&C._imagesPerRow==1){C._calcImageMargin=0}var w=0;var x=0;if(C._bVerticalMode==true){w=C._userImageViewerHeight-C._calcImageMargin;x=C._userImageViewerWidth-A-C._calcImageMargin}else{w=C._userImageViewerHeight-A-C._calcImageMargin;x=C._userImageViewerWidth-C._calcImageMargin}C._iControlWidth=parseInt(x/C._imagesPerColumn-C._calcImageMargin)-2*C._borderWidth;C._iControlHeight=parseInt(w/C._imagesPerRow-C._calcImageMargin)-2*C._borderWidth;if(C._iControlWidth<0||C._iControlHeight<0){if(C._iControlWidth<C._iControlHeight){C._iControlWidth=0;C._calcImageMargin=parseInt((C._userImageViewerWidth-(C._bVerticalMode?A:0)-2*C._borderWidth*C._imagesPerColumn)/(C._imagesPerColumn+1));w=C._userImageViewerHeight-(C._bVerticalMode?0:A)-C._calcImageMargin;C._iControlHeight=parseInt(w/C._imagesPerRow-C._calcImageMargin)-2*C._borderWidth}else{C._iControlHeight=0;C._calcImageMargin=parseInt((C._userImageViewerHeight-(C._bVerticalMode?0:A)-2*C._borderWidth*C._imagesPerRow)/(C._imagesPerRow+1));x=C._userImageViewerWidth-(C._bVerticalMode?A:0)-C._calcImageMargin;C._iControlWidth=parseInt(x/C._imagesPerColumn-C._calcImageMargin)-2*C._borderWidth}}}else{C._calcImageMargin=0;C._iControlWidth=C._userImageViewerWidth-2*C._borderWidth;C._iControlHeight=C._userImageViewerHeight-2*C._borderWidth}C._iControlWidth=(C._iControlWidth<0)?0:C._iControlWidth;C._iControlHeight=(C._iControlHeight<0)?0:C._iControlHeight};i.prototype._getImgCtrlWithCurIndex=function(){return this._aryImageControls[this._imageViewer.image._index]};i.prototype._calImgCtrlActualCentralPoint=function(){var A=this,y=A._getImgCtrlWithCurIndex();if(!(y instanceof h.ImageControl)){return}if(!(y.bSingleMode&&!y.bIfFitWindow&&y.bIfCurrentIndex)){return}var x={x:0,y:0},w=(y.curImageWidth>A._userImageViewerWidth)?A._getScrollBarWidth():0,z=(y.curImageHeight>A._userImageViewerHeight)?A._getScrollBarWidth():0;x.x=A._imageContainerWrapper.scrollLeft+(A._userImageViewerWidth-w)/2;x.y=A._imageContainerWrapper.scrollTop+(A._userImageViewerHeight-z)/2;y.actaulCentralPoint.x=x.x/y.curImageWidth*y.origImageWidth;y.actaulCentralPoint.y=x.y/y.curImageHeight*y.origImageHeight;if(y.curImageWidth<=A._userImageViewerWidth){y.actaulCentralPoint.x=y.origImageWidth/2}if(y.curImageHeight<=A._userImageViewerHeight){y.actaulCentralPoint.y=y.origImageHeight/2}if(y.actaulCentralPoint.x<0||y.actaulCentralPoint.x>y.origImageWidth){y.actaulCentralPoint.x=0}if(y.actaulCentralPoint.y<0||y.actaulCentralPoint.y>y.origImageHeight){y.actaulCentralPoint.y=0}};i.prototype._showImgCtrlAfterZoom=function(){var C=this,z=C._getImgCtrlWithCurIndex();if(!(z instanceof h.ImageControl)){return}if(!(z.bSingleMode&&!z.bIfFitWindow&&z.bIfCurrentIndex)||z.actaulCentralPoint.x==-1||z.actaulCentralPoint.y==-1){return}var x={},A,y,w=(z.curImageWidth>C._userImageViewerWidth)?C._getScrollBarWidth():0,B=(z.curImageHeight>C._userImageViewerHeight)?C._getScrollBarWidth():0;x.x=z.actaulCentralPoint.x/z.origImageWidth*z.curImageWidth;x.y=z.actaulCentralPoint.y/z.origImageHeight*z.curImageHeight;A=x.x-(C._userImageViewerWidth-w)/2;y=x.y-(C._userImageViewerHeight-B)/2;C._setScrollBarPosition(y,A);if(z.curImageWidth<=C._userImageViewerWidth){z.actaulCentralPoint.x=z.origImageWidth/2}if(z.curImageHeight<=C._userImageViewerHeight){z.actaulCentralPoint.y=z.origImageHeight/2}};i.prototype._showNonFitToWinImgCtrl=function(w,y){var x=this;j.removeEventListener(x._imageContainerWrapper,"scroll",x._onImgContainerWrapperScroll);if(w){x._calImgCtrlActualCentralPoint()}x._showImgCtrlAfterZoom();if(j.isFunction(y)){y()}x._imageContainerWrapper.style.overflow="hidden";setTimeout(function(){x._imageContainerWrapper.style.overflow="auto";setTimeout(function(){j.addEventListener(x._imageContainerWrapper,"scroll",x._onImgContainerWrapperScroll)},100)},50)};i.prototype._refresh=function(){var B=this;B._calcControlsSize();var D=(B._imagesPerColumn*6>B._iControlWidth/3)?B._iControlWidth/3:B._imagesPerColumn*6;if(B._bSingleMode){B._imageContainerBox.style.padding="0px";B._imageContainerBox.style.width="";B._imageContainerBox.style.height="";B._imageContainerBox.style.whiteSpace="";B._imageContainerWrapper.style.overflowX=!B._fitToWindowType?"hidden":"auto";B._imageContainerWrapper.style.overflowY=!B._fitToWindowType?"hidden":"auto"}else{B._imageContainerWrapper.style.overflow="hidden";B._imageContainerBox.style.padding=B._calcImageMargin/2+"px";if(B._bVerticalMode){B._imageContainerBox.style.width=B._userImageViewerWidth+D-B._calcImageMargin+"px";B._imageContainerBox.style.height="";B._imageContainerBox.style.whiteSpace="";B._imageContainerWrapper.scrollLeft=0}else{B._imageContainerBox.style.width="";B._imageContainerBox.style.height=B._userImageViewerHeight-B._calcImageMargin+"px";B._imageContainerBox.style.whiteSpace="nowrap";B._setScrollBarPosition(0)}}var x=Math.min(B._iControlWidth,B._iControlHeight),E;B._calcSelectedImageBorderWidth=(x<=2*B._selectedImageBorderWidth)?x/2:B._selectedImageBorderWidth;B._calcSelectedImageBorderWidth=(B._calcSelectedImageBorderWidth<1)?1:B._calcSelectedImageBorderWidth;E=B._calcSelectedImageBorderWidth-B._borderWidth;for(var A=0;A<B._aryImageControls.length;A++){var C=B._aryImageControls[A],w;C.iImageControlMargin=B._calcImageMargin;C.bIfCurrentIndex=C.imageIndex==B._imageViewer.image._getIndex();C.bSingleMode=B._bSingleMode;C.bIfFitWindow=!B._fitToWindowType;C.selectionBorderWidth=B._calcSelectedImageBorderWidth;C.selectionBorderColor=B._selectedBorderColor;C.zoom=B._zoom;if(!C.bIfCurrentIndex||!B._bSingleMode||!B._fitToWindowType){C.actaulCentralPoint.x=-1;C.actaulCentralPoint.y=-1}w=B._imageViewer.image._selectedIndices.indexOf(C.imageIndex)!=-1;C.refresh(B._iControlWidth-(w?E*2:0),B._iControlHeight-(w?E*2:0));C.setSelect(w);if(!B._bSingleMode){B._imageContainerWrapper.style.overflowX="hidden";B._imageContainerWrapper.style.overflowY="hidden";if(B._bVerticalMode){var z=parseInt((A+B._imagesPerColumn)/B._imagesPerColumn)>B._imagesPerRow;if(z){B._imageContainerWrapper.style.overflowY="auto";B._imageContainerBox.style.width=B._userImageViewerWidth+D-B._calcImageMargin-B._getScrollBarWidth()+"px"}}else{var y=parseInt((A+B._imagesPerRow)/B._imagesPerRow)>B._imagesPerColumn;if(y){B._imageContainerWrapper.style.overflowX="auto";B._imageContainerBox.style.height=B._userImageViewerHeight-B._calcImageMargin-B._getScrollBarWidth()+"px"}}}}};i.prototype._destory=function(w){var z=this;for(var y=0;y<z._aryImageControls.length;y++){z._aryImageControls[y].destroy()}z._removeImgContainerWrapperEvents();var x=b.indexOf(z);if(x!=-1){b.splice(x,1)}j.empty(z._userImageContainer);if(!w){z._bDestoryed=true}else{z._bRemoved=true}};function q(x,A,z,y,w){this.index=x;this.left=A;this.top=z;this.right=y;this.bottom=w}i.prototype.ImageSelectedAreaInfo=q;h.ImageSelectedAreaInfo=q;h.UI=i})(dynamsoft);(function(c){var g=c.lib,e=g.sdk,b=g.detect,f=c.navInfo;var d={NEARESTNEIGHBOUR:1,BILINEAR:2,BICUBIC:3};function a(k,j){var l=this;l._dwsObject=k;l._imageViewer=j;l._capacity=1023;l._count=0;l._index=-1;l._selectedIndices=[];l._bEdit=false;l.EnumInterpolationMethod=d;l._bDestoryed=false;l._bRemoved=false}a.prototype.editDocument=function(p,m){var l=this;if(l._bDestoryed){return false}if(l._dwsObject._bDestoryed){return false}if(!l._dwsObject._validateParamNum(arguments,2)||!l._dwsObject._validateStringType("documentEditorContainerId",p)||!l._dwsObject._validateNumberType("index",m)){return false}if(m<0||m>l._getCount()-1){l._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("index"));return false}if(!l._dwsObject._validateDivDom(p,"document")){return false}var j=l._dwsObject.getDocumentEditor(p);if(!j||!l._dwsObject._validateDocEditorExist(p,j.ui._bRemoved)){return false}if(l._imageViewer.io._validateImgIsHandlingAsyncOperation()){return false}var k={session:b.sessionId,object:l._dwsObject._dwsObjectId,method:"EditDocument",parameter:[j._docEditorId,l._imageViewer._imgViewerId,m,l._bEdit]},n=function(s){j.documentCtrl.attachDocument()},q=function(s){};var r=g.detect.postSyncCommand(l._dwsObject,g.stringify(k),n,q);if(r){l._bEdit=false;j.imageViewer=l._imageViewer;return true}else{if(l._dwsObject.getErrorCode()==-3001){var o;if(g.isFunction(j.document.ondiscardmodified)){o=j.document.ondiscardmodified()}else{o=j.document.ondiscardmodified}if(o==true){l._dwsObject._setErrCodeErrString(g.errorInfo.getOperationCancelledCode(),g.errorInfo.getOperationCancelledString());return false}else{l._bEdit=true;l.editDocument(p,m);return true}}else{return false}}};a.prototype.getCapacity=function(){var j=this;if(j._bDestoryed){return null}if(!j._dwsObject._validateDivDom(j._imageViewer.ui._getImgViewerId(),!0)){return null}if(!j._dwsObject._validateImgViewerExist(j._imageViewer.ui._getImgViewerId(),j._bRemoved)){return null}if(!j._dwsObject._validateParamNum(arguments,0)){return null}return j._capacity};a.prototype._getCapacity=function(){return this._capacity};a.prototype.setCapacity=function(m){var n=this;if(n._bDestoryed){return false}if(!n._dwsObject._validateDivDom(n._imageViewer.ui._getImgViewerId(),!0)){return false}if(!n._dwsObject._validateImgViewerExist(n._imageViewer.ui._getImgViewerId(),n._bRemoved)){return false}if(!n._dwsObject._validateParamNum(arguments,1)||!n._dwsObject._validateNumberType("iValue",m)){return false}var k=((0|1<<31)>>>0)-1;m=Math.round(m);if(!n._dwsObject._validateValue("iValue",m,[1,k],true)){return false}var l={session:b.sessionId,object:n._dwsObject._dwsObjectId,method:"SetCapacity",parameter:[n._imageViewer._imgViewerId,m]};var j=g.detect.postSyncCommand(n._dwsObject,g.stringify(l),null,null);if(j){n._innerSetCapacity(m)}return j};a.prototype.getCount=function(){var j=this;if(j._bDestoryed){return null}if(!j._dwsObject._validateDivDom(j._imageViewer.ui._getImgViewerId(),!0)){return null}if(!j._dwsObject._validateImgViewerExist(j._imageViewer.ui._getImgViewerId(),j._bRemoved)){return null}if(!j._dwsObject._validateParamNum(arguments,0)){return null}return j._count};a.prototype._getCount=function(){return this._count};a.prototype.getIndex=function(){var j=this;if(j._bDestoryed){return null}if(!j._dwsObject._validateDivDom(j._imageViewer.ui._getImgViewerId(),!0)){return null}if(!j._dwsObject._validateImgViewerExist(j._imageViewer.ui._getImgViewerId(),j._bRemoved)){return null}if(!j._dwsObject._validateParamNum(arguments,0)){return null}return j._index};a.prototype._getIndex=function(){return this._index};a.prototype.setIndex=function(l){var m=this,j=this;if(m._bDestoryed){return false}if(!m._dwsObject._validateDivDom(m._imageViewer.ui._getImgViewerId(),!0)){return false}if(!m._dwsObject._validateImgViewerExist(m._imageViewer.ui._getImgViewerId(),m._bRemoved)){return false}if(!m._dwsObject._validateParamNum(arguments,1)||!m._dwsObject._validateNumberType("iValue",l)){return false}l=Math.round(l);if(!m._count){return m._dwsObject._validateValue("iValue",l,[-1],false)}else{if(l<0||l>=m._count){m._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("iValue"));return false}var k=m._imageViewer.ui;if(k.imgSelector){k.imgSelector.hide();k.imgSelector.clearRect();k.imgSelector=null;if(m._onimageareadeselected&&typeof m._onimageareadeselected=="function"){setTimeout(function(){j._onimageareadeselected(j._index)},0)}}m._innerSetIndexInfo(m._index,m._selectedIndices,l,[l],true,true);m._dwsObject._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString());return true}};a.prototype.getSelectedIndices=function(){var j=this;if(j._bDestoryed){return null}if(!j._dwsObject._validateDivDom(j._imageViewer.ui._getImgViewerId(),!0)){return null}if(!j._dwsObject._validateImgViewerExist(j._imageViewer.ui._getImgViewerId(),j._bRemoved)){return null}if(!j._dwsObject._validateParamNum(arguments,0)){return null}return j._selectedIndices};a.prototype._getSelectedIndices=function(){return this._selectedIndices};a.prototype.setSelectedIndices=function(n){var p=this;if(p._bDestoryed){return false}if(!p._dwsObject._validateDivDom(p._imageViewer.ui._getImgViewerId(),!0)){return false}if(!p._dwsObject._validateImgViewerExist(p._imageViewer.ui._getImgViewerId(),p._bRemoved)){return false}if(!p._dwsObject._validateParamNum(arguments,1)||!p._dwsObject._validateArrayType("iValue",n)){return false}if((p._count==0&&n.length>0)||(p._count>0&&n.length==0)){p._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("iValue"));return false}for(var m=0;m<n.length;m++){if(!g.isNumber(n[m])){p._dwsObject._setErrCodeErrString(g.errorInfo.getTypeNotValidCode(),g.errorInfo.getTypeNotValidString("iValue"));return false}n[m]=Math.round(n[m]);if(n[m]<0||n[m]>p._count-1){p._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("iValue"));return false}}var o=n[n.length-1];var k=[];for(var l=0;l<n.length;l++){if(k.indexOf(n[l])===-1){k.push(n[l])}}p._innerSetIndexInfo(p._index,p._selectedIndices,o,k,true,true);return true};a.prototype.getImageInfo=function(j){var l=this,k=null;if(l._bDestoryed){return false}if(!l._dwsObject._validateDivDom(l._imageViewer.ui._getImgViewerId(),!0)){return k}if(!l._dwsObject._validateImgViewerExist(l._imageViewer.ui._getImgViewerId(),l._bRemoved)){return k}if(!l._dwsObject._validateParamNum(arguments,1)||!l._dwsObject._validateNumberType("index",j)){return k}j=Math.round(j);if(j<0||j>l._count-1){l._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("index"));return k}k=l._getImageInfo(j);return k};a.prototype._getImageInfo=function(j){var n=this,m=null,k={session:b.sessionId,object:n._dwsObject._dwsObjectId,method:"GetImageInfo",parameter:[n._imageViewer._imgViewerId,j]},l=function(o){if(g.isArray(o.result)&&o.result.length>=2){m=new e.ImageInfo(n,o.result[0],o.result[1])}else{m=new e.ImageInfo(n,-1,-1)}};g.detect.postSyncCommand(n._dwsObject,g.stringify(k),l,null);return m};a.prototype.getImagePartUrl=function(j){var l=this,k=null;if(l._bDestoryed){return false}if(!l._dwsObject._validateDivDom(l._imageViewer.ui._getImgViewerId(),!0)){return k}if(!l._dwsObject._validateImgViewerExist(l._imageViewer.ui._getImgViewerId(),l._bRemoved)){return k}if(!l._dwsObject._validateParamNum(arguments,1)||!l._dwsObject._validateNumberType("index",j)){return k}j=Math.round(j);if(j<0||j>l._count-1){l._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("index"));return k}k=["dcs://dcs_",dynamsoft.dcsEnv.bTrial?"trial_":"",dynamsoft.dcsEnv._getFrontendSdkVersionWithoutComma(),"/img?session=",b.sessionId,"&object=",l._dwsObject._dwsObjectId,"&imageviewer=",l._imageViewer._imgViewerId,"&index=",j,"&ts=",g.now()].join("");return k};a.prototype.remove=function(w){var q=this,x=!1,p;if(q._bDestoryed){return x}if(!q._dwsObject._validateDivDom(q._imageViewer.ui._getImgViewerId(),!0)){return x}if(!q._dwsObject._validateImgViewerExist(q._imageViewer.ui._getImgViewerId(),q._bRemoved)){return x}if(q._imageViewer.io._validateImgIsHandlingAsyncOperation()){return x}if(!q._dwsObject._validateParamNum(arguments,1)||!q._dwsObject._validateArrayType("indices",w)){return x}if(w.length===0){return !0}for(p=0;p<w.length;p++){if(!g.isNumber(w[p])){q._dwsObject._setErrCodeErrString(g.errorInfo.getTypeNotValidCode(),g.errorInfo.getTypeNotValidString("indices"));return x}w[p]=Math.round(w[p]);if(w[p]<0||w[p]>q._count-1){q._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("indices"));return x}}w.sort(function(y,j){return y-j});for(var n=0;n<w.length;n++){if(w[n+1]===w[n]){q._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("indices"));return x}}var o={session:b.sessionId,object:q._dwsObject._dwsObjectId,method:"ImageRemove",parameter:[q._imageViewer._imgViewerId,w]};x=g.detect.postSyncCommand(q._dwsObject,g.stringify(o),null,null);if(x){var k=q._index,l=q._selectedIndices.slice().sort(function(y,j){return y-j}),t,m,v,r,u=q._imageViewer.ui,s;for(t=w.length-1;t>=0;t--){v=w[t];s=u._aryImageControls[v];s.destroy();u._aryImageControls.splice(v,1);for(m=l.length-1;m>=0;m--){r=l[m];if(r>v){l[m]-=1}else{if(r===v){l.splice(m,1)}else{break}}}q._count-=1;if(k===v){if(k>q._count-1){k-=1}}else{if(k>v){k-=1}}}if(k<0){k=-1;l=[]}else{for(p=0;p<u._aryImageControls.length;p++){s=u._aryImageControls[p];s.imageIndex=p;s.bIfCurrentIndex=p===k}if(l.length===0){l=[k]}}q._innerSetIndexInfo(q._index,q._selectedIndices,k,l,true,false,true)}return x};var h=["rotateLeft","rotateRight","flip","mirror"];g.each(h,function(j){a.prototype[j]=function(){var p=this,k=!1;if(p._bDestoryed){return k}if(!p._dwsObject._validateDivDom(p._imageViewer.ui._getImgViewerId(),!0)){return k}if(!p._dwsObject._validateImgViewerExist(p._imageViewer.ui._getImgViewerId(),p._bRemoved)){return k}if(p._imageViewer.io._validateImgIsHandlingAsyncOperation()){return k}var m=arguments[0];if(!p._dwsObject._validateParamNum(arguments,1)||!p._dwsObject._validateNumberType("index",m)){return k}m=Math.round(m);if(m<0||m>p._count-1){p._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("index"));return k}var n={session:b.sessionId,object:p._dwsObject._dwsObjectId,method:g.upperCaseFirst(j),parameter:[p._imageViewer._imgViewerId,m]};k=g.detect.postSyncCommand(p._dwsObject,g.stringify(n),null,null);if(k){var o=p._imageViewer.ui._aryImageControls[m];o.imgSelector.calcActualImgRectAfterRotate(j==="rotateLeft"?g._enumImgEditType.RotateLeft:j==="rotateRight"?g._enumImgEditType.RotateRight:j==="flip"?g._enumImgEditType.Flip:j==="mirror"?g._enumImgEditType.Mirror:g._enumImgEditType.None);var l=p._getRefreshedImgUrl(m);o.attachImage(l)}return k}});g.each(["crop","cut"],function(j){a.prototype[j]=function(){var o=this,w=!1;if(o._bDestoryed){return w}if(!o._dwsObject._validateDivDom(o._imageViewer.ui._getImgViewerId(),!0)){return w}if(!o._dwsObject._validateImgViewerExist(o._imageViewer.ui._getImgViewerId(),o._bRemoved)){return w}if(o._imageViewer.io._validateImgIsHandlingAsyncOperation()){return w}var p=arguments[0],m=arguments[1],t=arguments[2],u=arguments[3],k=arguments[4];if(!o._dwsObject._validateParamNum(arguments,5)||!o._dwsObject._validateNumberType("index",p)||!o._dwsObject._validateNumberType("left",m)||!o._dwsObject._validateNumberType("top",t)||!o._dwsObject._validateNumberType("right",u)||!o._dwsObject._validateNumberType("bottom",k)){return w}p=Math.round(p);if(p<0||p>o._count-1){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("index"));return w}if(u<=0){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueOutOfRangeCode(),g.errorInfo.getValueOutOfRangeString("right"));return w}if(k<=0){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueOutOfRangeCode(),g.errorInfo.getValueOutOfRangeString("bottom"));return w}var v=o._getImageInfo(p);if(o._dwsObject.getErrorCode()!==g.errorInfo.getOkCode()){return w}var s=v?v._width:0,r=v?v._height:0;m=Math.round(m);t=Math.round(t);u=Math.round(u);k=Math.round(k);m=m<0?0:m;t=t<0?0:t;u=u>s?s:u;k=k>r?r:k;if(u<=m){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("right"));return w}if(k<=t){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("bottom"));return w}var n={session:b.sessionId,object:o._dwsObject._dwsObjectId,method:g.upperCaseFirst(j),parameter:[o._imageViewer._imgViewerId,p,m,t,u,k]};w=g.detect.postSyncCommand(o._dwsObject,g.stringify(n),null,null);if(w){var q=o._imageViewer.ui._aryImageControls[p];q.imgSelector["calcActualImgRectAfter"+dynamsoft.lib.upperCaseFirst(j)](m,t,u,k);var l=o._getRefreshedImgUrl(p);q.attachImage(l)}return w}});a.prototype.changeSize=function(p,k,r,m){var o=this,s=!1;if(o._bDestoryed){return s}if(!o._dwsObject._validateDivDom(o._imageViewer.ui._getImgViewerId(),!0)){return s}if(!o._dwsObject._validateImgViewerExist(o._imageViewer.ui._getImgViewerId(),o._bRemoved)){return s}if(o._imageViewer.io._validateImgIsHandlingAsyncOperation()){return s}if(!o._dwsObject._validateParamNum(arguments,4)||!o._dwsObject._validateNumberType("index",p)||!o._dwsObject._validateNumberType("width",k)||!o._dwsObject._validateNumberType("height",r)||!o._dwsObject._validateNumberType("interpolationMethod",m)){return s}p=Math.round(p);if(p<0||p>o._count-1){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("index"));return s}k=Math.round(k);r=Math.round(r);var l=((0|1<<31)>>>0)-1;if(k<=0||k>l){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueOutOfRangeCode(),g.errorInfo.getValueOutOfRangeString("width"));return s}if(r<=0||r>l){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueOutOfRangeCode(),g.errorInfo.getValueOutOfRangeString("height"));return s}if(m!==d.NEARESTNEIGHBOUR&&m!==d.BILINEAR&&m!==d.BICUBIC){o._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("interpolationMethod"));return s}var n={session:b.sessionId,object:o._dwsObject._dwsObjectId,method:"ChangeSize",parameter:[o._imageViewer._imgViewerId,p,k,r,m]};s=g.detect.postSyncCommand(o._dwsObject,g.stringify(n),null,null);if(s){var q=o._imageViewer.ui._aryImageControls[p],j=o._getRefreshedImgUrl(p);q.adjustCentralPointAfterImgSizeChanged(k,r);q.imgSelector.calcActualImgRectAfterChangeSize(k,r);q.attachImage(j)}return s};a.prototype.swap=function(l,k){var p=this,s=!1;if(p._bDestoryed){return s}if(!p._dwsObject._validateDivDom(p._imageViewer.ui._getImgViewerId(),!0)){return s}if(!p._dwsObject._validateImgViewerExist(p._imageViewer.ui._getImgViewerId(),p._bRemoved)){return s}if(p._imageViewer.io._validateImgIsHandlingAsyncOperation()){return s}if(!p._dwsObject._validateParamNum(arguments,2)||!p._dwsObject._validateNumberType("firstIndex",l)||!p._dwsObject._validateNumberType("secondIndex",k)){return s}l=Math.round(l);k=Math.round(k);if(l<0||l>p._count-1){p._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("firstIndex"));return s}if(k<0||k>p._count-1){p._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("secondIndex"));return s}if(l===k){return !0}var m={session:b.sessionId,object:p._dwsObject._dwsObjectId,method:"Swap",parameter:[p._imageViewer._imgViewerId,l,k]};s=g.detect.postSyncCommand(p._dwsObject,g.stringify(m),null,null);if(s){var r=p._imageViewer.ui._aryImageControls[l],n=p._getRefreshedImgUrl(l),j=p._imageViewer.ui._aryImageControls[k],q=p._getRefreshedImgUrl(k),o;if(p._imageViewer.ui.imgSelector===r.imgSelector){p._imageViewer.ui.imgSelector=j.imgSelector}else{if(p._imageViewer.ui.imgSelector===j.imgSelector){p._imageViewer.ui.imgSelector=r.imgSelector}}o=r.imgSelector.actualImgRect;r.imgSelector.actualImgRect=j.imgSelector.actualImgRect;j.imgSelector.actualImgRect=o;r.imgSelector.initElem(r.outerDiv);j.imgSelector.initElem(j.outerDiv);r.attachImage(n);j.attachImage(q)}return s};a.prototype.copyToImageViewer=function(l,m){var p=this,j=!1;if(p._bDestoryed){return j}if(!p._dwsObject._validateDivDom(p._imageViewer.ui._getImgViewerId(),!0)){return j}if(!p._dwsObject._validateImgViewerExist(p._imageViewer.ui._getImgViewerId(),p._bRemoved)){return j}if(p._imageViewer.io._validateImgIsHandlingAsyncOperation()){return j}if(!p._dwsObject._validateParamNum(arguments,2)||!p._dwsObject._validateNumberType("index",l)){return j}l=Math.round(l);if(l<0||l>p._count-1){p._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("index"));return j}if(m===null){p._dwsObject._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),g.errorInfo.getValueNotValidString("targetImageViewer"));return j}if(!(m instanceof e.ImageViewer)){p._dwsObject._setErrCodeErrString(g.errorInfo.getTypeNotValidCode(),g.errorInfo.getTypeNotValidString("targetImageViewer"));return j}var k=null;for(var n in dynamsoft.dcsEnv._imageViewerDic){if(dynamsoft.dcsEnv._imageViewerDic[n].imageViewer!==m){continue}k=dynamsoft.dcsEnv._imageViewerDic[n]}if(!k){p._dwsObject._setErrCodeErrString(g.errorInfo.getObjectNotExistCode(),g.errorInfo.getObjectNotExistString("targetImageViewer"));return false}if(k.dwsObject!==p._dwsObject){p._dwsObject._setErrCodeErrString(g.errorInfo.getAccessDeniedCode(),g.errorInfo.getAccessDeniedString("targetImageViewer"));return false}if(!p._dwsObject._validateDivDom(m.ui._getImgViewerId(),!0)){return j}if(!p._dwsObject._validateImgViewerExist(m.ui._getImgViewerId(),m.ui._bRemoved)){return j}if(m.io._validateImgIsHandlingAsyncOperation()){return j}var o={session:b.sessionId,object:p._dwsObject._dwsObjectId,method:"CopyToImageViewer",parameter:[p._imageViewer._imgViewerId,l,m._imgViewerId]};j=g.detect.postSyncCommand(p._dwsObject,g.stringify(o),null,null);if(j){m.ui._addImageControl()}return j};a.prototype._getRefreshedImgUrl=function(j){var k=this;return[b.preUrl,b.portInfo.curPort,"/",dynamsoft.dcsEnv._getVersionStrForCommand(),"/img?session=",b.sessionId,"&object=",k._dwsObject._dwsObjectId,"&imageviewer=",k._imageViewer._imgViewerId,"&index=",j].join("")};a.prototype._innerSetIndexInfo=function(j,n,p,o,m,l,k){this._index=p;this._selectedIndices=o;if(m){this._imageViewer.ui._refreshIndexInfo(j,n,p,o,l,k)}};a.prototype._innerIncCount=function(){return ++this._count};a.prototype._innerDecCount=function(){return --this._count};a.prototype._innerSetCapacity=function(l){var p=this,q=p._count;p._capacity=l;if(q>l){p._count=l;p._imageViewer.ui._refreshWhenCountReduced(q);var j=p._imageViewer.image._index,m=p._imageViewer.image._selectedIndices.slice().sort(function(t,s){return t-s}),k=p._imageViewer.image._index,r=p._imageViewer.image._selectedIndices.slice().sort(function(t,s){return t-s}),o=false;if(j>p._count-1){k=p._count-1}for(var n=m.length-1;n>=0;n--){if(r[n]>p._count-1){r.splice(n,1);o=true}}if(k!=-1&&r.length==0){r=[k];o=true}if(k!=j||o){p._innerSetIndexInfo(j,m,k,r,true,true)}p._imageViewer.ui._setImgCtrlVisible(p._count-1)}};a.prototype._updatedImage=function(k){var m=this;var l=m._imageViewer.ui._aryImageControls[k];var j=m._getRefreshedImgUrl(k);l.attachImage(j)};a.prototype._destory=function(j){if(!j){this._bDestoryed=true}else{this._bRemoved=true}};function i(l,k,j){this._imgNS=l;this._width=k;this._height=j}g.each(["getWidth","getHeight"],function(j){i.prototype[j]=function(){var n=this,l=n._imgNS,k=l._dwsObject,m=l._imageViewer;if(n._bDestoryed){return null}if(!k._validateDivDom(m.ui._getImgViewerId(),!0)){return null}if(!k._validateImgViewerExist(m.ui._getImgViewerId(),l._bRemoved)){return null}if(!k._validateParamNum(arguments,0)){return null}return(g.endsWith(j,"Width"))?n._width:n._height}});g._enumImgEditType={None:-1,RotateLeft:0,RotateRight:1,Flip:2,Mirror:3};a.prototype.ImageInfo=i;e.Image=a;e.ImageInfo=i})(dynamsoft);(function(d){var h=d.lib,f=h.sdk,c=h.detect,g=d.dcsEnv,e=d.navInfo;var a=[];function b(k,j,i){var l=this;l.dwsObject=k;l.imageViewer=i;l.imageIndex=-1;l.imageUrl="";l.origImageWidth=0;l.origImageHeight=0;l.curImageWidth=0;l.curImageHeight=0;l.iImageViewerWidth=0;l.iImageViewerHeight=0;l.iImageControlWidth=0;l.iImageControlHeight=0;l.iImageControlMargin=0;l.outerDiv=false;l.hintDiv=false;l.bSelect=false;l.borderWidth=1;l.borderColor=4008636159;l.selectionBorderWidth=1;l.selectionBorderColor=2107821823;l.objImage=false;l.bIfCurrentIndex=false;l.imageIndex=-1;l.bIfFitWindow=true;l.bSingleMode=false;l.zoom=1;l.lastClick=false;l.mouseShape=null;l.imgSelector=new h.sdk.ImageSelector(l,l.imageViewer);l.bDrawing=false;l.dragPosition={x:0,y:0};l.bDragging=false;a.push(l);l.init(j);l.Left=1;l.Top=1;l.MAXLOACOUNT=6;l.curLoadCount=0;l.actaulCentralPoint={x:-1,y:-1};l._bIe9_10=e.bIE&&(parseInt(e.strBrowserVersion)===9||parseInt(e.strBrowserVersion)===10);l.bDestroy=false}b.prototype.setHintString=function(i){if(!h.isString(i)){return}var j=this;if(j.hintDiv.innerText){j.hintDiv.innerText=i}else{if(j.hintDiv.textContent){j.hintDiv.textContent=i}else{j.hintDiv.appendChild(document.createTextNode(i))}}};b.prototype.init=function(i){var j=this;j.outerDiv=document.createElement("div");j.outerDiv.className="ds-dws-img-container ds-dws-display-inline-block";j.hintDiv=document.createElement("div");j.hintDiv.className="ds-dws-img-hint-container";j.setHintString("Loading ...");j.hintDiv.style.display="none";j.outerDiv.appendChild(j.hintDiv);j.setMouseShape(i);j.initObjImg();j.bindEvents()};b.prototype.initObjImg=function(){var i=this;i.objImage=new Image();i.objImage.className="ds-dws-img-obj";i.objImage.setAttribute("onmousedown","return false;");i.objImage.setAttribute("unselectable","on");i.objImage.setAttribute("draggable","false")};b.prototype.refresh=function(j,i){var k=this;k.outerDiv.className="ds-dws-img-container ds-dws-display-inline-block";k.outerDiv.style.left="";k.outerDiv.style.top="";k.outerDiv.style.position="relative";if(!k.bSingleMode||(k.bSingleMode&&k.bIfCurrentIndex&&k.bIfFitWindow)){k.iImageControlWidth=j;k.iImageControlHeight=i;k.outerDiv.style.width=j+"px";k.outerDiv.style.height=i+"px"}else{if(k.bSingleMode&&!k.bIfFitWindow&&k.bIfCurrentIndex){k.iImageControlWidth=j;k.iImageControlHeight=i}}k.outerDiv.style.margin=k.iImageControlMargin/2+"px";if(k.bSingleMode&&!k.bIfCurrentIndex){k.outerDiv.className="ds-dws-img-container ds-dws-display-none"}k.show()};b.prototype.show=function(){var m=this;m.positionHintDiv();if(m.iImageControlWidth<=0||m.iImageControlHeight<=0){if(m.objImage){m.objImage.style.width="0px"}if(m.objImage){m.objImage.style.height="0px"}return}if(m.objImage.src&&m.objImage.parentNode&&m.objImage.style.display==""){var j,i;if(!m.bSingleMode||(m.bSingleMode&&m.bIfFitWindow&&m.bIfCurrentIndex)){if(m.origImageWidth/m.iImageControlWidth>m.origImageHeight/m.iImageControlHeight){j=m.iImageControlWidth;i=m.origImageHeight*m.iImageControlWidth/m.origImageWidth}else{i=m.iImageControlHeight;j=m.origImageWidth*m.iImageControlHeight/m.origImageHeight}m.positionObjImg(j,i)}else{if(m.bSingleMode&&!m.bIfFitWindow&&m.bIfCurrentIndex){j=m.origImageWidth*m.zoom;i=m.origImageHeight*m.zoom;m.iImageControlWidth=(j>m.imageViewer.ui._userImageViewerWidth?j:m.imageViewer.ui._userImageViewerWidth)-2*m.borderWidth;m.iImageControlHeight=(i>m.imageViewer.ui._userImageViewerHeight?i:m.imageViewer.ui._userImageViewerHeight)-2*m.borderWidth;if(m.iImageControlWidth<0||m.iImageControlHeight<0){return}m.outerDiv.style.width=m.iImageControlWidth+"px";m.outerDiv.style.height=m.iImageControlHeight+"px";m.curImageWidth=j;m.curImageHeight=i;m.imageViewer.ui._showNonFitToWinImgCtrl(m.actaulCentralPoint.x==-1||m.actaulCentralPoint.y==-1,function(){m.positionObjImg(j,i)})}}if(m.imgSelector){var l=(m.iImageControlHeight-i)/2,k=(m.iImageControlWidth-j)/2;m.imgSelector.imgRect.top=l;m.imgSelector.imgRect.left=k;m.imgSelector.imgRect.bottom=l+i-1;m.imgSelector.imgRect.right=k+j-1;m.imgSelector.orgImgInfo.width=m.origImageWidth;m.imgSelector.orgImgInfo.height=m.origImageHeight;m.imgSelector.resizeSelector()}m.outerDiv.style.overflow="visible"}};b.prototype.positionObjImg=function(j,i){var k=this;k.objImage.style.position="absolute";k.objImage.style.top=Math.round((k.iImageControlHeight-i)/2)+"px";k.objImage.style.left=Math.round((k.iImageControlWidth-j)/2)+"px";k.objImage.style.width=parseInt(j)+"px";k.objImage.style.height=parseInt(i)+"px";k.curImageWidth=j;k.curImageHeight=i};b.prototype.attachImage=function(i){var j=this;if(j.imgSelector){j.imgSelector.hide()}j.objImage.style.display="none";j.hintDiv.style.display="block";j.setHintString("Loading ...");j.positionHintDiv();if(j.objImage){j.objImage.onload="";j.objImage.onerror="";j.objImage.src=""}if(j.objImage&&j.objImage.parentNode){j.objImage.setAttribute("onmousedown","");j.objImage.parentNode.removeChild(j.objImage)}j.initObjImg();j.objImage.onload=function(){j.origImageWidth=j.curImageWidth=j._bIe9_10&&this.naturalWidth?this.naturalWidth:this.width;j.origImageHeight=j.curImageHeight=j._bIe9_10&&this.naturalHeight?this.naturalHeight:this.height;if(!this.parentNode){j.outerDiv.appendChild(this)}this.style.display="";j.show();j.hintDiv.style.display="none";j.outerDiv.style.overflow="visible"};j.objImage.onerror=function(){++j.curLoadCount;if(j.curLoadCount>j.MAXLOACOUNT){j.setHintString("Error ocurrs");c.handleImageLoadingError(j.dwsObject,this.src);if(this.parentNode){this.parentNode.removeChild(this)}}else{this.src=[i,"&ts=",h.now()].join("")}};j.curLoadCount=1;j.imageUrl=[i,"&ts=",h.now()].join("");setTimeout(function(){j.objImage.src=[i,"&ts=",h.now()].join("")},0)};b.prototype.positionHintDiv=function(){var l=this,j=h.getElDimensions(l.outerDiv,false),q=j?j.clientWidth:l.outerDiv.clientWidth,k=j?j.clientHeight:l.outerDiv.clientHeight,m=h.getElDimensions(l.hintDiv,false),o=m?m.clientWidth:l.hintDiv.clientWidth,n=m?m.clientHeight:l.hintDiv.clientHeight;var p=(k-n)/2,i=(q-o)/2;if(p<0){p=0}if(i<0){i=0}l.hintDiv.style.top=parseInt(p)+"px";l.hintDiv.style.left=parseInt(i)+"px";l.outerDiv.style.overflow="hidden"};b.prototype.refreshBorder=function(){var i=this;if(i.bSelect){i.outerDiv.style.border=i.selectionBorderWidth+"px solid";i.outerDiv.style.borderColor=h.IntToColorStr(i.selectionBorderColor)}else{i.outerDiv.style.border=i.borderWidth+"px solid";i.outerDiv.style.borderColor=h.IntToColorStr(i.borderColor)}};b.prototype.setSelect=function(i){this.bSelect=i;this.refreshBorder()};b.prototype.setMouseShape=function(i){var j=this;if(j.mouseShape==i){return}j.mouseShape=i;j.outerDiv.style.cursor=j.mouseShape?"pointer":"crosshair"};b.prototype.fireEvent=function(i,j){if(h.isFunction(this[i])){return this[i](j)}return true};b.prototype.finishDrawing=function(i){var j=this;j.bDrawing=false;j.imgSelector.calcActualImgRect();j.imgSelector.clear();if(j.imgSelector.isValidSelector()){j.fireEvent("onImageAreaSelected",{e:i,index:j.imageIndex,imgSelector:j.imgSelector})}};b.prototype.finishDragging=function(){var i=this;i.bDragging=false;i.dragPosition.x=0;i.dragPosition.y=0;i.fireEvent("onImageDraggingFinished")};b.prototype.bindEvents=function(){var l=this;var j=function(q){q=q||window.event;if(h.detectButton(q)!=h.EnumMouseButton.LEFT){return}var p=new Date(),o,r=l.getMapMousePositionToImageCoordinate(q);if(l.lastClick){o=p.getTime()-l.lastClick.getTime()}l.lastClick=p;if(o<500){l.fireEvent("onMouseDoubleClick",{index:l.imageIndex,mouseX:r.x,mouseY:r.y});l.lastClick=false;h.log("MouseDoubleClick")}else{if(q.which?q.which==3:q.button==2){}else{l.fireEvent("onMouseClick",{e:q,index:l.imageIndex,mouseX:r.x,mouseY:r.y})}}};h.addEventListener(l.outerDiv,"click",j);if(!e.bHTML5Edition){h.addEventListener(l.outerDiv,"dblclick",j)}var m=function(o){o=o||window.event;if(h.detectButton(o)!=h.EnumMouseButton.LEFT){return}l.Left=l.outerDiv.clientLeft;l.Top=l.outerDiv.clientTop;var p;if(!l.mouseShape){p=h.DOM.getOffset(o,l,l.outerDiv);l.fireEvent("onImageAreaDeSelected");l.imgSelector.clickedX=p.x;l.imgSelector.clickedY=p.y;l.imgSelector.orgImgInfo.width=l.origImageWidth;l.imgSelector.orgImgInfo.height=l.origImageHeight;l.imgSelector.imgRect.top=l.objImage.offsetTop;l.imgSelector.imgRect.left=l.objImage.offsetLeft;l.imgSelector.imgRect.bottom=l.objImage.offsetTop+l.objImage.offsetHeight-1;l.imgSelector.imgRect.right=l.objImage.offsetLeft+l.objImage.offsetWidth-1;l.bDrawing=true}if(l.mouseShape&&l.bSingleMode&&!l.bIfFitWindow){p=h.DOM.getOffset(o,l,l.imageViewer.ui._userImageContainer);l.dragPosition.x=p.x;l.dragPosition.y=p.y;l.bDragging=true}};h.addEventListener(l.outerDiv,"mousedown",m);var n=function(o){if(!l.imgSelector.elem){l.imgSelector.initElem(l.outerDiv)}l.imgSelector.curX=o.x;l.imgSelector.curY=o.y;l.imgSelector.show()};var i=function(q){var r=l.getMapMousePositionToImageCoordinate(q);l.fireEvent("onMouseMove",{index:l.imageIndex,mouseX:r.x,mouseY:r.y});if(!l.bDrawing&&!l.bDragging){return}q=q||window.event;var s;if(l.bDrawing){s=h.DOM.getOffset(q,l,l.outerDiv);n(s)}else{if(l.bDragging){s=h.DOM.getOffset(q,l,l.imageViewer.ui._userImageContainer);var p=s.x-l.dragPosition.x,o=s.y-l.dragPosition.y;l.fireEvent("onImageDragging",{deltaX:-p,deltaY:-o});l.dragPosition.x=s.x;l.dragPosition.y=s.y}}};h.addEventListener(l.outerDiv,"mousemove",i);var k=function(o){o=o||window.event;if(h.detectButton(o)==h.EnumMouseButton.RIGHT){var p=l.getMapMousePositionToImageCoordinate(o);l.fireEvent("onMouseRightClick",{index:l.imageIndex,mouseX:p.x,mouseY:p.y})}if(h.detectButton(o)!=h.EnumMouseButton.LEFT){return}if(!l.mouseShape&&l.bDrawing){var q=h.DOM.getOffset(o,l,l.outerDiv);n(q);l.finishDrawing(o);if(l.selectionBorderWidth==1&&!(e.bSafari)&&!(e.bFirefox)){l.imgSelector.bNeedResize=false}}if(l.mouseShape&&l.bDragging){l.finishDragging()}};h.addEventListener(l.outerDiv,"mouseup",k);b.prototype.removeEvents=function(){h.removeEventListener(this.outerDiv,"click",j);if(!e.bHTML5Edition){h.removeEventListener(this.outerDiv,"dblclick",j)}h.removeEventListener(this.outerDiv,"mousedown",m);h.removeEventListener(this.outerDiv,"mousemove",i);h.removeEventListener(this.outerDiv,"mouseup",k);this.objImage.setAttribute("onmousedown","")}};b.prototype.getMapMousePositionToImageCoordinate=function(j){j=j||window.event;if(!j){return}var k=this,i=h.DOM.getOffset(j,k,k.outerDiv);return k.imgSelector.MapCurMousePosToImgCoordinate(i.x,i.y)};b.prototype.adjustCentralPointAfterImgSizeChanged=function(l,i){var m=this;if(m.actaulCentralPoint.x===-1||m.actaulCentralPoint.y===-1||!m.bIfCurrentIndex||m.bIfFitWindow||!m.bSingleMode){return}var k=l/m.origImageWidth,j=i/m.origImageHeight;m.actaulCentralPoint.x*=k;m.actaulCentralPoint.y*=j};b.prototype.destroy=function(){var j=this;j.removeEvents();j.imgSelector.destroy();if(j.hintDiv&&j.hintDiv.parentNode){j.hintDiv.parentNode.removeChild(j.hintDiv)}if(j.objImage&&j.objImage.parentNode){j.objImage.parentNode.removeChild(j.objImage)}var i=a.indexOf(j);if(i!=-1){a.splice(i,1)}if(j.outerDiv.parentNode){j.outerDiv.parentNode.removeChild(j.outerDiv)}j.bDestroy=true};b.prototype._invokeMouseUpOutside=function(i){i=i||window.event;var n=this;if(!n.mouseShape&&n.bDrawing){var m=h.DOM.getOffset(i,n,n.outerDiv);if(isNaN(m.x)||isNaN(m.y)){return}var l=h.getElDimensions(n.outerDiv,false),j=l?l.clientWidth:n.outerDiv.clientWidth,k=l?l.clientHeight:n.outerDiv.clientHeight;if(m.x>=0&&m.x<=j&&m.y>=0&&m.y<=k){return}n.finishDrawing(i)}if(n.mouseShape&&n.bDragging){n.finishDragging()}};h.addEventListener(document,"mouseup",function(j){j=j||window.event;for(var k=0;k<a.length;k++){a[k]._invokeMouseUpOutside(j)}});f.ImageControl=b})(dynamsoft);(function(b){function a(d,c){var e=this;e.imgCtrl=d;e.imageViewer=c;e.clickedX=0;e.clickedY=0;e.curX=0;e.curY=0;e.orgImgInfo={width:0,height:0};e.imgRect={left:0,top:0,right:0,bottom:0};e.actualImgRect={left:0,top:0,right:0,bottom:0,toString:function(){return"left: "+this.left+". top: "+this.top+". right: "+this.right+". bottom: "+this.bottom}};e.userRect={left:0,top:0,right:0,bottom:0,toString:function(){return"left: "+this.left+". top: "+this.top+". right: "+this.right+". bottom: "+this.bottom}};e.intersectionRect={left:0,top:0,right:0,bottom:0,toString:function(){return"left: "+this.left+". top: "+this.top+". right: "+this.right+". bottom: "+this.bottom}};e.elem=null;e.parentElem=null;e.bNeedResize=true;e.bDestroy=false}a.prototype.initElem=function(c){var d=this;d.removeElem();d.elem=document.createElement("div");d.elem.className="ds-dws-img-selector";d.elem.style.display="none";if(c){d.parentElem=c;c.appendChild(d.elem)}};a.prototype.clear=function(){var c=this;c.clickedX=0;c.clickedY=0;c.curX=0;c.curY=0};a.prototype.clearRect=function(){var c=function(e){e.top=0;e.left=0;e.right=0;e.bottom=0},d=this;c(d.userRect);c(d.intersectionRect);c(d.actualImgRect)};a.prototype.removeElem=function(){var c=this;if(c.elem&&c.parentElem){c.parentElem.removeChild(c.elem);c.elem=null}};a.prototype.isValidSelector=function(){var g=this,d=g.intersectionRect.right-g.intersectionRect.left,f=g.intersectionRect.bottom-g.intersectionRect.top,c=g.actualImgRect.right-g.actualImgRect.left,e=g.actualImgRect.bottom-g.actualImgRect.top;return d>0&&f>0&&c>0&&e>0};a.prototype.show=function(){var c=this;c.calcUserRect();c.calcIntersectionRect();b.log("UserRect: "+c.userRect.toString());b.log("IntersectionRect: "+c.intersectionRect.toString());if(!(c.elem&&(c.intersectionRect.right-c.intersectionRect.left>0)&&(c.intersectionRect.bottom-c.intersectionRect.top>0))){c.hide();return}c.positionSelector()};a.prototype.positionSelector=function(){var g=this;g.intersectionRect.top=g.intersectionRect.top<0?0:g.intersectionRect.top;g.intersectionRect.top=(g.intersectionRect.top>g.imgRect.top)?g.intersectionRect.top:g.imgRect.top;g.intersectionRect.left=g.intersectionRect.left<0?0:g.intersectionRect.left;g.intersectionRect.left=(g.intersectionRect.left>g.imgRect.left)?g.intersectionRect.left:g.imgRect.left;if(g.intersectionRect.right>g.imgRect.right){g.intersectionRect.right=g.imgRect.right}if(g.intersectionRect.bottom>g.imgRect.bottom){g.intersectionRect.bottom=g.imgRect.bottom}var f=g.intersectionRect.top,e=g.intersectionRect.left,d=g.intersectionRect.right-g.intersectionRect.left,c=g.intersectionRect.bottom-g.intersectionRect.top;if(!g.elem){return}if(d>0&&c>0){g.elem.style.top=f+"px";g.elem.style.left=e+"px";g.elem.style.width=d+"px";g.elem.style.height=c+"px";g.elem.style.display="block"}else{g.hide()}};a.prototype.hide=function(){if(!this.elem){return}this.elem.style.display="none"};a.prototype.calcUserRect=function(){var f=this,e=0;if(f.curX<f.clickedX){f.curX+=1}if(f.curY<f.clickedY){f.curY+=1}var d=Math.abs(f.curX-f.clickedX),c=Math.abs(f.curY-f.clickedY);f.userRect.top=(f.curY<f.clickedY)?f.curY:f.clickedY;f.userRect.left=(f.curX<f.clickedX)?f.curX:f.clickedX;f.userRect.right=f.userRect.left+d;f.userRect.bottom=f.userRect.top+c;e=f.imageViewer.ui.getSelectionRectAspectRatio();if(e!=0){var d=f.userRect.right-f.userRect.left,c;if(f.curY>f.clickedY){c=d/e;f.userRect.bottom=f.userRect.top+c}else{c=d/e;f.userRect.top=f.userRect.bottom-c}}};a.prototype.calcIntersectionRect=function(){var c=this;c.intersectionRect.left=Math.max(c.userRect.left,c.imgRect.left);c.intersectionRect.right=Math.min(c.userRect.right,c.imgRect.right);c.intersectionRect.top=Math.max(c.userRect.top,c.imgRect.top);c.intersectionRect.bottom=Math.min(c.userRect.bottom,c.imgRect.bottom)};a.prototype.calcActualImgRect=function(){var c=this;if(c.intersectionRect.right<=c.intersectionRect.left||c.intersectionRect.bottom<=this.intersectionRect.top){c.clearRect();return}c.actualImgRect.top=((c.intersectionRect.top-c.imgRect.top+1)/(c.imgRect.bottom-c.imgRect.top+1)*c.orgImgInfo.height);if(c.intersectionRect.top===c.imgRect.top){c.actualImgRect.top=0}c.actualImgRect.top=c.actualImgRect.top<0?0:c.actualImgRect.top;c.actualImgRect.left=((c.intersectionRect.left-c.imgRect.left+1)/(c.imgRect.right-c.imgRect.left+1)*c.orgImgInfo.width);if(c.intersectionRect.left===c.imgRect.left){c.actualImgRect.left=0}c.actualImgRect.left=c.actualImgRect.left<0?0:c.actualImgRect.left;c.actualImgRect.bottom=((c.intersectionRect.bottom-c.intersectionRect.top+1)/(c.imgRect.bottom-c.imgRect.top+1)*c.orgImgInfo.height+c.actualImgRect.top);c.actualImgRect.bottom=c.actualImgRect.bottom>c.orgImgInfo.height?c.orgImgInfo.height:c.actualImgRect.bottom;c.actualImgRect.right=((c.intersectionRect.right-c.intersectionRect.left+1)/(c.imgRect.right-c.imgRect.left+1)*c.orgImgInfo.width+c.actualImgRect.left);c.actualImgRect.right=c.actualImgRect.right>c.orgImgInfo.width?c.orgImgInfo.width:c.actualImgRect.right;c.actualImgRect.top=Math.round(c.actualImgRect.top);c.actualImgRect.left=Math.round(c.actualImgRect.left);c.actualImgRect.bottom=Math.round(c.actualImgRect.bottom);c.actualImgRect.right=Math.round(c.actualImgRect.right);if(c.actualImgRect.top==c.orgImgInfo.height){--c.actualImgRect.top}if(c.actualImgRect.left==c.orgImgInfo.width){--c.actualImgRect.left}if(c.actualImgRect.bottom==c.actualImgRect.top){++c.actualImgRect.bottom}if(c.actualImgRect.right==c.actualImgRect.left){++c.actualImgRect.right}};a.prototype.calcActualImgRectAfterRotate=function(j){var i=this,c=i.actualImgRect.right-i.actualImgRect.left,f=i.actualImgRect.bottom-i.actualImgRect.top;if(c<=0||f<=0){return}var g=0,d=0,h={x:0,y:0};if(j===b._enumImgEditType.RotateLeft||j===b._enumImgEditType.RotateRight){g=i.actualImgRect.bottom-i.actualImgRect.top;d=i.actualImgRect.right-i.actualImgRect.left}else{if(j===b._enumImgEditType.Flip||j===b._enumImgEditType.Mirror){g=i.actualImgRect.right-i.actualImgRect.left;d=i.actualImgRect.bottom-i.actualImgRect.top}}switch(j){case b._enumImgEditType.RotateLeft:h.x=i.actualImgRect.right;h.y=i.actualImgRect.top;i.actualImgRect.top=i.orgImgInfo.width-h.x;i.actualImgRect.left=h.y;break;case b._enumImgEditType.RotateRight:h.x=i.actualImgRect.left;h.y=i.actualImgRect.bottom;i.actualImgRect.top=h.x;i.actualImgRect.left=i.orgImgInfo.height-h.y;break;case b._enumImgEditType.Flip:h.y=i.actualImgRect.bottom;i.actualImgRect.top=i.orgImgInfo.height-h.y;break;case b._enumImgEditType.Mirror:h.x=i.actualImgRect.right;i.actualImgRect.left=i.orgImgInfo.width-h.x;break}i.actualImgRect.bottom=i.actualImgRect.top+d;i.actualImgRect.right=i.actualImgRect.left+g;if(j===b._enumImgEditType.RotateLeft||j===b._enumImgEditType.RotateRight){var e=i.orgImgInfo.width;i.orgImgInfo.width=i.orgImgInfo.height;i.orgImgInfo.height=e}};a.prototype.isRectIntersected=function(h,e,k,i,f,c,j,g){var d={};d.left=Math.max(h,f);d.right=Math.min(k,j);d.top=Math.max(e,c);d.bottom=Math.min(i,g);return(d.right-d.left>0)&&(d.bottom-d.top>0)};a.prototype.calcActualImgRectAfterCut=function(f,e,d,c){var g=this;if(g.isRectIntersected(f,e,d,c,g.actualImgRect.left,g.actualImgRect.top,g.actualImgRect.right,g.actualImgRect.bottom)){g.actualImgRect.left=0;g.actualImgRect.right=0;g.actualImgRect.top=0;g.actualImgRect.bottom=0}};a.prototype.calcActualImgRectAfterCrop=function(f,e,d,c){var g=this;if(f<=g.actualImgRect.left&&e<=g.actualImgRect.top&&d>=g.actualImgRect.right&&c>=g.actualImgRect.bottom){g.actualImgRect.left-=f;g.actualImgRect.right-=f;g.actualImgRect.top-=e;g.actualImgRect.bottom-=e}else{g.actualImgRect.left=0;g.actualImgRect.right=0;g.actualImgRect.top=0;g.actualImgRect.bottom=0}};a.prototype.calcActualImgRectAfterChangeSize=function(f,c){var g=this,e=f/g.orgImgInfo.width,d=c/g.orgImgInfo.height;g.actualImgRect.top*=d;g.actualImgRect.bottom*=d;g.actualImgRect.left*=e;g.actualImgRect.right*=e};a.prototype.resizeSelector=function(){var c=this;if(!c.bNeedResize){c.bNeedResize=true;return}if(c.actualImgRect.right<=c.actualImgRect.left||c.actualImgRect.bottom<=this.actualImgRect.top){c.clearRect();return}c.intersectionRect.left=parseInt(c.actualImgRect.left/c.orgImgInfo.width*(c.imgRect.right-c.imgRect.left)+c.imgRect.left);c.intersectionRect.top=parseInt(c.actualImgRect.top/c.orgImgInfo.height*(c.imgRect.bottom-c.imgRect.top)+c.imgRect.top);c.intersectionRect.right=parseInt((c.actualImgRect.right-c.actualImgRect.left)/c.orgImgInfo.width*(c.imgRect.right-c.imgRect.left)+c.intersectionRect.left);c.intersectionRect.bottom=parseInt((c.actualImgRect.bottom-c.actualImgRect.top)/c.orgImgInfo.height*(c.imgRect.bottom-c.imgRect.top)+c.intersectionRect.top);c.positionSelector()};a.prototype.MapCurMousePosToImgCoordinate=function(g,f){var i=this,e={top:-1,left:-1,bottom:-1,right:-1},d={top:i.imgRect.top,left:i.imgRect.left,right:g,bottom:f},h=d.right-d.left,c=d.bottom-d.top;if(h<0||c<0||h>i.imgRect.right-i.imgRect.left||c>i.imgRect.bottom-i.imgRect.top){return{x:e.right,y:e.bottom}}e.top=((d.top-i.imgRect.top+1)/(i.imgRect.bottom-i.imgRect.top+1)*i.orgImgInfo.height);e.top=e.top<0?0:e.top;e.left=((d.left-i.imgRect.left+1)/(i.imgRect.right-i.imgRect.left+1)*i.orgImgInfo.width);e.left=e.left<0?0:e.left;e.bottom=((d.bottom-d.top+1)/(i.imgRect.bottom-i.imgRect.top+1)*i.orgImgInfo.height+e.top);if(parseInt(c)===0){e.bottom=0}e.bottom=e.bottom>i.orgImgInfo.height?i.orgImgInfo.height:e.bottom;e.right=((d.right-d.left+1)/(i.imgRect.right-i.imgRect.left+1)*i.orgImgInfo.width+e.left);if(parseInt(h)===0){e.right=0}e.right=e.right>i.orgImgInfo.width?i.orgImgInfo.width:e.right;e.bottom=parseInt(e.bottom)>i.orgImgInfo.height?i.orgImgInfo.height:parseInt(e.bottom);e.right=parseInt(e.right)>i.orgImgInfo.width?i.orgImgInfo.width:parseInt(e.right);return{x:e.right,y:e.bottom}};a.prototype.destroy=function(){this.removeElem();this.bDestroy=true};b.sdk.ImageSelector=a})(dynamsoft.lib);(function(i){var m=i.lib,l=m.sdk,x=m.detect,p=i.dcsEnv,d=i.navInfo;var s={POST:0,PUT:1},b={BMP:0,JPEG:1,TIFF:2,PNG:3,PDF:4},h={BINARY:0,BASE64:1},v={AUTO:0,RLE:2,FAX3:3,T4:3,FAX4:4,T6:4,LZW:5,JPEG:7,PACKBITS:32773},j="get",w="set",t="iValue",y=["HTTPFormFields","JPEGQuality","TIFFCompressionType","HTTPResponse","HTTPHeader"],o=[],c=0,k=100;function e(A,z){var B=this;B._dwsObject=A;B._imgViewer=z;B._bRemoved=false;B._bDestoryed=false;B.EnumHttpMethod=s;B.EnumImageType=b;B.EnumUploadDataFormat=h;B.EnumTIFFCompressionType=v;B.pdfinfo=new l.PdfInfo(B);B._JPEGQuality=80;B._TIFFCompressionType=v.AUTO;B._HTTPFormFields={};B._HTTPHeader={};B._HTTPResponse=null;B._bPropertiesChanged=!0;B._asyncDownloadErrCodeErrStrings={};B._asyncDownloadDocumentErrCodeErrStrings={};B._asyncUploadErrCodeErrStrings={};B._asyncTaskId=0}e.prototype._getPropNumInObj=function(B){var A=0;if(!B||!m.isObject(B)){return A}for(var z in B){A++}return A};e.prototype._isHandlingAsyncDownloadOperation=function(){return this._getPropNumInObj(this._asyncDownloadErrCodeErrStrings)>0||this._getPropNumInObj(this._asyncDownloadDocumentErrCodeErrStrings)>0};e.prototype._isHandlingAsyncOperation=function(){return this._getPropNumInObj(this._asyncDownloadErrCodeErrStrings)>0||this._getPropNumInObj(this._asyncUploadErrCodeErrStrings)>0||this._getPropNumInObj(this._asyncDownloadDocumentErrCodeErrStrings)>0};e.prototype._validateImgIsHandlingAsyncOperation=function(B){var z=this._dwsObject;var A=null;if(this._getPropNumInObj(this._asyncDownloadErrCodeErrStrings)>0){A="httpDownloadAsync"}else{if(this._getPropNumInObj(this._asyncUploadErrCodeErrStrings)>0){A="httpUploadAsync"}else{if(this._getPropNumInObj(this._asyncDownloadDocumentErrCodeErrStrings)>0){A="httpDownloadDocumentAsync"}}}if(A){z._setErrCodeErrString(m.errorInfo.getAsyncTaskNotCompletedCode(),m.errorInfo.getAsyncTaskNotCompletedString(A))}else{z._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString())}return !!A};m.each(y,function(z){o.push(j+z);o.push(w+z)});(function(){var z=[];for(var A=0;A<o.length;++A){if(o[A]!=(w+"HTTPResponse")){z.push(o[A])}}o=z})();m.each(o,function(z){e.prototype[z]=function(){var F=this,A=F._dwsObject;if(F._bDestoryed){return false}if(!A._validateDivDom(F._imgViewer.ui._getImgViewerId(),!0)){return(z.indexOf(j)===0)?undefined:false}if(!A._validateImgViewerExist(F._imgViewer.ui._getImgViewerId(),F._bRemoved)){return(z.indexOf(j)===0)?undefined:false}if(z.indexOf(j)===0){if(!A._validateParamNum(arguments,0)){return null}}else{if(!A._validateParamNum(arguments,1)){return false}if(z.indexOf("JPEGQuality")!==-1){if(!A._validateNumberType(t,arguments[0])){return false}arguments[0]=Math.round(arguments[0]);if(!A._validateValue(t,arguments[0],[c,k],true)){return false}}else{if(z.indexOf("TIFFCompressionType")!==-1){if(!A._validateNumberType(t,arguments[0])||!F._isValidValueInEnum(v,arguments[0],t)){return false}}else{if(z.indexOf("HTTPFormFields")!==-1){if(!dynamsoft.lib.isObject(arguments[0])){A._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString(t));return false}var C="";try{C=m.stringify(arguments[0])}catch(E){C=false}if(!C){A._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString(t));return false}}else{if(z.indexOf("HTTPHeader")!==-1){if(!dynamsoft.lib.isObject(arguments[0])){A._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString(t));return false}var C="";try{C=m.stringify(arguments[0])}catch(E){C=false}if(!C){A._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString(t));return false}}}}}}var B=-1,D="";for(B=0;B<y.length;B++){if(z.indexOf(y[B])!==-1){D=y[B];break}}A._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString());if(z.indexOf(j)===0){return F["_"+D]}else{if((z.indexOf("HTTPFormFields")===-1||z.indexOf("HTTPHeader")===-1)&&F["_"+D]!==arguments[0]){F._bPropertiesChanged=!0}F["_"+D]=arguments[0];return true}}});e.prototype._isValidValueInEnum=function(B,D,C){if(!m.isNumber(D)){this._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString(C));return false}var A,z=!1,E=this;for(A in B){if(B[A]===D){z=!0;break}}if(z){E._dwsObject._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString())}else{E._dwsObject._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString(C))}return z};e.prototype._getValidatedIndices=function(C){var z=null,B=this._imgViewer.image;if(!m.isArray(C)){return z}if(C.length===0){return z}for(var A=0;A<C.length;A++){if(!m.isNumber(C[A])){return z}C[A]=Math.round(C[A]);if(C[A]<0||C[A]>B._getCount()-1){return z}}z=C;return z};e.prototype._sendPropertiesToBackend=function(){var C=this,A=C._dwsObject,B={session:x.sessionId,object:A._dwsObjectId,method:"SetImageIoProperties",parameter:[C._imgViewer._imgViewerId,C._JPEGQuality,C._TIFFCompressionType,C.pdfinfo._getJsonObj()]};var z=x.postSyncCommand(A,m.stringify(B),null,null);C._bPropertiesChanged=!1;return z};e.prototype.convertToBase64=function(G,A){var D=this,F=D._dwsObject,C=null;if(D._bDestoryed){return false}if(!F._validateDivDom(D._imgViewer.ui._getImgViewerId(),!0)){return C}if(!F._validateImgViewerExist(D._imgViewer.ui._getImgViewerId(),D._bRemoved)){return C}if(D._validateImgIsHandlingAsyncOperation()){return C}if(!F._validateParamNum(arguments,2)||!F._validateArrayType("indices",G)||!F._validateNumberType("imageType",A)){return C}G=D._getValidatedIndices(G);if(G===null){D._dwsObject._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("indices"));return C}if(!D._isValidValueInEnum(b,A,"imageType")){return C}if(G.length>1&&(A!==b.TIFF&&A!=b.PDF)){D._dwsObject._setErrCodeErrString(m.errorInfo.getMultipageNotSupportedCode(),m.errorInfo.getMultipageNotSupportedString());return C}if(D._bPropertiesChanged||A==b.PDF&&(D.pdfinfo._pdfCreationDate===null||D.pdfinfo._pdfModifiedDate===null)){var z=D._sendPropertiesToBackend();if(!z){return C}}var B={session:x.sessionId,object:F._dwsObjectId,method:"ConvertToBase64",parameter:[D._imgViewer._imgViewerId,G,A]},E=function(I){if(m.isArray(I.result)&&I.result.length===1){C=I.result[0]}else{C=""}},H=!1;H=x.postSyncCommand(F,m.stringify(B),E,null);if(H){F._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString())}return C};e.prototype.copyToClipboard=function(F,B,I,K,z){var E=this,J=E._dwsObject,A=E._imgViewer.image,D=E._imgViewer.ui,M=!1;if(E._bDestoryed){return M}if(!J._validateDivDom(D._getImgViewerId(),!0)){return M}if(!J._validateImgViewerExist(D._getImgViewerId(),E._bRemoved)){return M}if(E._validateImgIsHandlingAsyncOperation()){return M}if(arguments.length<1||arguments.length>1&&arguments.length<5){J._setErrCodeErrString(m.errorInfo.getParameterNumberUnmatchedCode(),m.errorInfo.getParameterNumberUnmatchedString(!0));return M}if(arguments.length>5){J._setErrCodeErrString(m.errorInfo.getParameterNumberUnmatchedCode(),m.errorInfo.getParameterNumberUnmatchedString(!1));return M}if(!J._validateNumberType("index",F)){return M}F=Math.round(F);if(F<0||F>A._getCount()-1){J._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("index"));return M}var L=A._getImageInfo(F);if(E._dwsObject.getErrorCode()!==m.errorInfo.getOkCode()){return M}var H=L?L._width:0,G=L?L._height:0;B=(B===undefined)?0:B;I=(I===undefined)?0:I;K=(K===undefined)?H:K;z=(z===undefined)?G:z;if(!J._validateNumberType("left",B)||!J._validateNumberType("top",I)||!J._validateNumberType("right",K)||!J._validateNumberType("bottom",z)){return M}B=Math.round(B);I=Math.round(I);K=Math.round(K);z=Math.round(z);if(K<=0){J._setErrCodeErrString(m.errorInfo.getValueOutOfRangeCode(),m.errorInfo.getValueOutOfRangeString("right"));return M}if(z<=0){J._setErrCodeErrString(m.errorInfo.getValueOutOfRangeCode(),m.errorInfo.getValueOutOfRangeString("bottom"));return M}if(B<0){B=0}if(I<0){I=0}if(K>H){K=H}if(z>G){z=G}if(K<=B){J._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("right"));return M}if(z<=I){J._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("bottom"));return M}var C={session:x.sessionId,object:J._dwsObjectId,method:"CopyToClipboard",parameter:[E._imgViewer._imgViewerId,F,B,I,K,z]};M=x.postSyncCommand(J,m.stringify(C),null,null);if(M){J._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString())}return M};e.prototype.loadFromClipboard=function(){var E=this,B=E._dwsObject,C=E._imgViewer.ui,A=!1;if(E._bDestoryed){return A}if(!B._validateDivDom(C._getImgViewerId(),!0)){return A}if(!B._validateImgViewerExist(C._getImgViewerId(),E._bRemoved)){return A}if(E._validateImgIsHandlingAsyncOperation()){return A}if(!B._validateParamNum(arguments,0)){return A}var D={session:x.sessionId,object:B._dwsObjectId,method:"LoadFromClipboard",parameter:[p._getProductKey(),E._imgViewer._imgViewerId]},z=function(){var F=B.getErrorCode(),G=B.getErrorString();C._addImageControl();B._setErrCodeErrString(F,G)};A=x.postSyncCommand(B,m.stringify(D),z,null);if(B.getErrorCode()===m.errorInfo.getDataFormatInvalidCode()){B._setErrCodeErrString(m.errorInfo.getDataFormatInvalidCode(),m.errorInfo.getDataFormatInvalidString(!1))}return A};var g="httpDownload",r="httpDownloadAsync";m.each([g,r],function(z){e.prototype[z]=function(){var D=this,K=D._dwsObject,E=D._imgViewer.ui,L=!1,C=m.errorInfo.getOkCode(),J=m.errorInfo.getOkString(),M=function(P,O){C=P===undefined?K.getErrorCode():P;J=O===undefined?K.getErrorString():O};if(D._bDestoryed){return !1}K._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString());if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateDivDom(E._getImgViewerId(),!0)){if(z===g){return L}else{M()}}if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateImgViewerExist(E._getImgViewerId(),D._bRemoved)){if(z===g){return L}else{M()}}if(z===g){if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateParamNum(arguments,1)){return L}}else{if(K.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length<3){C=m.errorInfo.getParameterNumberUnmatchedCode();J=m.errorInfo.getParameterNumberUnmatchedString(!0);K._setErrCodeErrString(C,J)}if(K.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length>4){C=m.errorInfo.getParameterNumberUnmatchedCode();J=m.errorInfo.getParameterNumberUnmatchedString(!1);K._setErrCodeErrString(C,J)}}var A=arguments[0],H=arguments[1],N=arguments[2],G=arguments[3]===undefined?null:arguments[3];if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateStringType("url",A)){if(z===g){return L}else{M()}}if(z===r){if(K.getErrorCode()===m.errorInfo.getOkCode()&&H!==null&&!m.isFunction(H)){K._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpDownloadSuccess"));M()}if(K.getErrorCode()===m.errorInfo.getOkCode()&&N!==null&&!m.isFunction(N)){K._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpDownloadFailure"))}if(K.getErrorCode()===m.errorInfo.getOkCode()&&G!==null&&!m.isFunction(G)){K._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpDownloading"));M()}}if(z===r&&K.getErrorCode()!==m.errorInfo.getOkCode()){if(m.isFunction(N)){setTimeout(function(){N(C,J,"")},0)}return null}if(A.trim().length===0){A="invalidUrl"}if(!m.startsWith(A,"http://")&&!m.startsWith(A,"https://")){A=(d.bSSL?"https://":"http://")+A}var F=m.now();if(z===r){D._asyncDownloadErrCodeErrStrings[F]={ec:m.errorInfo.getOkCode(),es:m.errorInfo.getOkString()}}var B=function(Q,S,P){var T=[x.preUrl,x.portInfo.curPort,"/",p._getVersionStrForCommand(),"/appendImageFromBytes?","session=",x.sessionId,"&object=",K._dwsObjectId,"&imageviewer=",D._imgViewer._imgViewerId,"&productkey=",p._getProductKey(),"&mode=","image","&ts=",m.now()].join(""),R=function(ac,aa,ae){if(z===g){L=K.getErrorCode()===m.errorInfo.getOkCode()}else{if(D._asyncDownloadErrCodeErrStrings[F]){K._setErrCodeErrString(D._asyncDownloadErrCodeErrStrings[F].ec,D._asyncDownloadErrCodeErrStrings[F].es)}if(K.getErrorCode()===m.errorInfo.getOkCode()){if(m.isFunction(H)){setTimeout(function(){H()},0)}}else{M();if(m.isFunction(N)){setTimeout(function(){N(C,J,"")},0)}}}if(z===r){delete D._asyncDownloadErrCodeErrStrings[F]}var ab=K.getErrorCode(),V=K.getErrorString();var X=0,U,Y=D._imgViewer.image._getIndex(),Z=D._imgViewer.image._getSelectedIndices().slice();if(ac&&m.isArray(ac.result)&&m.isNumber(ac.result[2])){X=ac.result[2]}for(U=0;U<X;U++){E._addImageControl()}var W=D._imgViewer.image._getIndex(),ad=[];if(X>0&&W>Y){for(U=0;U<X;U++){ad.push(W-U)}ad.sort(function(ag,af){return ag-af});setTimeout(function(){D._imgViewer.image._innerSetIndexInfo(Y,Z,W,ad,!D._imgViewer.ui._bSingleMode,true)},200)}K._setErrCodeErrString(ab,V)},O=function(W,V,U){if((z===r&&D._asyncDownloadErrCodeErrStrings[F]&&D._asyncDownloadErrCodeErrStrings[F].ec===m.errorInfo.getDataFormatInvalidCode())||(z!==r&&K.getErrorCode()===m.errorInfo.getDataFormatInvalidCode())){K._setErrCodeErrString(m.errorInfo.getDataFormatInvalidCode(),m.errorInfo.getDataFormatInvalidString(!0))}if(z===g){L=!1}else{if(D._asyncDownloadErrCodeErrStrings[F]&&D._asyncDownloadErrCodeErrStrings[F].ec!==m.errorInfo.getDataFormatInvalidCode()){K._setErrCodeErrString(D._asyncDownloadErrCodeErrStrings[F].ec,D._asyncDownloadErrCodeErrStrings[F].es)}M();if(m.isFunction(N)){setTimeout(function(){N(C,J,"")},0)}}if(z===r){delete D._asyncDownloadErrCodeErrStrings[F]}};D._HTTPResponse="";if(z===r){D._asyncDownloadErrCodeErrStrings[F]={ec:m.errorInfo.getOkCode(),es:m.errorInfo.getOkString()}}D._sendImgDataToService(T,Q,z===r,R,O,F)},I=function(R,S,P){D._HTTPResponse=R?R:"";if(d.bIE&&parseInt(d.strBrowserVersion)<10){D._HTTPResponse=P.nativeXhr.responseText}var O=0;try{O=P.nativeXhr.status}catch(Q){O=0}if(!S||S.indexOf(m.ajax._strOpenErr)!==-1||S.indexOf(m.ajax._strSendErr)!==-1||d.bIE&&S.toLowerCase().indexOf("unknown")!==-1){K._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("url"))}else{K._setErrCodeErrString(m.errorInfo.getHttpErrorCode(),m.errorInfo.getHttpErrorString(O))}if(z===g){L=!1}else{M();if(m.isFunction(N)){setTimeout(function(){N(C,J,D._HTTPResponse)},0)}}if(z===r){delete D._asyncDownloadErrCodeErrStrings[F]}};D._download(A,z===r,B,I,G);if(z===g){return L}}});var u="httpDownloadDocument",a="httpDownloadDocumentAsync";m.each([u,a],function(z){e.prototype[z]=function(){var D=this,K=D._dwsObject,E=D._imgViewer.ui,L=!1,C=m.errorInfo.getOkCode(),J=m.errorInfo.getOkString(),M=function(P,O){C=P===undefined?K.getErrorCode():P;J=O===undefined?K.getErrorString():O};if(D._bDestoryed){return !1}K._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString());if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateDivDom(E._getImgViewerId(),!0)){if(z===u){return L}else{M()}}if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateImgViewerExist(E._getImgViewerId(),D._bRemoved)){if(z===u){return L}else{M()}}if(z===u){if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateParamNum(arguments,1)){return L}}else{if(K.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length<3){C=m.errorInfo.getParameterNumberUnmatchedCode();J=m.errorInfo.getParameterNumberUnmatchedString(!0);K._setErrCodeErrString(C,J)}if(K.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length>4){C=m.errorInfo.getParameterNumberUnmatchedCode();J=m.errorInfo.getParameterNumberUnmatchedString(!1);K._setErrCodeErrString(C,J)}}var A=arguments[0],H=arguments[1],N=arguments[2],G=arguments[3]===undefined?null:arguments[3];if(K.getErrorCode()===m.errorInfo.getOkCode()&&!K._validateStringType("url",A)){if(z===u){return L}else{M()}}if(z===a){if(K.getErrorCode()===m.errorInfo.getOkCode()&&H!==null&&!m.isFunction(H)){K._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpDownloadSuccess"));M()}if(K.getErrorCode()===m.errorInfo.getOkCode()&&N!==null&&!m.isFunction(N)){K._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpDownloadFailure"))}if(K.getErrorCode()===m.errorInfo.getOkCode()&&G!==null&&!m.isFunction(G)){K._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpDownloading"));M()}}if(z===a&&K.getErrorCode()!==m.errorInfo.getOkCode()){if(m.isFunction(N)){setTimeout(function(){N(C,J,"")},0)}return null}if(A.trim().length===0){A="invalidUrl"}if(!m.startsWith(A,"http://")&&!m.startsWith(A,"https://")){A=(d.bSSL?"https://":"http://")+A}var F=m.now();if(z===a){D._asyncDownloadDocumentErrCodeErrStrings[F]={ec:m.errorInfo.getOkCode(),es:m.errorInfo.getOkString()}}var B=function(Q,S,P){var T=[x.preUrl,x.portInfo.curPort,"/",p._getVersionStrForCommand(),"/appendImageFromBytes?","session=",x.sessionId,"&object=",K._dwsObjectId,"&imageviewer=",D._imgViewer._imgViewerId,"&productkey=",p._getProductKey(),"&mode=","document","&ts=",m.now()].join(""),R=function(ac,aa,ae){if(z===u){L=K.getErrorCode()===m.errorInfo.getOkCode()}else{if(D._asyncDownloadDocumentErrCodeErrStrings[F]){K._setErrCodeErrString(D._asyncDownloadDocumentErrCodeErrStrings[F].ec,D._asyncDownloadDocumentErrCodeErrStrings[F].es)}if(K.getErrorCode()===m.errorInfo.getOkCode()){if(m.isFunction(H)){setTimeout(function(){H()},0)}}else{M();if(m.isFunction(N)){setTimeout(function(){N(C,J,"")},0)}}}if(z===a){delete D._asyncDownloadDocumentErrCodeErrStrings[F]}var ab=K.getErrorCode(),V=K.getErrorString();var X=0,U,Y=D._imgViewer.image._getIndex(),Z=D._imgViewer.image._getSelectedIndices().slice();if(ac&&m.isArray(ac.result)&&m.isNumber(ac.result[2])){X=ac.result[2]}for(U=0;U<X;U++){E._addImageControl()}var W=D._imgViewer.image._getIndex(),ad=[];if(X>0&&W>Y){for(U=0;U<X;U++){ad.push(W-U)}ad.sort(function(ag,af){return ag-af});setTimeout(function(){D._imgViewer.image._innerSetIndexInfo(Y,Z,W,ad,!D._imgViewer.ui._bSingleMode,true)},200)}K._setErrCodeErrString(ab,V)},O=function(W,V,U){if((z===a&&D._asyncDownloadDocumentErrCodeErrStrings[F]&&D._asyncDownloadDocumentErrCodeErrStrings[F].ec===m.errorInfo.getDataFormatInvalidCode())||(z!==a&&K.getErrorCode()===m.errorInfo.getDataFormatInvalidCode())){K._setErrCodeErrString(m.errorInfo.getDataFormatInvalidCode(),m.errorInfo.getDataFormatInvalidString(!0))}if(z===u){L=!1}else{if(D._asyncDownloadDocumentErrCodeErrStrings[F]&&D._asyncDownloadDocumentErrCodeErrStrings[F].ec!==m.errorInfo.getDataFormatInvalidCode()){K._setErrCodeErrString(D._asyncDownloadDocumentErrCodeErrStrings[F].ec,D._asyncDownloadDocumentErrCodeErrStrings[F].es)}M();if(m.isFunction(N)){setTimeout(function(){N(C,J,"")},0)}}if(z===a){delete D._asyncDownloadDocumentErrCodeErrStrings[F]}};D._HTTPResponse="";if(z===a){D._asyncDownloadDocumentErrCodeErrStrings[F]={ec:m.errorInfo.getOkCode(),es:m.errorInfo.getOkString()}}D._sendImgDataToService(T,Q,z===a,R,O,F,"document")},I=function(R,S,P){D._HTTPResponse=R?R:"";if(d.bIE&&parseInt(d.strBrowserVersion)<10){D._HTTPResponse=P.nativeXhr.responseText}var O=0;try{O=P.nativeXhr.status}catch(Q){O=0}if(!S||S.indexOf(m.ajax._strOpenErr)!==-1||S.indexOf(m.ajax._strSendErr)!==-1||d.bIE&&S.toLowerCase().indexOf("unknown")!==-1){K._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("url"))}else{K._setErrCodeErrString(m.errorInfo.getHttpErrorCode(),m.errorInfo.getHttpErrorString(O))}if(z===u){L=!1}else{M();if(m.isFunction(N)){setTimeout(function(){N(C,J,D._HTTPResponse)},0)}}if(z===a){delete D._asyncDownloadDocumentErrCodeErrStrings[F]}};D._download(A,z===a,B,I,G);if(z===u){return L}}});e.prototype._download=function(A,C,G,B,D){var z=-1,F=C&&m.isFunction(D)?function(J,L){var K=(J.total===0)?100:Math.round(J.loaded*100/J.total),I;if(z!==K){I=D(K)}z=K;if(I===true){L.abort()}}:false,H=C&&m.isFunction(D)?function(I,J){if(!I||d.bIE&&parseInt(d.strBrowserVersion)<=9){return null}m.addEventListener(I,"progress",function(K){delete (K.totalSize);delete (K.position);F(K,I)})}:!1,E={beforeSend:H,method:"GET",headers:this._HTTPHeader,url:A,dataType:"blob",onSuccess:G,onError:B,async:C};if(C){if(d.bIE&&parseInt(d.strBrowserVersion)<10){E.contentType="text/plain; charset=x-user-defined";E.mimeType="text/plain; charset=x-user-defined";E.headers={"Accept-Charset":"x-user-defined"}}else{E.xhrFields={responseType:d.bSafari?"arraybuffer":"blob"};E.onError=function(M,O,J){if(d.bSafari){var N;try{N=String.fromCharCode.apply(null,new Uint8Array(M))}catch(K){N=""}B(N,O,J)}else{var I=new window.FileReader();try{I.readAsText(M)}catch(L){B("",O,J)}I.onloadend=function(){var P=I.result;B(P,O,J)}}}}}else{if(d.bIE&&d.bHTML5Edition&&window.Uint8Array){E.xhrFields={responseType:"arraybuffer"};E.onSuccess=function(K,L,J){var I=null;if(K){I=new Uint8Array(K)}G(I,L,J)};E.onError=function(K,M,I){var L;try{L=String.fromCharCode.apply(null,new Uint8Array(K))}catch(J){L=""}B(L,M,I)}}else{E.contentType="text/plain; charset=x-user-defined";E.mimeType="text/plain; charset=x-user-defined";if(d.bIE&&parseInt(d.strBrowserVersion)<10){E.headers={"Accept-Charset":"x-user-defined"}}E.onSuccess=function(M,O,K){var N,J,I;if(d.bIE){I=K.nativeXhr.responseBody}else{N=K.nativeXhr.responseText;J=N.length;I=new Uint8Array(J);for(var L=0;L<J;L++){I[L]=N.charCodeAt(L)}}G(d.bSafari?I.buffer:I,O,K)}}}m.ajax(E)};e.prototype._sendImgDataToService=function(z,C,A,J,D,H,B){var I=function(M){if(M){return M.charAt(0).toUpperCase()+M.substring(1)}else{return""}};var F=this,K=F._dwsObject,G=function(P,O,N){if(x.isValidResponseValue(P)){if(m.errorInfo.isUnknownCode(P.exception)){P.description=m.errorInfo.getUnknownString(P.exception,P.description);P.exception=EnumDCS_ErrorCode.Unknown}if(P.exception===EnumDCS_ErrorCode.ConnectionToServiceReset&&m.isString(P.description)){P.description=P.description.replace("Webcam","Camera")}if(P.exception===0){if(m.isFunction(J)){J(P,O,N)}}else{if(P.exception===m.errorInfo.getLicenseVerificationFailedCode()&&P.result){if(!A){K._setErrCodeErrString(P.exception,P.result[1])}if(A){var M=F["_asyncDownload"+I(B)+"ErrCodeErrStrings"][H];if(M){M.ec=P.exception;M.es=P.result[1]}}if(!x.isFullVersion&&P.result[0]!==1&&m.isFunction(J)){J(P)}}else{if(!A){K._setErrCodeErrString(P.exception,P.description)}if(A){var M=F["_asyncDownload"+I(B)+"ErrCodeErrStrings"][H];if(M){M.ec=P.exception;M.es=P.result[1]}}}if(!(P.exception===m.errorInfo.getLicenseVerificationFailedCode()&&!x.isFullVersion&&P.result&&P.result[0]!==1)&&m.isFunction(D)){D(P,O,N)}}}},L=function(P,O,N){if(K instanceof m.sdk.DcsObject){if(d.bIE&&(parseInt(d.strBrowserVersion)<=9)&&m.isString(O)&&(O.toLowerCase().indexOf("denied")!==-1||O.toLowerCase().indexOf(x.IE_PERMISSION_DENIED_Err_Code)!==-1||O.toLowerCase().indexOf(x.IE_Unknown_Err_Code)!==-1)){if(!A){K._setErrCodeErrString(m.errorInfo.getOperationNotSupportedCode(),m.errorInfo.getOperationNotSupportedString())}else{if(A){var M=F["_asyncDownload"+I(B)+"ErrCodeErrStrings"][H];if(M){M.ec=P.exception;M.es=P.result[1]}}}}else{if(!A){x.throwServiceNotConnectException(K)}else{if(A){var M=F["_asyncDownload"+I(B)+"ErrCodeErrStrings"][H];if(M){M.ec=P.exception;M.es=P.result[1]}}}}}if(m.isFunction(D)){D(P,O,N)}};z=z||[x.preUrl,x.portInfo.curPort,"/",p._getVersionStrForCommand(),"/ts=",m.now()].join("");A=(A===undefined)?!0:A;var E={method:"POST",url:z,data:C,dataType:"json",onSuccess:G,onError:L,async:A};if(d.bIE&&parseInt(d.strBrowserVersion)<10){E.mimeType="text/plain; charset=x-user-defined";E.headers={"Accept-Charset":"x-user-defined"}}m.ajax(E)};var n="httpUpload",f="httpUploadAsync";m.each([n,f],function(z){e.prototype[z]=function(){var R=this,M=R._dwsObject,H=R._imgViewer.ui,I=!1,S=m.errorInfo.getOkCode(),N=m.errorInfo.getOkString(),G=function(X,W){S=X===undefined?M.getErrorCode():X;N=W===undefined?M.getErrorString():W};if(R._bDestoryed){return !1}M._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString());if(M.getErrorCode()===m.errorInfo.getOkCode()&&!M._validateDivDom(H._getImgViewerId(),!0)){if(z===n){return I}else{G()}}if(M.getErrorCode()===m.errorInfo.getOkCode()&&!M._validateImgViewerExist(H._getImgViewerId(),R._bRemoved)){if(z===n){return I}else{G()}}if(R._validateImgIsHandlingAsyncOperation()){return !1}if(z===n){if(M.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length<3){M._setErrCodeErrString(m.errorInfo.getParameterNumberUnmatchedCode(),m.errorInfo.getParameterNumberUnmatchedString(!0));return I}if(M.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length>5){M._setErrCodeErrString(m.errorInfo.getParameterNumberUnmatchedCode(),m.errorInfo.getParameterNumberUnmatchedString(!1));return I}}else{if(M.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length<5){S=m.errorInfo.getParameterNumberUnmatchedCode();N=m.errorInfo.getParameterNumberUnmatchedString(!0);M._setErrCodeErrString(S,N)}if(M.getErrorCode()===m.errorInfo.getOkCode()&&arguments.length>8){S=m.errorInfo.getParameterNumberUnmatchedCode();N=m.errorInfo.getParameterNumberUnmatchedString(!1);M._setErrCodeErrString(S,N)}}var E=arguments[0],F=arguments[1],A=arguments[2],O,V,Q,T,J;if(z===n){O=arguments[3]===undefined?s.POST:arguments[3];V=arguments[4]===undefined?h.BINARY:arguments[4]}else{Q=arguments[3];T=arguments[4];J=arguments[5]===undefined?null:arguments[5];O=arguments[6]===undefined?s.POST:arguments[6];V=arguments[7]===undefined?(!!window.Blob?h.BINARY:h.BASE64):arguments[7]}if(M.getErrorCode()===m.errorInfo.getOkCode()&&!M._validateStringType("url",E)){if(z===n){return I}else{G()}}if(M.getErrorCode()===m.errorInfo.getOkCode()&&!M._validateArrayType("indices",F)){if(z===n){return I}else{G()}}F=R._getValidatedIndices(F);if(M.getErrorCode()===m.errorInfo.getOkCode()&&F===null){M._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("indices"));if(z===n){return I}else{G()}}if(M.getErrorCode()===m.errorInfo.getOkCode()&&F.length>1&&(A!==b.TIFF&&A!=b.PDF)){M._setErrCodeErrString(m.errorInfo.getMultipageNotSupportedCode(),m.errorInfo.getMultipageNotSupportedString());if(z===n){return I}else{G()}}if(M.getErrorCode()===m.errorInfo.getOkCode()&&!R._isValidValueInEnum(b,A,"imageType")){if(z===n){return I}else{G()}}if(M.getErrorCode()===m.errorInfo.getOkCode()&&!R._isValidValueInEnum(s,O,"httpMethod")){if(z===n){return I}else{G()}}if(M.getErrorCode()===m.errorInfo.getOkCode()&&!R._isValidValueInEnum(h,V,"dataFormat")){if(z===n){return I}else{G()}}if(!window.Blob&&V===h.BINARY){V=h.BASE64}var L=parseFloat(d.strBrowserVersion);if(d.bSafari&&!isNaN(L)&&L<6&&V===h.BINARY){V=h.BASE64}if(z===f){if(M.getErrorCode()===m.errorInfo.getOkCode()&&Q!==null&&!m.isFunction(Q)){M._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpUploadSuccess"));G()}if(M.getErrorCode()===m.errorInfo.getOkCode()&&T!==null&&!m.isFunction(T)){M._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpUploadFailure"))}if(M.getErrorCode()===m.errorInfo.getOkCode()&&J!==null&&!m.isFunction(J)){M._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onHttpUploading"));G()}}if(M.getErrorCode()===m.errorInfo.getOkCode()&&(R._bPropertiesChanged||A==b.PDF&&(R.pdfinfo._pdfCreationDate===null||R.pdfinfo._pdfModifiedDate===null))){var C=R._sendPropertiesToBackend();if(!C){if(z===n){return I}else{G()}}}if(z===f&&M.getErrorCode()!==m.errorInfo.getOkCode()){if(m.isFunction(T)){setTimeout(function(){T(S,N,"")},0)}return null}var K=m.now();if(z===f){R._asyncUploadErrCodeErrStrings[K]={ec:m.errorInfo.getOkCode(),es:m.errorInfo.getOkString()}}var U,P={session:x.sessionId,object:M._dwsObjectId,method:"GetImageData",parameter:[R._imgViewer._imgViewerId,F,A,V]},D=function(Y){U=Y;if(E.trim().length===0){E="invalidUrl"}if(!m.startsWith(E,"http://")&&!m.startsWith(E,"https://")){E=(d.bSSL?"https://":"http://")+E}var W=R._composeUploadData(U,A,V===h.BASE64),Z=function(aa){R._HTTPResponse=aa?aa.toString():"";if(z===n){I=!0}else{if(R._asyncUploadErrCodeErrStrings[K]){M._setErrCodeErrString(R._asyncUploadErrCodeErrStrings[K].ec,R._asyncUploadErrCodeErrStrings[K].es)}if(m.isFunction(Q)){setTimeout(function(){Q(R._HTTPResponse)},0)}}if(z===f){delete R._asyncUploadErrCodeErrStrings[K]}},X=function(ad,ae,ab){R._HTTPResponse=ad?ad.toString():"";var aa=0;try{aa=ab.nativeXhr.status}catch(ac){aa=0}if(!ae||ae.indexOf(m.ajax._strOpenErr)!==-1||ae.indexOf(m.ajax._strSendErr)!==-1||d.bIE&&ae.toLowerCase().indexOf("unknown")!==-1){M._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("url"))}else{M._setErrCodeErrString(m.errorInfo.getHttpErrorCode(),m.errorInfo.getHttpErrorString(aa))}if(z===n){I=!1}else{G();if(m.isFunction(T)){setTimeout(function(){T(S,N,R._HTTPResponse)},0)}}if(z===f){delete R._asyncUploadErrCodeErrStrings[K]}};if(z===f){R._asyncUploadErrCodeErrStrings[K]={ec:m.errorInfo.getOkCode(),es:m.errorInfo.getOkString()}}R._upload(E,O===s.POST?"POST":"PUT",z===f,W,Z,X,J,V)},B=function(Y,X,W){R._HTTPResponse="";if(z===n){I=!1}else{if(R._asyncUploadErrCodeErrStrings[K]){M._setErrCodeErrString(R._asyncUploadErrCodeErrStrings[K].ec,R._asyncUploadErrCodeErrStrings[K].es)}G();if(m.isFunction(T)){setTimeout(function(){T(S,N,"")},0)}}if(z===f){delete R._asyncUploadErrCodeErrStrings[K]}};R._getImgDataFromService(V,m.stringify(P),z===f,D,B,K);if(z===n){return I}}});var q="";e.prototype._composeUploadData=function(A,D,H){var C,G,E;switch(D){case b.BMP:G=".bmp";break;case b.JPEG:G=".jpg";break;case b.PDF:G=".pdf";break;case b.PNG:G=".png";break;case b.TIFF:G=".tif";break;default:G="";break}if(H){var F="\r\n",z="--",I="";q=["----DynamsoftWebCamFormBoundary",m.now()].join("");for(E in this._HTTPFormFields){I=[I,z,q,F,"Content-Disposition: form-data; ",'name="',E,'"',F,F,this._HTTPFormFields[E],F].join("")}I=[I,z,q,F,"Content-Disposition: form-data; ",'name="RemoteFile"; ','filename="',m.now(),G,'"',F,"Content-Type: text/plain; charset=utf-8",F,F,A,F,z,q,z].join("");C=I}else{var B=new FormData();for(E in this._HTTPFormFields){B.append(E,this._HTTPFormFields[E])}B.append("RemoteFile",A,m.now()+G);C=B}return C};e.prototype._getImgDataFromService=function(J,C,B,I,D,E){C=C||null;var G=this,M=G._dwsObject,z=[x.preUrl,x.portInfo.curPort,"/",p._getVersionStrForCommand(),"/ts=",m.now()].join(""),H=function(U,T,P){var S=null,R=function(){try{S=m.parse(U)}catch(V){S=null}if(m.isObject(S)&&S.exception!==undefined){if(m.errorInfo.isUnknownCode(S.exception)){S.description=m.errorInfo.getUnknownString(S.exception,S.description);S.exception=EnumDCS_ErrorCode.Unknown}if(S.exception===EnumDCS_ErrorCode.ConnectionToServiceReset&&m.isString(S.description)){S.description=S.description.replace("Webcam","Camera")}if(!B&&M instanceof m.sdk.DcsObject){M._setErrCodeErrString(S.exception,S.description)}if(B&&G._asyncUploadErrCodeErrStrings[E]){G._asyncUploadErrCodeErrStrings[E].ec=S.exception;G._asyncUploadErrCodeErrStrings[E].es=S.description}if(m.isFunction(D)){D(U,T,P)}}else{if(m.isFunction(I)){I(U)}}};if(B&&window.Blob&&U instanceof window.Blob&&window.FileReader){var O=new window.FileReader();try{O.readAsText(U)}catch(Q){R()}O.onloadend=function(){var X=O.result,V=null;try{V=m.parse(X)}catch(W){V=null}if(V&&V.exception!==undefined){U=X}R()}}else{R()}},N=function(Q,P,O){if(M instanceof m.sdk.DcsObject){if(d.bIE&&(parseInt(d.strBrowserVersion)<=9)&&m.isString(P)&&(P.toLowerCase().indexOf("denied")!==-1||P.toLowerCase().indexOf(x.IE_PERMISSION_DENIED_Err_Code)!==-1||P.toLowerCase().indexOf(x.IE_Unknown_Err_Code)!==-1)){if(!B){M._setErrCodeErrString(m.errorInfo.getOperationNotSupportedCode(),m.errorInfo.getOperationNotSupportedString())}else{if(B&&G._asyncUploadErrCodeErrStrings[E]){G._asyncUploadErrCodeErrStrings[E].ec=m.errorInfo.getOperationNotSupportedCode();G._asyncUploadErrCodeErrStrings[E].es=m.errorInfo.getOperationNotSupportedString()}}}else{if(!B){x.throwServiceNotConnectException(M)}else{if(B&&G._asyncUploadErrCodeErrStrings[E]){G._asyncUploadErrCodeErrStrings[E].ec=m.errorInfo.getConnectionToServiceLostCode();G._asyncUploadErrCodeErrStrings[E].es=m.errorInfo.getConnectionToServiceLostString()}}}}if(m.isFunction(D)){D(Q,P,O)}},A=J===h.BASE64?"text/plain; charset=utf-8":"application/octet-stream";var F={method:"POST",url:z,data:C,dataType:"user-defined",onSuccess:H,onError:N,mimeType:A,async:B};var L=function(S,U,P){var O=null,R=null,T;try{T=String.fromCharCode.apply(null,new Uint8Array(S));R=m.parse(T)}catch(Q){R=null}if(m.isObject(R)&&R.exception!==undefined){O=T}else{if(J!==h.BASE64){if(S){O=new Uint8Array(S);O=new Blob([O],{type:A})}}else{O=S}}H(O,U,P)};B=(B===undefined)?!0:B;if(B){if(J!==h.BASE64){F.xhrFields={responseType:"blob"};var K=parseFloat(d.strBrowserVersion);if(d.bSafari&&!isNaN(K)&&K<6.1){F.xhrFields={responseType:"arraybuffer"};F.onSuccess=L}}}else{if(d.bIE&&d.bHTML5Edition&&window.Uint8Array){if(J!==h.BASE64){F.xhrFields={responseType:"arraybuffer"}}F.onSuccess=L}else{F.contentType="text/plain; charset=x-user-defined";F.mimeType="text/plain; charset=x-user-defined";F.onSuccess=function(O,P,U){var S,Q,T,W=null;try{W=m.parse(O)}catch(V){W=null}if(m.isObject(W)&&W.exception!==undefined){T=O}else{if(J!==h.BASE64){S=U.nativeXhr.responseText;Q=S.length;T=new Uint8Array(Q);for(var R=0;R<Q;R++){T[R]=S.charCodeAt(R)}T=new Blob([T],{type:A})}else{T=U.nativeXhr.responseText}}H(T,P,U)}}}m.ajax(F)};e.prototype._upload=function(A,F,C,E,H,B,D,I){var z=-1,G=C&&m.isFunction(D)?function(L,N){var M=(L.total===0)?100:Math.round(L.loaded*100/L.total),K;if(z!==M){K=D(M)}z=M;if(K===true){N.abort()}}:false,J=C&&m.isFunction(D)?function(K,L){if(!K||!(K.upload)||d.bIE&&parseInt(d.strBrowserVersion)<=9){return null}m.addEventListener(K.upload,"progress",function(M){delete (M.totalSize);delete (M.position);G(M,K)})}:!1;m.ajax({method:F,url:A,headers:this._HTTPHeader,data:E,beforeSend:J,contentType:I===h.BINARY?false:"multipart/form-data; boundary="+q,dataType:"user-defined",onSuccess:H,onError:B,async:C})};e.prototype.save=function(A,K,B,I,H){var F=this,J=F._dwsObject;var C={success:false,filename:A};if(F._bDestoryed){return C}if(!J._validateDivDom(F._imgViewer.ui._getImgViewerId(),!0)){return C}if(!J._validateImgViewerExist(F._imgViewer.ui._getImgViewerId(),F._bRemoved)){return C}if(F._validateImgIsHandlingAsyncOperation()){return C}if(!J._validateParamNum(arguments,5)||!J._validateArrayType("indices",K)||!J._validateNumberType("imageType",B)){return C}if(null!=A&&typeof A!="string"){F._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("filename"));return C}if(!A){A=""}A=A.replace(/[\\]/g,"\\\\");if(typeof I!="boolean"){F._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("overwritePrompt"));return C}if(typeof H!="boolean"){F._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("showSaveDialog"));return C}K=F._getValidatedIndices(K);if(K===null){F._dwsObject._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("indices"));return C}if(K.length>1&&(B!==b.TIFF&&B!=b.PDF)){F._dwsObject._setErrCodeErrString(m.errorInfo.getMultipageNotSupportedCode(),m.errorInfo.getMultipageNotSupportedString());return C}if(F._bPropertiesChanged||B==b.PDF&&(F.pdfinfo._pdfCreationDate===null||F.pdfinfo._pdfModifiedDate===null)){var z=F._sendPropertiesToBackend();if(!z){return C}}var D={session:x.sessionId,object:J._dwsObjectId,method:"SaveLocal",parameter:[F._imgViewer._imgViewerId,A,K,B,I,H,true,0]},G=function(M){C={success:true,filename:M.result[0]}},E=function(M){if(M){C={success:false,filename:(M&&M.result[2]||A)}}},L=!1;J._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString());x.postSyncCommand(J,m.stringify(D),G,E);return C};e.prototype.saveAsync=function(A,L,C,J,I,M,F){var G=this,K=G._dwsObject;var B=function(){if(F){(function(O,Q,R,P){setTimeout(function(){O(Q,R,P)},0)})(F,K.getErrorCode(),K.getErrorString(),A)}};if(G._bDestoryed){B();return false}if(!K._validateDivDom(G._imgViewer.ui._getImgViewerId(),!0)){B();return false}if(!K._validateImgViewerExist(G._imgViewer.ui._getImgViewerId(),G._bRemoved)){B();return false}if(G._validateImgIsHandlingAsyncOperation()){B();return false}if(!K._validateParamNum(arguments,7)||!K._validateArrayType("indices",L)||!K._validateNumberType("imageType",C)){B();return false}if(null!=A&&typeof A!="string"){G._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("filename"));B();return false}if(!A){A=""}A=A.replace(/[\\]/g,"\\\\");if(typeof J!="boolean"){G._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("overwritePrompt"));B();return false}if(typeof I!="boolean"){G._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("showSaveDialog"));B();return false}if(typeof M!="function"){G._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onSaveSuccess"));B();return false}if(typeof F!="function"){G._dwsObject._setErrCodeErrString(m.errorInfo.getTypeNotValidCode(),m.errorInfo.getTypeNotValidString("onSaveFailure"));B();return false}L=G._getValidatedIndices(L);if(L===null){G._dwsObject._setErrCodeErrString(m.errorInfo.getValueNotValidCode(),m.errorInfo.getValueNotValidString("indices"));B();return false}if(L.length>1&&(C!==b.TIFF&&C!=b.PDF)){G._dwsObject._setErrCodeErrString(m.errorInfo.getMultipageNotSupportedCode(),m.errorInfo.getMultipageNotSupportedString());B();return false}if(G._bPropertiesChanged||C==b.PDF&&(G.pdfinfo._pdfCreationDate===null||G.pdfinfo._pdfModifiedDate===null)){var z=G._sendPropertiesToBackend();if(!z){B();return false}}var D={session:x.sessionId,object:K._dwsObjectId,method:"SaveLocal",parameter:[G._imgViewer._imgViewerId,A,L,C,J,I,false,++G._asyncTaskId]},H=function(O){(function(P,S,Q,T){var R=function(){var U={session:x.sessionId,object:P._dwsObjectId,method:"CheckAsyncTaskResult",parameter:[S]};x.postSyncCommand(P,m.stringify(U),function(V){if(""===V.result[0].errorcode){setTimeout(R,1000)}else{if(0===V.result[0].errorcode){Q(V.result[0].filename)}else{P._setErrCodeErrString(V.result[0].errorcode,V.result[0].errorstring);T(V.result[0].errorcode,V.result[0].errorstring,V.result[0].filename)}}},function(V){T(P.getErrorCode(),P.getErrorString(),(V&&V.result[2]||A))})};R()})(K,G._asyncTaskId,M,F,A)},E=function(O){(function(S,R,Q,P){setTimeout(function(){S(R,Q,P)},0)})(F,K.getErrorCode(),K.getErrorString(),(O&&O.result[2]||A))},N=!1;N=x.postSyncCommand(K,m.stringify(D),H,E);if(N){K._setErrCodeErrString(m.errorInfo.getOkCode(),m.errorInfo.getOkString())}return true};e.prototype._destory=function(z){if(!z){this._bDestoryed=true}else{this._bRemoved=true}};l.IO=e})(dynamsoft);(function(d){var g=d.lib,e=g.sdk;var k="PDF",l=k.toLowerCase(),c="get",f="set",b="iValue",a=["Author","CompressionType","CreationDate","ModifiedDate","Creator","Producer","Subject","Keywords","Title","Version"],j=[],i={AUTO:0,FAX3:1,FAX4:2,LZW:3,JPEG:4};function h(n){var m=this;m._io=n;m.EnumPDFCompressionType=i;g.each(a,function(o){m["_"+l+o]=(o==="CreationDate"||o==="ModifiedDate")?null:(o==="CompressionType")?i.AUTO:""})}g.each(a,function(m){j.push(c+k+m);j.push(f+k+m)});g.each(j,function(m){h.prototype[m]=function(){var s=this,n=s._io._dwsObject;if(s._io._bDestoryed){return false}if(!n._validateDivDom(s._io._imgViewer.ui._getImgViewerId(),!0)){return(m.indexOf(c)===0)?undefined:false}if(!n._validateImgViewerExist(s._io._imgViewer.ui._getImgViewerId(),s._io._bRemoved)){return(m.indexOf(c)===0)?undefined:false}if(m.indexOf(c)===0){if(!n._validateParamNum(arguments,0)){return null}}else{if(!n._validateParamNum(arguments,1)){return false}if(g.endsWith(m,"CreationDate")||g.endsWith(m,"ModifiedDate")){if(!(arguments[0] instanceof Date)){n._setErrCodeErrString(g.errorInfo.getTypeNotValidCode(),g.errorInfo.getTypeNotValidString(b));return false}var q=g.endsWith(m,"ModifiedDate")?this["_"+l+"CreationDate"]:this["_"+l+"ModifiedDate"],o=arguments[0];if(q!==null){if(g.endsWith(m,"ModifiedDate")&&q.getTime()>o.getTime()||g.endsWith(m,"CreationDate")&&q.getTime()<o.getTime()){n._setErrCodeErrString(g.errorInfo.getValueNotValidCode(),"Modified date must be greater than creation date.");return false}}}else{if(g.endsWith(m,"CompressionType")){if(!n._validateNumberType(b,arguments[0])||!s._io._isValidValueInEnum(i,arguments[0],b)){return false}}else{if(!n._validateStringType(b,arguments[0])){return false}}}}var p=-1,r="";for(p=0;p<a.length;p++){if(m.indexOf(a[p])!==-1){r=a[p];break}}n._setErrCodeErrString(g.errorInfo.getOkCode(),g.errorInfo.getOkString());if(m.indexOf(c)===0){return s["_"+l+r]}else{if(s["_"+l+r]!==arguments[0]){s._io._bPropertiesChanged=!0}s["_"+l+r]=arguments[0];return true}}});h.prototype._getJsonObj=function(){var s={},q="",r=null;for(var p=0;p<a.length;p++){q=a[p];r=this["_"+l+q];r=r===null?"":r;s[q]=(q==="CreationDate"||a[p]==="ModifiedDate")?r.toString():r}var n=new Date(),m=this["_"+l+"CreationDate"],o=this["_"+l+"ModifiedDate"];if(m===null&&o===null){s.ModifiedDate=s.CreationDate=this._yyyymmddhhMMss(n)}else{if(m!==null&&o!==null){s.CreationDate=this._yyyymmddhhMMss(m);s.ModifiedDate=this._yyyymmddhhMMss(o)}else{s.ModifiedDate=s.CreationDate=this._yyyymmddhhMMss(m===null?o:m)}}return s};h.prototype._yyyymmddhhMMss=function(n){if(!(n instanceof Date)){return""}var q=n.getFullYear(),r=n.getMonth()+1,o=n.getDate(),m=n.getHours(),t=n.getMinutes(),p=n.getSeconds();var s=function(u){return(u>9?"":"0")+u};return[q,s(r),s(o),s(m),s(t),s(p)].join("")};e.PdfInfo=h})(dynamsoft);(function(a){var e=a.lib,c=e.sdk,d=a.dcsEnv;function b(f){if(f&&f._documentEditorManager){return}this._dwsObject=f}b.prototype.addDocumentEditor=function(h,g){var k=this,f=!0;if(!e.isString(g)||g.indexOf(d._dcoEditorClientIdPrefix)==-1){g=d._dcoEditorClientIdPrefix+e.getRandom();var j={session:dynamsoft.lib.detect.sessionId,object:k._dwsObject._dwsObjectId,method:"AddDocumentEditor",parameter:[g]};f=dynamsoft.lib.detect.postSyncCommand(k._dwsObject,e.stringify(j),null,null)}if(f){var i=new c.DocumentEditor(k._dwsObject,h,g);d._documentEditorDic[h]={dwsObject:k._dwsObject,documentEditor:i}}return f};b.prototype.removeDocumentEditor=function(g){var k=this,f=false,j=d._documentEditorDic[g],i=j.documentEditor,h={session:dynamsoft.lib.detect.sessionId,object:k._dwsObject._dwsObjectId,method:"RemoveDocumentEditor",parameter:[i._docEditorId]};f=dynamsoft.lib.detect.postSyncCommand(k._dwsObject,e.stringify(h),null,null);if(f){i.ui._destory(true);i.document._destory(true);delete d._documentEditorDic[g]}return f};c.DocumentEditorManager=b})(dynamsoft);(function(a){var d=a.lib,b=d.sdk;function c(e,g,f){var h=this;this._innerIndex=d.guid();h._dwsObject=e;h._docEditorId=f;h.imageViewer=null;h.document=new b.Document(e,h);h.ui=new b.documentUI(e,h,g);h.documentCtrl=new b.DocumentControl(e,h)}b.DocumentEditor=c})(dynamsoft);(function(b){var k=b.lib,h=k.sdk,a=k.detect;function d(m,l,n){var p=this;p._dwsObject=m;p._documentEditor=l;p._documentContainerId=n;p._userDocumentContainer=k.one("#"+n).getEL();k.empty(p._userDocumentContainer);var o=k.getElDimensions(p._userDocumentContainer,false);p._userDocumentEditorWidth=o?o.clientWidth:p._userDocumentContainer.clientWidth;p._userDocumentEditorHeight=o?o.clientHeight:p._userDocumentContainer.clientHeight;p._userDocumentContainer.innerHTML=['<div class="ds-dws-doc-editor-wrapper" oncontextmenu="return false;">','<div class="ds-dws-doc-editor-container ds-dws-display-inline-block">','<div class="ds-dws-doc-obj-container"></div>',(window.HTMLCanvasElement?'<canvas class="canvas-editor"></canvas>':['<div class="ds-dws-not-h5-canvas-editor-container">','<div class="ds-dws-not-h5-document-border-points">',"<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>","</div>",'<div class="canvas-editor"></div>',"</div>"].join("")),"</div>","</div>"].join("");p._documentContainerWrapper=k.one(".ds-dws-doc-editor-wrapper",p._userDocumentContainer).getEL();p._documentContainerWrapper.style.width=p._userDocumentEditorWidth+"px";p._documentContainerWrapper.style.height=p._userDocumentEditorHeight+"px";p._documentContainerBox=k.one(".ds-dws-doc-editor-container",p._documentContainerWrapper).getEL();p._documentContainerBox.style.position="relative";p._documentContainerBox.style.width=p._userDocumentEditorWidth+"px";p._documentContainerBox.style.height=p._userDocumentEditorHeight+"px";p._documentContainerImageObj=k.one(".ds-dws-doc-obj-container",p._documentContainerBox).getEL();p._documentContainerImageObj.style.position="relative";p._documentContainerCanvasEditor=k.one(".canvas-editor",p._documentContainerBox).getEL();p._documentContainerCanvasEditor.style.top=0;p._documentContainerCanvasEditor.style.left=0;p._documentContainerCanvasEditor.setAttribute("unselectable","on");p._documentContainerCanvasEditor.setAttribute("onselectstart","return false;");p._documentContainerCanvasEditor.setAttribute("draggable","return false;");if(!window.HTMLCanvasElement){p._documentContainerNotH5DocBorderPointsContainer=k.one(".ds-dws-not-h5-document-border-points",p._documentContainerBox).getEL();p._documentContainerNotH5DocBorderPointsContainer.parentNode.style.top=0;p._documentContainerNotH5DocBorderPointsContainer.parentNode.style.left=0;p._documentContainerNotH5DocBorderPointsContainer.style.top=0;p._documentContainerNotH5DocBorderPointsContainer.style.left=0}p._pointInfo=new Array(8);p._MINZOOM=0.02;p._MAXZOOM=65;p._zoom=1;p._documentBoundaryColor=1589110015;p._backgroundColor=4294967295;p._documentBoundaryThickness=2;p.MINTHICKNESS=0;p.MAXTHICKNESS=100000;p._zoomSet=false;p.onmouseclick=null;p.onmousemove=null;p._displayMode="";p._bDestoryed=false;p._bRemoved=false}d.prototype._getDocEditorId=function(){return this._documentContainerId};d.prototype._getDocEditorEl=function(){try{return k.one("#"+this._documentContainerId).getEL()}catch(l){return false}};d.prototype.setDocumentBoundaryThickness=function(l){var m=this;if(m._bDestoryed){return false}if(!m._dwsObject._validateDivDom(m._getDocEditorId(),"document")){return false}if(!m._dwsObject._validateDocEditorExist(m._getDocEditorId(),m._bRemoved)){return false}if(!m._dwsObject._validateParamNum(arguments,1)||!m._dwsObject._validateNumberType("thickness",l)){return false}if(!m._dwsObject._validateValue("thickness",l,[m.MINTHICKNESS,m.MAXTHICKNESS],true)){return false}m._documentBoundaryThickness=Math.round(l);m._refresh();return true};d.prototype.getDocumentBoundaryThickness=function(){var l=this;if(l._bDestoryed){return null}if(!l._dwsObject._validateDivDom(l._getDocEditorId(),"document")){return null}if(!l._dwsObject._validateDocEditorExist(l._getDocEditorId(),l._bRemoved)){return null}if(!l._dwsObject._validateParamNum(arguments,0)){return null}return l._documentBoundaryThickness};d.prototype.getZoom=function(){var l=this;if(l._bDestoryed){return null}if(l._dwsObject._bDestoryed){return null}if(!l._dwsObject._validateDivDom(l._getDocEditorId(),"document")){return null}if(!l._dwsObject._validateDocEditorExist(l._getDocEditorId(),l._bRemoved)){return null}if(!l._dwsObject._validateParamNum(arguments,0)){return null}return l._zoom};d.prototype.setZoom=function(l){var m=this;if(m._bDestoryed){return false}if(m._dwsObject._bDestoryed){return false}if(!m._dwsObject._validateDivDom(m._getDocEditorId(),"document")){return false}if(!m._dwsObject._validateDocEditorExist(m._getDocEditorId(),m._bRemoved)){return false}if(!m._dwsObject._validateParamNum(arguments,1)||!m._dwsObject._validateNumberType("zoomValue",l)){return false}if(!m._dwsObject._validateValue("zoomValue",l,[m._MINZOOM,m._MAXZOOM],true)){return false}m._zoom=l;m._zoomSet=true;m._refresh();return true};var e="getBackgroundColor",c="setBackgroundColor",i="getDocumentBoundaryColor",f="setDocumentBoundaryColor",j=0,g=4294967295;k.each([e,c,i,f],function(l){d.prototype[l]=function(){var m=this;if(m._bDestoryed){if(l==e||l==i){return null}return false}if(m._dwsObject._bDestoryed){if(l==e||l==i){return null}return false}if(!m._dwsObject._validateDivDom(m._getDocEditorId(),"document")){return(l==e||l==i)?null:false}if(!m._dwsObject._validateDocEditorExist(m._getDocEditorId(),m._bRemoved)){return(l==e||l==i)?null:false}if(l==e||l==i){if(!m._dwsObject._validateParamNum(arguments,0)){return null}}if(l==c||l==f){if(!m._dwsObject._validateParamNum(arguments,1)||!m._dwsObject._validateNumberType("color",arguments[0])||!m._dwsObject._validateValue("color",arguments[0],[j,g],true)){return false}}if(l==e){return m._backgroundColor}if(l==c){m._backgroundColor=arguments[0];m._userDocumentContainer.style.backgroundColor=k.IntToColorStr(arguments[0]);return true}if(l==i){return m._documentBoundaryColor}if(l==f){m._documentBoundaryColor=arguments[0];m._refresh();return true}}});k.each(["getContainerId","show","hide"],function(l){d.prototype[l]=function(){var n=this;if(n._bDestoryed){return l=="getContainerId"?null:false}var m=n._getDocEditorId();if(!n._dwsObject._validateDivDom(m,"document")){return l=="getContainerId"?null:false}if(!n._dwsObject._validateDocEditorExist(n._getDocEditorId(),n._bRemoved)){return l=="getContainerId"?null:false}if(!n._dwsObject._validateParamNum(arguments,0)){return l=="getContainerId"?null:false}if(l=="getContainerId"){return m}if(l=="show"){n._displayMode=(n._displayMode=="none")?"":n._displayMode;if(n._userDocumentContainer.style.display=="none"){n._userDocumentContainer.style.display=n._displayMode}else{n._displayMode=n._userDocumentContainer.style.display}return true}if(l=="hide"){if(n._userDocumentContainer.style.display!="none"){n._displayMode=n._userDocumentContainer.style.display}n._userDocumentContainer.style.display="none";n._displayMode=(n._displayMode=="none")?"":n._displayMode;return true}return false}});d.prototype._refresh=function(){var l=this;l._documentEditor.documentCtrl.refreshUI()};d.prototype._GetPointInfo=function(){var o=this,m,n=o._documentEditor.documentCtrl.updateMovePointInfo();for(m=0;m<n.length;m++){o._pointInfo[m]=Math.round(n[m])}for(m=0;m<n.length/2;m++){for(var l=0;l<n.length/2;l++){if(m!=l&&o._pointInfo[2*m]==o._pointInfo[2*l]){if(o._pointInfo[2*m+1]==o._pointInfo[2*l+1]){o._pointInfo[2*m]++}}}}for(m=0;m<o._pointInfo.length;m++){if(isNaN(o._pointInfo[m])){o._pointInfo[m]=m+1}}return o._pointInfo};d.prototype._destory=function(l){var m=this;k.empty(m._userDocumentContainer);if(!l){m._bDestoryed=true}else{m._bRemoved=true}m._zoomSet=false};h.documentUI=d})(dynamsoft);(function(d){var g=d.lib,e=g.sdk,c=g.detect,f=d.dcsEnv;function b(i,h){var j=this;j._dwsObject=i;j._documentEditor=h;j._MINADJUSTABLE=-100;j._MAXADJUSTABLE=100;j._bDiscard=false;j._bDestoryed=false;j._bRemoved=false}b.prototype.adjustContrast=function(i){var k=this;if(k._bDestoryed){return false}if(!k._dwsObject._validateDivDom(k._documentEditor.ui._getDocEditorId(),"document")){return false}if(!k._dwsObject._validateDocEditorExist(k._documentEditor.ui._getDocEditorId(),k._bRemoved)){return false}if(!k._dwsObject._validateParamNum(arguments,1)||!k._dwsObject._validateNumberType("contrast",i)){return false}if(!k._dwsObject._validateValue("contrast",i,[k._MINADJUSTABLE,k._MAXADJUSTABLE],true)){return false}var j={session:c.sessionId,object:k._dwsObject._dwsObjectId,method:"AdjustContrastOriginal",parameter:[k._documentEditor._docEditorId,i]};var h=g.detect.postSyncCommand(k._dwsObject,g.stringify(j),null,null);if(h){k._documentEditor.documentCtrl.refreshSrc();return true}return false};b.prototype.adjustBrightness=function(j){var k=this;if(k._bDestoryed){return false}if(!k._dwsObject._validateDivDom(k._documentEditor.ui._getDocEditorId(),"document")){return false}if(!k._dwsObject._validateDocEditorExist(k._documentEditor.ui._getDocEditorId(),k._bRemoved)){return false}if(!k._dwsObject._validateParamNum(arguments,1)||!k._dwsObject._validateNumberType("brightness",j)){return false}if(!k._dwsObject._validateValue("brightness",j,[k._MINADJUSTABLE,k._MAXADJUSTABLE],true)){return false}var i={session:c.sessionId,object:k._dwsObject._dwsObjectId,method:"AdjustBrightnessOriginal",parameter:[k._documentEditor._docEditorId,j]};var h=g.detect.postSyncCommand(k._dwsObject,g.stringify(i),null,null);if(h){k._documentEditor.documentCtrl.refreshSrc();return true}return false};var a=["rotateLeft","rotateRight"];g.each(a,function(h){b.prototype[h]=function(){var l=this,k;if(h=="rotateLeft"){k="left"}else{k="right"}if(l._bDestoryed){return false}if(!l._dwsObject._validateDivDom(l._documentEditor.ui._getDocEditorId(),"document")){return false}if(!l._dwsObject._validateDocEditorExist(l._documentEditor.ui._getDocEditorId(),l._bRemoved)){return false}if(!l._dwsObject._validateParamNum(arguments,0)){return false}var j={session:c.sessionId,object:l._dwsObject._dwsObjectId,method:g.upperCaseFirst(h)+"Original",parameter:[l._documentEditor._docEditorId]};var i=g.detect.postSyncCommand(l._dwsObject,g.stringify(j),null,null);if(i){l._documentEditor.documentCtrl.refreshRotate(k);return true}return false}});g.each(["toColor","toGrey","toBlackWhite"],function(h){b.prototype[h]=function(){var k=this;if(k._bDestoryed){return false}if(!k._dwsObject._validateDivDom(k._documentEditor.ui._getDocEditorId(),"document")){return false}if(!k._dwsObject._validateDocEditorExist(k._documentEditor.ui._getDocEditorId(),k._bRemoved)){return false}if(!k._dwsObject._validateParamNum(arguments,0)){return false}var j={session:c.sessionId,object:k._dwsObject._dwsObjectId,method:g.upperCaseFirst(h)+"Original",parameter:[k._documentEditor._docEditorId]};var i=g.detect.postSyncCommand(k._dwsObject,g.stringify(j),null,null);if(i){k._documentEditor.documentCtrl.refreshSrc();return true}return false}});b.prototype.ondiscardmodified=function(){return false};b.prototype.discard=function(){var m=this;if(m._bDestoryed){return false}if(!m._dwsObject._validateDivDom(m._documentEditor.ui._getDocEditorId(),"document")){return false}if(!m._dwsObject._validateDocEditorExist(m._documentEditor.ui._getDocEditorId(),m._bRemoved)){return false}if(!m._dwsObject._validateParamNum(arguments,0)){return false}var j={session:c.sessionId,object:m._dwsObject._dwsObjectId,method:"DiscardDocument",parameter:[m._documentEditor._docEditorId,m._bDiscard]},i=function(){m._documentEditor.documentCtrl.destroy()},l=function(n){};var h=g.detect.postSyncCommand(m._dwsObject,g.stringify(j),i,l);if(h){m._bDiscard=false;return true}else{if(m._dwsObject.getErrorCode()==-3001){var k;if(g.isFunction(m.ondiscardmodified)){k=m.ondiscardmodified()}else{k=m.ondiscardmodified}if(k==true){m._dwsObject._setErrCodeErrString(g.errorInfo.getOperationCancelledCode(),g.errorInfo.getOperationCancelledString());return false}else{m._bDiscard=true;m.discard();return true}}else{if(m._dwsObject.getErrorCode()==-1028){m._dwsObject._setErrCodeErrString(g.errorInfo.getDocumentNotExistCode(),g.errorInfo.getDocumentNotExistString());return false}else{return false}}}};b.prototype.save=function(){var k=this,i=false;if(k._bDestoryed){return false}if(!k._dwsObject._validateParamNum(arguments,0)){return false}if(!k._dwsObject._validateDivDom(k._documentEditor.ui._getDocEditorId(),"document")){return false}if(k._documentEditor.imageViewer&&!k._dwsObject._validateDivDom(k._documentEditor.imageViewer.ui._getImgViewerId(),!0)){return false}if(!k._dwsObject._validateDocEditorExist(k._documentEditor.ui._getDocEditorId(),k._bRemoved)){return false}if(k._documentEditor.imageViewer&&!k._dwsObject._validateImgViewerExist(k._documentEditor.imageViewer.ui._getImgViewerId(),k._bRemoved)){return false}if(k._documentEditor.imageViewer&&k._documentEditor.imageViewer.io._validateImgIsHandlingAsyncOperation()){return false}var j={session:c.sessionId,object:k._dwsObject._dwsObjectId,method:"SaveDocument",parameter:[k._documentEditor._docEditorId,k._documentEditor.ui._GetPointInfo()]},h=function(q){var m=k._dwsObject.getErrorCode(),r=k._dwsObject.getErrorString();var s=q.result[0].imageviewid;var p;var o=q.result[0].index;var l=q.result[0].result;if(l==true){for(var n in f._imageViewerDic){if(f._imageViewerDic[n].imgViewerClientId==s){p=f._imageViewerDic[n].imageViewer}}k._documentEditor.documentCtrl.destroy();p.image._updatedImage(o);i=true}else{k._dwsObject._setErrCodeErrString(m,r);return false}};g.detect.postSyncCommand(k._dwsObject,g.stringify(j),h,null);return i};b.prototype.saveAs=function(m){var l=this;if(l._bDestoryed){return false}if(!l._dwsObject._validateParamNum(arguments,1)||!l._dwsObject._validateStringType("imageViewerContainerId",m)){return false}if(!l._dwsObject._validateDivDom(m,!0)){return false}if(!l._dwsObject._validateDivDom(l._documentEditor.ui._getDocEditorId(),!0)){return false}var h=f._documentEditorDic[m];var k=f._videoViewerDic[m];if(h||k){l._dwsObject._setErrCodeErrString(g.errorInfo.getObjectOccupiedCode(),g.errorInfo.getObjectOccupiedString(m));return false}if(!l._dwsObject._validateDocEditorExist(l._documentEditor.ui._getDocEditorId(),l._bRemoved)){return false}if(!l._dwsObject._validateImgViewerExist(m,l._bRemoved)){return false}var i=f._imageViewerDic[m];var o=i.imageViewer;if(o.io._validateImgIsHandlingAsyncOperation()){return false}if(o.image.getCount()==o.image.getCapacity()){l._dwsObject._setErrCodeErrString(g.errorInfo.getBufferIsFullCode(),g.errorInfo.getBufferIsFullString());return false}var j={session:c.sessionId,object:l._dwsObject._dwsObjectId,method:"SaveDocumentAs",parameter:[l._documentEditor._docEditorId,o._imgViewerId,l._documentEditor.ui._GetPointInfo()]},n=function(){l._documentEditor.documentCtrl.destroy();o.ui._addImageControl()};var p=g.detect.postSyncCommand(l._dwsObject,g.stringify(j),n,null);return p};b.prototype._destory=function(h){if(!h){this._bDestoryed=true}else{this._bRemoved=true}};e.Document=b})(dynamsoft);(function(b){var e=b.lib,d=e.sdk,a=e.detect;function c(g,f){var h=this;h.dwsObject=g;h.documentEditor=f;h.documentEditorWidth="";h.documentEditorHeight="";h.documentUrl="";h.objDocument=false;h.objDocumentDefaultWidth="";h.objDocumentDefaultHeight="";h.defaultPointInfo="";h.pointInfo=new Array(10);h.movePointInfo=new Array(8);h.zoomPointInfo=new Array(8);h.midPointInfo=new Array(8);h.pointInductor=new Array(8);h.slopeSide=new Array(4);h.tempx="";h.tempy="";h.curPointIndex="";h.invalidShape=false;h.drawErrorRect=false;h.outerDiv=false;h.hintDiv=false;h.editorCanvas=false;h.editorCanvasWidth="";h.editorCanvasHeight="";h.containerBox=false;h.zoom=1;h.brushThickness=2;h.MAXLOACOUNT=6;h.curLoadCount=0;h.bDestroy=false;h.init()}c.prototype.init=function(){var h=this;h.documentEditorWidth=h.documentEditor.ui._userDocumentEditorWidth;h.documentEditorHeight=h.documentEditor.ui._userDocumentEditorHeight;h.containerBox=h.documentEditor.ui._documentContainerBox;h.outerDiv=h.documentEditor.ui._documentContainerImageObj;h.editorCanvas=h.documentEditor.ui._documentContainerCanvasEditor;if(!window.HTMLCanvasElement){h.notH5DocBorderPointsContainer=h.documentEditor.ui._documentContainerNotH5DocBorderPointsContainer;h.notH5DocBorderPoints=[];var g=h.notH5DocBorderPointsContainer.children||h.notH5DocBorderPointsContainer.childNodes;for(var f=0;f<g.length;++f){if(1==g[f].nodeType){h.notH5DocBorderPoints.push(g[f])}}}h.documentContainerImageObj=h.documentEditor.ui._documentContainerImageObj};c.prototype.attachDocument=function(){var g=this;g.invalidShape=false;g.drawErrorRect=false;g.zoom=1;g.documentUrl=g.getRefreshedDocUrl();g.GetDocBoundaryInfoFromEditor();for(var f=0;f<g.pointInfo.length;f++){if(g.pointInfo[f]<0){g.pointInfo[f]=0}}g.objDocumentDefaultWidth=g.pointInfo[0];g.objDocumentDefaultHeight=g.pointInfo[1];g.movePointInfo=g.getMovePointInfo();g.copyArry(g.movePointInfo,g.zoomPointInfo);g.getSlopeSide();g.midPointInfo=g.getMidPointInfo();g.destroy();g.initHintDiv();g.initObjDoc();g.editorCanvas.onmousedown=function(o){var n,h=window.HTMLCanvasElement?this.getContext("2d"):null;var m=(o||window.event).offsetX;var l=(o||window.event).offsetY;g.brushThickness=g.documentEditor.ui.getDocumentBoundaryThickness();for(n=0;n<g.pointInductor.length;n++){if(n<4){g.pointInductor[n]=(Math.abs(g.zoomPointInfo[2*n]-m)<g.brushThickness*2+8&&Math.abs(g.zoomPointInfo[2*n+1]-l)<g.brushThickness*2+8)?true:false}else{g.pointInductor[n]=(Math.abs(g.midPointInfo[2*(n-4)]-m)<g.brushThickness*2+8&&Math.abs(g.midPointInfo[2*(n-4)+1]-l)<g.brushThickness*2+8)?true:false}}for(n=g.pointInductor.length-1;n>-1;n--){if(n<4&&g.pointInductor[n]==true){for(var k=0;k<g.pointInductor.length;k++){if(n!=k){g.pointInductor[k]=false}}}}for(n=0;n<g.pointInductor.length;n++){if(g.pointInductor[n]==true&&!g.invalidShape){g.curPointIndex=n;if(n<4){g.tempx=g.zoomPointInfo[2*n];g.tempy=g.zoomPointInfo[2*n+1]}else{g.tempx0=g.zoomPointInfo[2*(n-4)];g.tempy0=g.zoomPointInfo[2*(n-4)+1];g.tempx1=g.zoomPointInfo[(2*(n-4)+2)%8];g.tempy1=g.zoomPointInfo[(2*(n-4)+3)%8]}}}this.onmousemove=function(z){var D,x,C,w,q,E,y,p,B,v,j,A,t;var s=(z||window.event).offsetX;var r=(z||window.event).offsetY;for(var u=0;u<g.pointInductor.length;u++){if(u<4&&g.pointInductor[u]==true){this.style.cursor="move";if(h){h.clearRect(0,0,g.editorCanvasWidth,g.editorCanvasHeight)}g.zoomPointInfo[2*u]=s;g.zoomPointInfo[2*u+1]=r;g.getSlopeSide();g.checkPointBorder();if(g.checkPointShape()){g.drawErrorRect=true}else{g.drawErrorRect=false}g.drawRect()}else{if(u==4&&g.pointInductor[4]==true){this.style.cursor="move";if(h){h.clearRect(0,0,g.editorCanvasWidth,g.editorCanvasHeight)}D=g.zoomPointInfo[0];x=g.zoomPointInfo[1];C=g.zoomPointInfo[2];w=g.zoomPointInfo[3];q=g.slopeSide[0];E=-1;y=r-g.slopeSide[0]*s;p=g.slopeSide[1];B=-1;v=g.zoomPointInfo[3]-g.slopeSide[1]*g.zoomPointInfo[2];j=g.slopeSide[3];A=-1;t=g.zoomPointInfo[1]-g.slopeSide[3]*g.zoomPointInfo[0];if(g.slopeSide[0]==0){if(g.slopeSide[1]=="Infinity"){g.zoomPointInfo[2]=g.zoomPointInfo[2];g.zoomPointInfo[3]=r}else{g.zoomPointInfo[2]=(r-g.zoomPointInfo[3])/g.slopeSide[1]+g.zoomPointInfo[2];g.zoomPointInfo[3]=r}if(g.slopeSide[3]=="Infinity"){g.zoomPointInfo[0]=g.zoomPointInfo[0];g.zoomPointInfo[1]=r}else{g.zoomPointInfo[0]=(r-g.zoomPointInfo[1])/g.slopeSide[3]+g.zoomPointInfo[0];g.zoomPointInfo[1]=r}}else{if(g.slopeSide[0]=="Infinity"){if(g.slopeSide[1]==0){g.zoomPointInfo[2]=s;g.zoomPointInfo[3]=g.zoomPointInfo[3]}else{g.zoomPointInfo[3]=g.slopeSide[1]*(s-g.zoomPointInfo[2])+g.zoomPointInfo[3];g.zoomPointInfo[2]=s}if(g.slopeSide[3]==0){g.zoomPointInfo[0]=s;g.zoomPointInfo[1]=g.zoomPointInfo[1]}else{g.zoomPointInfo[1]=g.slopeSide[3]*(s-g.zoomPointInfo[0])+g.zoomPointInfo[1];g.zoomPointInfo[0]=s}}else{if(g.slopeSide[1]==0){g.zoomPointInfo[2]=g.zoomPointInfo[2]+(s-g.midPointInfo[0]);g.zoomPointInfo[3]=g.zoomPointInfo[3]}else{if(g.slopeSide[1]=="Infinity"){g.zoomPointInfo[2]=g.zoomPointInfo[2];g.zoomPointInfo[3]=g.zoomPointInfo[3]+(r-g.midPointInfo[1])}else{g.zoomPointInfo[2]=(B*y-E*v)/(p*E-q*B);g.zoomPointInfo[3]=(q*v-p*y)/(p*E-q*B)}}if(g.slopeSide[3]==0){g.zoomPointInfo[0]=g.zoomPointInfo[0]+(s-g.midPointInfo[0]);g.zoomPointInfo[1]=g.zoomPointInfo[1]}else{if(g.slopeSide[3]=="Infinity"){g.zoomPointInfo[0]=g.zoomPointInfo[0];g.zoomPointInfo[1]=g.zoomPointInfo[1]+(r-g.midPointInfo[1])}else{g.zoomPointInfo[0]=(A*y-E*t)/(j*E-q*A);g.zoomPointInfo[1]=(q*t-j*y)/(j*E-q*A)}}}}g.checkPointBorder();if(g.checkPointShape()){g.drawErrorRect=true;g.zoomPointInfo[0]=D;g.zoomPointInfo[1]=x;g.zoomPointInfo[2]=C;g.zoomPointInfo[3]=w}else{g.drawErrorRect=false}g.drawRect()}else{if(u==5&&g.pointInductor[5]==true){this.style.cursor="move";if(h){h.clearRect(0,0,g.editorCanvasWidth,g.editorCanvasHeight)}D=g.zoomPointInfo[2];x=g.zoomPointInfo[3];C=g.zoomPointInfo[4];w=g.zoomPointInfo[5];q=g.slopeSide[1];E=-1;y=r-g.slopeSide[1]*s;p=g.slopeSide[0];B=-1;v=g.zoomPointInfo[3]-g.slopeSide[0]*g.zoomPointInfo[2];j=g.slopeSide[2];A=-1;t=g.zoomPointInfo[5]-g.slopeSide[2]*g.zoomPointInfo[4];if(g.slopeSide[1]==0){if(g.slopeSide[2]=="Infinity"){g.zoomPointInfo[4]=g.zoomPointInfo[4];g.zoomPointInfo[5]=r}else{g.zoomPointInfo[4]=(r-g.zoomPointInfo[5])/g.slopeSide[2]+g.zoomPointInfo[4];g.zoomPointInfo[5]=r}if(g.slopeSide[0]=="Infinity"){g.zoomPointInfo[2]=g.zoomPointInfo[2];g.zoomPointInfo[3]=r}else{g.zoomPointInfo[2]=(r-g.zoomPointInfo[3])/g.slopeSide[0]+g.zoomPointInfo[2];g.zoomPointInfo[3]=r}}else{if(g.slopeSide[1]=="Infinity"){if(g.slopeSide[2]==0){g.zoomPointInfo[4]=s;g.zoomPointInfo[5]=g.zoomPointInfo[5]}else{g.zoomPointInfo[5]=g.slopeSide[2]*(s-g.zoomPointInfo[4])+g.zoomPointInfo[5];g.zoomPointInfo[4]=s}if(g.slopeSide[0]==0){g.zoomPointInfo[2]=s;g.zoomPointInfo[3]=g.zoomPointInfo[3]}else{g.zoomPointInfo[3]=g.slopeSide[0]*(s-g.zoomPointInfo[2])+g.zoomPointInfo[3];g.zoomPointInfo[2]=s}}else{if(g.slopeSide[2]==0){g.zoomPointInfo[4]=g.zoomPointInfo[4]+(s-g.midPointInfo[2]);g.zoomPointInfo[5]=g.zoomPointInfo[5]}else{if(g.slopeSide[2]=="Infinity"){g.zoomPointInfo[4]=g.zoomPointInfo[4];g.zoomPointInfo[5]=g.zoomPointInfo[5]+(r-g.midPointInfo[3])}else{g.zoomPointInfo[4]=(A*y-E*t)/(j*E-q*A);g.zoomPointInfo[5]=(q*t-j*y)/(j*E-q*A)}}if(g.slopeSide[0]==0){g.zoomPointInfo[2]=g.zoomPointInfo[2]+(s-g.midPointInfo[2]);g.zoomPointInfo[3]=g.zoomPointInfo[3]}else{if(g.slopeSide[0]=="Infinity"){g.zoomPointInfo[2]=g.zoomPointInfo[2];g.zoomPointInfo[3]=g.zoomPointInfo[3]+(r-g.midPointInfo[3])}else{g.zoomPointInfo[2]=(B*y-E*v)/(p*E-q*B);g.zoomPointInfo[3]=(q*v-p*y)/(p*E-q*B)}}}}g.checkPointBorder();if(g.checkPointShape()){g.drawErrorRect=true;g.zoomPointInfo[2]=D;g.zoomPointInfo[3]=x;g.zoomPointInfo[4]=C;g.zoomPointInfo[5]=w}else{g.drawErrorRect=false}g.drawRect()}else{if(u==6&&g.pointInductor[6]==true){this.style.cursor="move";if(h){h.clearRect(0,0,g.editorCanvasWidth,g.editorCanvasHeight)}D=g.zoomPointInfo[4];x=g.zoomPointInfo[5];C=g.zoomPointInfo[6];w=g.zoomPointInfo[7];q=g.slopeSide[2];E=-1;y=r-g.slopeSide[2]*s;p=g.slopeSide[1];B=-1;v=g.zoomPointInfo[5]-g.slopeSide[1]*g.zoomPointInfo[4];j=g.slopeSide[3];A=-1;t=g.zoomPointInfo[7]-g.slopeSide[3]*g.zoomPointInfo[6];if(g.slopeSide[2]==0){if(g.slopeSide[3]=="Infinity"){g.zoomPointInfo[6]=g.zoomPointInfo[6];g.zoomPointInfo[7]=r}else{g.zoomPointInfo[6]=(r-g.zoomPointInfo[7])/g.slopeSide[3]+g.zoomPointInfo[6];g.zoomPointInfo[7]=r}if(g.slopeSide[1]=="Infinity"){g.zoomPointInfo[4]=g.zoomPointInfo[4];g.zoomPointInfo[5]=r}else{g.zoomPointInfo[4]=(r-g.zoomPointInfo[5])/g.slopeSide[1]+g.zoomPointInfo[4];g.zoomPointInfo[5]=r}}else{if(g.slopeSide[2]=="Infinity"){if(g.slopeSide[3]==0){g.zoomPointInfo[6]=s;g.zoomPointInfo[7]=g.zoomPointInfo[7]}else{g.zoomPointInfo[7]=g.slopeSide[3]*(s-g.zoomPointInfo[6])+g.zoomPointInfo[7];g.zoomPointInfo[6]=s}if(g.slopeSide[1]==0){g.zoomPointInfo[4]=s;g.zoomPointInfo[5]=g.zoomPointInfo[5]}else{g.zoomPointInfo[5]=g.slopeSide[1]*(s-g.zoomPointInfo[4])+g.zoomPointInfo[5];g.zoomPointInfo[4]=s}}else{if(g.slopeSide[3]==0){g.zoomPointInfo[6]=g.zoomPointInfo[6]+(s-g.midPointInfo[4]);g.zoomPointInfo[7]=g.zoomPointInfo[7]}else{if(g.slopeSide[3]=="Infinity"){g.zoomPointInfo[6]=g.zoomPointInfo[6];g.zoomPointInfo[7]=g.zoomPointInfo[7]+(r-g.midPointInfo[5])}else{g.zoomPointInfo[6]=(A*y-E*t)/(j*E-q*A);g.zoomPointInfo[7]=(q*t-j*y)/(j*E-q*A)}}if(g.slopeSide[1]==0){g.zoomPointInfo[4]=g.zoomPointInfo[4]+(s-g.midPointInfo[4]);g.zoomPointInfo[5]=g.zoomPointInfo[5]}else{if(g.slopeSide[1]=="Infinity"){g.zoomPointInfo[4]=g.zoomPointInfo[4];g.zoomPointInfo[5]=g.zoomPointInfo[5]+(r-g.midPointInfo[5])}else{g.zoomPointInfo[4]=(B*y-E*v)/(p*E-q*B);g.zoomPointInfo[5]=(q*v-p*y)/(p*E-q*B)}}}}g.checkPointBorder();if(g.checkPointShape()){g.drawErrorRect=true;g.zoomPointInfo[4]=D;g.zoomPointInfo[5]=x;g.zoomPointInfo[6]=C;g.zoomPointInfo[7]=w}else{g.drawErrorRect=false}g.drawRect()}else{if(u==7&&g.pointInductor[7]==true){this.style.cursor="move";if(h){h.clearRect(0,0,g.editorCanvasWidth,g.editorCanvasHeight)}D=g.zoomPointInfo[6];x=g.zoomPointInfo[7];C=g.zoomPointInfo[0];w=g.zoomPointInfo[1];q=g.slopeSide[3];E=-1;y=r-g.slopeSide[3]*s;p=g.slopeSide[2];B=-1;v=g.zoomPointInfo[7]-g.slopeSide[2]*g.zoomPointInfo[6];j=g.slopeSide[0];A=-1;t=g.zoomPointInfo[1]-g.slopeSide[0]*g.zoomPointInfo[0];if(g.slopeSide[3]==0){if(g.slopeSide[0]=="Infinity"){g.zoomPointInfo[0]=g.zoomPointInfo[0];g.zoomPointInfo[1]=r}else{g.zoomPointInfo[0]=(r-g.zoomPointInfo[1])/g.slopeSide[0]+g.zoomPointInfo[0];g.zoomPointInfo[1]=r}if(g.slopeSide[2]=="Infinity"){g.zoomPointInfo[6]=g.zoomPointInfo[6];g.zoomPointInfo[7]=r}else{g.zoomPointInfo[6]=(r-g.zoomPointInfo[7])/g.slopeSide[2]+g.zoomPointInfo[6];g.zoomPointInfo[7]=r}}else{if(g.slopeSide[3]=="Infinity"){if(g.slopeSide[0]==0){g.zoomPointInfo[0]=s;g.zoomPointInfo[1]=g.zoomPointInfo[1]}else{g.zoomPointInfo[1]=g.slopeSide[0]*(s-g.zoomPointInfo[0])+g.zoomPointInfo[1];g.zoomPointInfo[0]=s}if(g.slopeSide[2]==0){g.zoomPointInfo[6]=s;g.zoomPointInfo[7]=g.zoomPointInfo[7]}else{g.zoomPointInfo[7]=g.slopeSide[2]*(s-g.zoomPointInfo[6])+g.zoomPointInfo[7];g.zoomPointInfo[6]=s}}else{if(g.slopeSide[0]==0){g.zoomPointInfo[0]=g.zoomPointInfo[0]+(s-g.midPointInfo[6]);g.zoomPointInfo[1]=g.zoomPointInfo[1]}else{if(g.slopeSide[0]=="Infinity"){g.zoomPointInfo[0]=g.zoomPointInfo[0];g.zoomPointInfo[1]=g.zoomPointInfo[1]+(r-g.midPointInfo[7])}else{g.zoomPointInfo[0]=(A*y-E*t)/(j*E-q*A);g.zoomPointInfo[1]=(q*t-j*y)/(j*E-q*A)}}if(g.slopeSide[2]==0){g.zoomPointInfo[6]=g.zoomPointInfo[6]+(s-g.midPointInfo[6]);g.zoomPointInfo[7]=g.zoomPointInfo[7]}else{if(g.slopeSide[2]=="Infinity"){g.zoomPointInfo[6]=g.zoomPointInfo[6];g.zoomPointInfo[7]=g.zoomPointInfo[7]+(r-g.midPointInfo[7])}else{g.zoomPointInfo[6]=(B*y-E*v)/(p*E-q*B);g.zoomPointInfo[7]=(q*v-p*y)/(p*E-q*B)}}}}g.checkPointBorder();if(g.checkPointShape()){g.drawErrorRect=true;g.zoomPointInfo[6]=D;g.zoomPointInfo[7]=x;g.zoomPointInfo[0]=C;g.zoomPointInfo[1]=w}else{g.drawErrorRect=false}g.drawRect()}}}}}}}};g.editorCanvas.onmouseup=function(o){this.style.cursor="default";this.onmousemove=null;if(g.curPointIndex<4){if(g.invalidShape){g.zoomPointInfo[2*g.curPointIndex]=g.tempx;g.zoomPointInfo[2*g.curPointIndex+1]=g.tempy;g.getSlopeSide();g.drawErrorRect=false;g.drawRect();g.invalidShape=false}}else{if(g.curPointIndex>=4){if(g.invalidShape){var n=g.curPointIndex;g.zoomPointInfo[2*(n-4)]=g.tempx0;g.zoomPointInfo[2*(n-4)+1]=g.tempy0;g.zoomPointInfo[(2*(n-4)+2)%8]=g.tempx1;g.zoomPointInfo[(2*(n-4)+3)%8]=g.tempy1;g.getSlopeSide();g.drawErrorRect=false;g.drawRect();g.invalidShape=false}}}var k=g.zoomPointInfo;var m=k[0],v=k[1],l=k[2],u=k[3],j=k[4],t=k[5],h=k[6],r=k[7];while(m>=l||u>=t||j<=h||r<=v||Math.abs((u+t-v-r)/(l+j-h-m))>Math.abs((t+r-v-u)/(j+h-m-l))){var s=m;m=l;l=j;j=h;h=s;var q=v;v=u;u=t;t=r;r=q}k[0]=m;k[1]=v;k[2]=l;k[3]=u;k[4]=j;k[5]=t;k[6]=h;k[7]=r};g.editorCanvas.onmouseout=function(h){this.style.cursor="default";this.onmousemove=null;g.editorCanvas.onmouseup()};g.editorCanvas.onmouseover=function(h){this.style.cursor="default";this.onmousemove=null;g.editorCanvas.onmouseup()}};c.prototype.getMovePointInfo=function(){var g=this;for(var f=0;f<g.movePointInfo.length;f++){g.movePointInfo[f]=g.pointInfo[f+2]}return g.movePointInfo};c.prototype.getMidPointInfo=function(){var f=this;f.midPointInfo[0]=1*((f.zoomPointInfo[0]+f.zoomPointInfo[2])/2);f.midPointInfo[1]=1*((f.zoomPointInfo[1]+f.zoomPointInfo[3])/2);f.midPointInfo[2]=1*((f.zoomPointInfo[2]+f.zoomPointInfo[4])/2);f.midPointInfo[3]=1*((f.zoomPointInfo[3]+f.zoomPointInfo[5])/2);f.midPointInfo[4]=1*((f.zoomPointInfo[4]+f.zoomPointInfo[6])/2);f.midPointInfo[5]=1*((f.zoomPointInfo[5]+f.zoomPointInfo[7])/2);f.midPointInfo[6]=1*((f.zoomPointInfo[6]+f.zoomPointInfo[0])/2);f.midPointInfo[7]=1*((f.zoomPointInfo[7]+f.zoomPointInfo[1])/2);return f.midPointInfo};c.prototype.getSlopeSide=function(){var g=this;for(var f=0;f<4;f++){if(f<3){if((g.zoomPointInfo[2*f+3]-g.zoomPointInfo[2*f+1])==0&&(g.zoomPointInfo[2*(f+1)]-g.zoomPointInfo[2*f])==0){g.slopeSide[f]=0}else{g.slopeSide[f]=(g.zoomPointInfo[2*f+3]-g.zoomPointInfo[2*f+1])/(g.zoomPointInfo[2*(f+1)]-g.zoomPointInfo[2*f])}}else{if(f==3){if((g.zoomPointInfo[7]-g.zoomPointInfo[1])==0&&(g.zoomPointInfo[6]-g.zoomPointInfo[0])==0){g.slopeSide[3]=0}else{g.slopeSide[3]=(g.zoomPointInfo[7]-g.zoomPointInfo[1])/(g.zoomPointInfo[6]-g.zoomPointInfo[0])}}}}return g.slopeSide};c.prototype.updateMovePointInfo=function(){var h=this,g;g=h.documentEditor.ui.getZoom();for(var f=0;f<h.zoomPointInfo.length;f++){h.movePointInfo[f]=1*(h.zoomPointInfo[f]/g)}for(var f=0;f<h.zoomPointInfo.length;f++){if(h.movePointInfo[f]<0){h.movePointInfo[f]=0}if(h.movePointInfo[2*f]>h.objDocumentDefaultWidth-1){h.movePointInfo[2*f]=h.objDocumentDefaultWidth-1}if(h.movePointInfo[2*f+1]>h.objDocumentDefaultHeight-1){h.movePointInfo[2*f+1]=h.objDocumentDefaultHeight-1}}return h.movePointInfo};c.prototype.updateZoomPointInfo=function(){var h=this,g;g=h.documentEditor.ui.getZoom();for(var f=0;f<h.zoomPointInfo.length;f++){h.zoomPointInfo[f]=h.zoomPointInfo[f]*(g/h.zoom)}h.zoom=g;return h.zoomPointInfo};c.prototype.checkPointBorder=function(){var g=this;for(var f=0;f<g.zoomPointInfo.length/2;f++){if(g.zoomPointInfo[2*f]<0){g.zoomPointInfo[2*f]=0}else{if(g.zoomPointInfo[2*f]>g.editorCanvasWidth-1){g.zoomPointInfo[2*f]=g.editorCanvasWidth-1}}if(g.zoomPointInfo[2*f+1]<0){g.zoomPointInfo[2*f+1]=0}else{if(g.zoomPointInfo[2*f+1]>g.editorCanvasHeight-1){g.zoomPointInfo[2*f+1]=g.editorCanvasHeight-1}}}};c.prototype.checkPointShape=function(){var o=this;var i=o.zoomPointInfo;var l=i[0],v=i[1],j=i[2],t=i[3],g=i[4],r=i[5],f=i[6],q=i[7];var k=r-v,u=l-g,n=g*v-l*r;var h=q-t,s=j-f,m=f*t-j*q;if(!((k*j+u*t+n)>0&&(k*f+u*q+n)<0&&(h*l+s*v+m)<0&&(h*g+s*r+m)>0)){o.invalidShape=true;return true}o.invalidShape=false;return false};c.prototype.initHintDiv=function(){var f=this;f.hintDiv=document.createElement("div");f.hintDiv.className="ds-dws-doc-hint-container";f.setHintString("Loading ...");f.hintDiv.style.display="none";f.hintDiv.style.textAlign="center";f.outerDiv.appendChild(f.hintDiv)};c.prototype.setHintString=function(f){if(!e.isString(f)){return null}var g=this;if(g.hintDiv.innerText){g.hintDiv.innerText=f}else{if(g.hintDiv.textContent){g.hintDiv.textContent=f}else{g.hintDiv.appendChild(document.createTextNode(f))}}};c.prototype.drawRect=function(){var g=this;g.getMidPointInfo();if(window.HTMLCanvasElement){var f=g.editorCanvas.getContext("2d");g.brushThickness=g.documentEditor.ui.getDocumentBoundaryThickness();f.clearRect(0,0,g.editorCanvasWidth,g.editorCanvasHeight);f.beginPath();if(g.drawErrorRect){f.strokeStyle=e.IntToColorStr(4278190335)}else{f.strokeStyle=e.IntToColorStr(g.documentEditor.ui.getDocumentBoundaryColor())}f.lineWidth=g.brushThickness;f.moveTo(g.zoomPointInfo[0],g.zoomPointInfo[1]);f.lineTo(g.zoomPointInfo[2],g.zoomPointInfo[3]);f.lineTo(g.zoomPointInfo[4],g.zoomPointInfo[5]);f.lineTo(g.zoomPointInfo[6],g.zoomPointInfo[7]);f.closePath();f.stroke()}g.drawArc(0,g.zoomPointInfo[0],g.zoomPointInfo[1],g.brushThickness+4,g.brushThickness+3);g.drawArc(1,g.zoomPointInfo[2],g.zoomPointInfo[3],g.brushThickness+4,g.brushThickness+3);g.drawArc(2,g.zoomPointInfo[4],g.zoomPointInfo[5],g.brushThickness+4,g.brushThickness+3);g.drawArc(3,g.zoomPointInfo[6],g.zoomPointInfo[7],g.brushThickness+4,g.brushThickness+3);g.drawArc(4,g.midPointInfo[0],g.midPointInfo[1],g.brushThickness+3,g.brushThickness+2);g.drawArc(5,g.midPointInfo[2],g.midPointInfo[3],g.brushThickness+3,g.brushThickness+2);g.drawArc(6,g.midPointInfo[4],g.midPointInfo[5],g.brushThickness+3,g.brushThickness+2);g.drawArc(7,g.midPointInfo[6],g.midPointInfo[7],g.brushThickness+3,g.brushThickness+2)};c.prototype.drawArc=function(j,i,g,m,k){var l=this;if(window.HTMLCanvasElement){var h=l.editorCanvas.getContext("2d");h.beginPath();h.fillStyle=e.IntToColorStr(l.documentEditor.ui.getDocumentBoundaryColor());h.lineWidth=l.documentEditor.ui.getDocumentBoundaryThickness();h.arc(i,g,m,0,Math.PI*2);h.stroke();h.closePath();h.beginPath();h.fillStyle="rgba(255,255,255,.5)";h.arc(i,g,k,0,Math.PI*2);h.fill();h.closePath()}else{var f=l.notH5DocBorderPoints[j];f.style.background=e.IntToColorStr(l.documentEditor.ui.getDocumentBoundaryColor());f.style.width=k*2+"px";f.style.height=k*2+"px";f.style.left=(i-k)+"px";f.style.top=(g-k)+"px"}};c.prototype.initObjDoc=function(){var f=this;f.objDocument=new Image();f.objDocument.className="ds-dws-doc-obj";f.objDocument.setAttribute("alt","document editor");f.objDocument.style.display="none";f.hintDiv.style.display="block";f.setHintString("Loading ...");f.positionHintDiv();f.objDocument.onload=function(){f.fitDocument();f.hintDiv.style.display="none";f.objDocument.style.display=""};f.objDocument.onerror=function(){++f.curLoadCount;if(f.curLoadCount>f.MAXLOACOUNT){f.setHintString("Error ocurrs");a.handleImageLoadingError(f.dwsObject,f.objDocument.src);if(f.objDocument.parentNode){f.objDocument.parentNode.removeChild(this)}}else{f.objDocument.src=[f.documentUrl,"&ts=",e.now()].join("")}};f.curLoadCount=1;f.objDocument.src=[f.documentUrl,"&ts=",e.now()].join("");f.outerDiv.appendChild(f.objDocument)};c.prototype.refreshUIDoc=function(){var g=this,f;f=g.documentEditor.ui.getZoom();g.objDocument.width=f*g.objDocumentDefaultWidth;g.objDocument.height=f*g.objDocumentDefaultHeight;if(window.HTMLCanvasElement){g.editorCanvas.setAttribute("width",f*g.objDocumentDefaultWidth);g.editorCanvas.setAttribute("height",f*g.objDocumentDefaultHeight)}else{g.editorCanvas.parentNode.style.width=f*g.objDocumentDefaultWidth+"px";g.editorCanvas.parentNode.style.height=f*g.objDocumentDefaultHeight+"px";g.editorCanvas.style.width=f*g.objDocumentDefaultWidth+"px";g.editorCanvas.style.height=f*g.objDocumentDefaultHeight+"px"}g.editorCanvasWidth=f*g.objDocumentDefaultWidth;g.editorCanvasHeight=f*g.objDocumentDefaultHeight;g.refreshScrollBar();g.positionObjDoc();g.positionEditorCanvas()};c.prototype.refreshSrcDoc=function(){var i=this,h;var f=i.hintDiv,g=i.objDocument;h=i.documentEditor.ui.getZoom();i.initHintDiv();i.objDocument=new Image();i.objDocument.className="ds-dws-doc-obj";i.objDocument.setAttribute("alt","document editor");i.objDocument.style.display="none";i.hintDiv.style.display="block";i.setHintString("Loading ...");i.positionHintDiv();i.objDocument.onload=function(){i.documentContainerImageObj.removeChild(f);i.documentContainerImageObj.removeChild(g);i.objDocument.width=h*i.objDocumentDefaultWidth;i.objDocument.height=h*i.objDocumentDefaultHeight;i.positionObjDoc();i.hintDiv.style.display="none";i.objDocument.style.display=""};i.objDocument.onerror=function(){++i.curLoadCount;if(i.curLoadCount>i.MAXLOACOUNT){i.setHintString("Error ocurrs");a.handleImageLoadingError(i.dwsObject,i.objDocument.src);if(i.objDocument.parentNode){i.objDocument.parentNode.removeChild(this)}}else{i.objDocument.src=[i.documentUrl,"&ts=",e.now()].join("")}};i.curLoadCount=1;i.objDocument.src=[i.documentUrl,"&ts=",e.now()].join("");i.outerDiv.appendChild(i.objDocument)};c.prototype.refreshRotateDoc=function(j){var k=this,h,g;var f=k.hintDiv,i=k.objDocument;k.zoom=k.documentEditor.ui.getZoom();k.initHintDiv();k.objDocument=new Image();k.objDocument.className="ds-dws-doc-obj";k.objDocument.setAttribute("alt","document editor");k.objDocument.style.display="none";k.hintDiv.style.display="block";k.setHintString("Loading ...");k.positionHintDiv();h=k.objDocumentDefaultWidth;k.objDocumentDefaultWidth=k.objDocumentDefaultHeight;k.objDocumentDefaultHeight=h;k.objDocument.onload=function(){k.documentContainerImageObj.removeChild(f);k.documentContainerImageObj.removeChild(i);k.objDocument.width=k.zoom*k.objDocumentDefaultWidth;k.objDocument.height=k.zoom*k.objDocumentDefaultHeight;k.positionObjDoc();k.hintDiv.style.display="none";k.objDocument.style.display="";k.refreshScrollBar();if(j=="left"){k.refreshRotateLeftCanvas()}else{k.refreshRotateRightCanvas()}if(k.documentEditor.ui._zoomSet==false){k.fitDocument()}};k.objDocument.onerror=function(){++k.curLoadCount;if(k.curLoadCount>k.MAXLOACOUNT){k.setHintString("Error ocurrs");a.handleImageLoadingError(k.dwsObject,k.objDocument.src);if(k.objDocument.parentNode){k.objDocument.parentNode.removeChild(this)}}else{k.objDocument.src=[k.documentUrl,"&ts=",e.now()].join("")}};k.curLoadCount=1;k.objDocument.src=[k.documentUrl,"&ts=",e.now()].join("");k.outerDiv.appendChild(k.objDocument)};c.prototype.refreshRotateRightCanvas=function(){var j=this,h=new Array(8),g=new Array(8);j.copyArry(j.zoomPointInfo,h);j.editorCanvasWidth=j.zoom*j.objDocumentDefaultWidth;j.editorCanvasHeight=j.zoom*j.objDocumentDefaultHeight;if(window.HTMLCanvasElement){j.editorCanvas.setAttribute("width",j.zoom*j.objDocumentDefaultWidth);j.editorCanvas.setAttribute("height",j.zoom*j.objDocumentDefaultHeight)}else{j.editorCanvas.parentNode.style.width=j.zoom*j.objDocumentDefaultWidth;j.editorCanvas.parentNode.style.height=j.zoom*j.objDocumentDefaultHeight;j.editorCanvas.style.width=j.zoom*j.objDocumentDefaultWidth;j.editorCanvas.style.height=j.zoom*j.objDocumentDefaultHeight}for(var f=0;f<h.length;f++){if(f<2){j.zoomPointInfo[f]=h[f+6]}else{if(f>1){j.zoomPointInfo[f]=h[f-2]}}}j.copyArry(j.zoomPointInfo,g);for(var f=0;f<g.length/2;f++){j.zoomPointInfo[2*f+1]=g[2*f];j.zoomPointInfo[2*f]=j.editorCanvasWidth-g[2*f+1]}j.drawRect();j.positionEditorCanvas()};c.prototype.refreshRotateLeftCanvas=function(){var j=this,h=new Array(8),g=new Array(8);j.copyArry(j.zoomPointInfo,h);j.editorCanvasWidth=j.zoom*j.objDocumentDefaultWidth;j.editorCanvasHeight=j.zoom*j.objDocumentDefaultHeight;if(window.HTMLCanvasElement){j.editorCanvas.setAttribute("width",j.zoom*j.objDocumentDefaultWidth);j.editorCanvas.setAttribute("height",j.zoom*j.objDocumentDefaultHeight)}else{j.editorCanvas.parentNode.style.width=j.zoom*j.objDocumentDefaultWidth+"px";j.editorCanvas.parentNode.style.height=j.zoom*j.objDocumentDefaultHeight+"px";j.editorCanvas.style.width=j.zoom*j.objDocumentDefaultWidth+"px";j.editorCanvas.style.height=j.zoom*j.objDocumentDefaultHeight+"px"}j.zoomPointInfo[0]=h[2];j.zoomPointInfo[1]=h[3];j.zoomPointInfo[2]=h[4];j.zoomPointInfo[3]=h[5];j.zoomPointInfo[4]=h[6];j.zoomPointInfo[5]=h[7];j.zoomPointInfo[6]=h[0];j.zoomPointInfo[7]=h[1];j.copyArry(j.zoomPointInfo,g);for(var f=0;f<g.length/2;f++){j.zoomPointInfo[2*f+1]=j.editorCanvasHeight-g[2*f];j.zoomPointInfo[2*f]=g[2*f+1]}j.drawRect();j.positionEditorCanvas()};c.prototype.fitDocument=function(){var h=this;var g=h.documentEditorWidth/h.documentEditorHeight;var f=h.objDocumentDefaultWidth/h.objDocumentDefaultHeight;if(f>g){h.objDocument.width=h.documentEditorWidth;h.objDocument.height=h.objDocument.width/f}else{h.objDocument.height=h.documentEditorHeight;h.objDocument.width=h.objDocument.height*f}if(window.HTMLCanvasElement){h.editorCanvas.setAttribute("width",h.objDocument.width);h.editorCanvas.setAttribute("height",h.objDocument.height)}else{h.editorCanvas.parentNode.style.width=h.objDocument.width+"px";h.editorCanvas.parentNode.style.height=h.objDocument.height+"px";h.editorCanvas.style.width=h.objDocument.width+"px";h.editorCanvas.style.height=h.objDocument.height+"px"}h.editorCanvasWidth=h.objDocument.width;h.editorCanvasHeight=h.objDocument.height;h.documentEditor.ui._zoom=h.objDocument.width/h.objDocumentDefaultWidth;h.updateZoomPointInfo();h.positionObjDoc();h.positionEditorCanvas();h.refreshScrollBar();h.drawRect()};c.prototype.refreshScrollBar=function(){var f=this;if(f.objDocument.width>f.documentEditorWidth){f.containerBox.style.overflowX="scroll"}else{f.containerBox.style.overflowX="hidden"}if(f.objDocument.height>f.documentEditorHeight){f.containerBox.style.overflowY="scroll"}else{f.containerBox.style.overflowY="hidden"}};c.prototype.positionObjDoc=function(){var h=this;if(!h.objDocument){return}h.objDocument.style.position="absolute";var g=(h.documentEditorHeight-h.objDocument.height)/2,f=(h.documentEditorWidth-h.objDocument.width)/2;if(g<0){g=0}if(f<0){f=0}h.objDocument.style.top=parseInt(g)+"px";h.objDocument.style.left=parseInt(f)+"px"};c.prototype.positionEditorCanvas=function(){var h=this;var g=(h.documentEditorHeight-h.editorCanvasHeight)/2,f=(h.documentEditorWidth-h.editorCanvasWidth)/2;if(g<0){g=0}if(f<0){f=0}if(window.HTMLCanvasElement){h.editorCanvas.style.top=parseInt(g)+"px";h.editorCanvas.style.left=parseInt(f)+"px"}else{h.editorCanvas.parentNode.style.top=parseInt(g)+"px";h.editorCanvas.parentNode.style.left=parseInt(f)+"px"}};c.prototype.positionHintDiv=function(){var k=this,g=k.documentEditor.ui._userDocumentEditorWidth,h=k.documentEditor.ui._userDocumentEditorHeight,j=k.hintDiv.style.width,f=k.hintDiv.style.height;var i=(h-f)/2;if(i<0){i=0}k.hintDiv.style.position="relative";k.hintDiv.style.top=parseInt(i)+"px"};c.prototype.refreshUI=function(){var f=this;f.updateZoomPointInfo();f.midPointInfo=f.getMidPointInfo();f.refreshUIDoc();f.drawRect()};c.prototype.refreshSrc=function(){var f=this;f.documentUrl=f.getRefreshedDocUrl();f.refreshSrcDoc()};c.prototype.refreshRotate=function(f){var g=this;g.documentUrl=g.getRefreshedDocUrl();g.refreshRotateDoc(f)};c.prototype.copyArry=function(g,f){for(var h=0;h<g.length;h++){f[h]=g[h]}};c.prototype.getRefreshedDocUrl=function(){var f=this;return[a.preUrl,a.portInfo.curPort,"/",dynamsoft.dcsEnv._getVersionStrForCommand(),"/img?session=",a.sessionId,"&object=",f.dwsObject._dwsObjectId,"&documenteditor=",f.documentEditor._docEditorId].join("")};c.prototype.GetDocBoundaryInfoFromEditor=function(){var i=this;var h={session:a.sessionId,object:i.dwsObject._dwsObjectId,method:"GetDocBoundaryInfo",parameter:[i.documentEditor._docEditorId]},g=function(j){i.pointInfo=j.result};var f=e.detect.postSyncCommand(i._dwsObject,e.stringify(h),g,null)};c.prototype.destroy=function(){var f=this;if(f.hintDiv&&f.hintDiv.parentNode){f.hintDiv.parentNode.removeChild(f.hintDiv)}if(f.objDocument&&f.objDocument.parentNode){f.objDocument.parentNode.removeChild(f.objDocument)}if(window.HTMLCanvasElement){if(f.editorCanvas){f.editorCanvas.getContext("2d").clearRect(0,0,f.documentEditor.ui._userDocumentEditorWidth,f.documentEditor.ui._userDocumentEditorHeight)}else{f.documentEditor.ui._documentContainerCanvasEditor.getContext("2d").clearRect(0,0,f.documentEditor.ui._userDocumentEditorWidth,f.documentEditor.ui._userDocumentEditorHeight)}f.editorCanvas.setAttribute("width","");f.editorCanvas.setAttribute("height","")}else{f.editorCanvas.style.width="";f.editorCanvas.style.height=""}f.editorCanvasWidth=f.objDocument.width=0;f.editorCanvasHeight=f.objDocument.height=0;f.zoom=1;f.documentEditor.ui._zoom=1;f.documentEditor.ui._zoomSet=false;f.refreshScrollBar();f.bDestroy=true};d.DocumentControl=c})(dynamsoft);var EnumDCS_Language={English:0,French:1,Arabic:2,Spanish:3,Portuguese:4,German:5,Italian:6,Russian:7,Chinese:8};var EnumDCS_PlatformType={enumWindow:0,enumMac:1,enumLinux:2};var EnumDCS_InitMsg={Info:1,Error:2,NotInstalledError:3,DownloadError:4,DownloadNotRestartError:5};(function(b){var f=b.lib,g=b.dcsEnv,a=f.detect,h=false;var l=function(){var m=dynamsoft.initOrder,o=false;if(!h){for(var n=0;n<m.length;n++){if(m[n]=="dcs"){o=true;break}}if(!o){m.push("dcs");h=true}}g.initQueue.push(arguments);if(!a.initIntervalId){a.initIntervalId=setInterval(a.funcHandleInit,1000)}};var j=function(n){if(arguments.length!=1||!f.isString(n)){return null}var m=g._videoViewerDic[n];return m?m.dwsObject:null};var d=function(){var m;if(arguments.length>0){return m}var o={session:f.detect.sessionId,method:"GetConfigedLogLevel"},n=function(p){if(p.result[0]!==undefined){m=p.result[0]}};f.detect.postSyncCommand(null,f.stringify(o),n,null);return m};var c=function(n){var m=!1;if(arguments.length!=1||!f.isNumber(arguments[0])){return m}n=Math.round(n);if(n!==0&&n!==1){return m}var o={session:f.detect.sessionId,method:"ConfigLogLevel",parameter:[n]};m=f.detect.postSyncCommand(null,f.stringify(o),null,null);return m};var k=function(){var m=!1;if(arguments.length>0){return m}var n={session:f.detect.sessionId,method:"RemoveAllCameraAuthorizations"};m=f.detect.postSyncCommand(null,f.stringify(n),null,null);return m};var i=function(p){var m=!1;if(arguments.length!=1||!f.isNumber(arguments[0])){return m}p=Math.round(p);var n=!1;for(var o in EnumDCS_Language){if(EnumDCS_Language[o]==p){n=!0;break}}if(!n){return m}g._lang=p;return true};g.init=l;g.getObject=j;g.getLogLevel=d;g.setLogLevel=c;g.removeAllCameraAuthorizations=k;g.ondcsnotfound=undefined;g.ondcsneedupgrade=undefined;g.setLanguage=i;g.productName="Dynamsoft Webcam SDK";g.stopCheckingForService=false;g.initQueue=[];g._videoViewerDic={};g._imageViewerDic={};g._documentEditorDic={};g._bTurnToInitDcsObj=false;var e=g.customizableDisplayInfo;g.customizableDisplayInfo={generalMessages:{updatingDService:"Dynamsoft Service is updating ..."}};if(e){if(e.generalMessages){f.mix(g.customizableDisplayInfo.generalMessages,e.generalMessages)}}})(dynamsoft);(function(i){var m=i.lib,s=i.dcp,q=i.dcsEnv,w=m.detect,g=i.navInfo,n=false,l=null,f="dcs",h=window,x=0,u=1,r=2,b=3;var a=function(){Dynamsoft_DCS_OnclickCloseInstall();setTimeout(function(){w.sendHeartBeatCommand(true);var B=q._dwsObjClientIdPrefix+m.getRandom(),A=q._imgViewerClientIdPrefix+m.getRandom(),z=w.getInitInfo(B,A);if(z===undefined){w.bConnected=false}else{if(w.isValidResponseValue(z)&&(z.exception!=0)){w.sendRemoveObjectCommand(B);if(!m.isNull(l[3])){if(z.exception===EnumDCS_ErrorCode.CameraNotAuthorized&&m.isString(z.description)){z.description=z.description.replace("/Webcams","")}(l[3])(z.exception,z.description)}}else{if(w.isValidResponseValue(z)&&(z.exception==0)){new m.sdk.DcsObject(l[0],l[1],B,A);if(!m.isNull(l[2])){(l[2])(l[0],l[1])}}}}if(z==undefined){q.initQueue.unshift(l)}l=null;n=false;k(true)},100)};w.bConnectNumLimited=true;var t=4,e,d,v,o,p,j,y;var k=function(z){if((dynamsoft.initOrder.length>0&&dynamsoft.initOrder[0]=="dcs")){dynamsoft.initOrder.splice(0,1);q._bTurnToInitDcsObj=z}};var c=function(){e=l[0];d=l[1];v=l[2];o=l[3];p=false;j=0;y="Successful";if(l.length!=t){p=true;j=m.errorInfo.getParameterNumberUnmatchedCode();y=m.errorInfo.getParameterNumberUnmatchedString(l.length<4)}if(!p&&!m.isString(e)){p=true;j=m.errorInfo.getTypeNotValidCode();y=m.errorInfo.getTypeNotValidString("videoViewerContainer")}if(!p&&!m.isString(d)){p=true;j=m.errorInfo.getTypeNotValidCode();y=m.errorInfo.getTypeNotValidString("imageViewerContainer")}if(!p&&!m.isFunction(v)&&!m.isNull(v)){p=true;j=m.errorInfo.getTypeNotValidCode();y=m.errorInfo.getTypeNotValidString("onSuccess")}if(!p&&!m.isFunction(o)&&!m.isNull(o)){p=true;j=m.errorInfo.getTypeNotValidCode();y=m.errorInfo.getTypeNotValidString("onFailure")}if(!p&&e==d){p=true;j=m.errorInfo.getContainerIdNotValidCode();y=m.errorInfo.getContainerIdNotValidString()}if(!p){var B;try{B=m.one("#"+e).getEL()}catch(A){B=false}if(!B){p=true;j=m.errorInfo.getObjectNotExistCode();y=m.errorInfo.getObjectNotExistString(e)}if(!p&&B.nodeName.toUpperCase()!="DIV"){p=true;j=m.errorInfo.getContainerTypeNotValidCode();y=m.errorInfo.getContainerTypeNotValidString(false)}}if(!p){var z;try{z=m.one("#"+d).getEL()}catch(A){z=false}if(!z){p=true;j=m.errorInfo.getObjectNotExistCode();y=m.errorInfo.getObjectNotExistString(d)}if(!p&&z.nodeName.toUpperCase()!="DIV"){p=true;j=m.errorInfo.getContainerTypeNotValidCode();y=m.errorInfo.getContainerTypeNotValidString(true)}}if(!p&&q._videoViewerDic[e]){p=true;j=m.errorInfo.getObjectOccupiedCode();y=m.errorInfo.getObjectOccupiedString(e)}if(!p&&q._imageViewerDic[d]){p=true;j=m.errorInfo.getObjectOccupiedCode();y=m.errorInfo.getObjectOccupiedString(d)}};w.funcHandleInit=function(){if(q.initQueue.length<=0||n){if(n){clearInterval(w.initIntervalId);w.initIntervalId=false}return}if(!q._bTurnToInitDcsObj&&dynamsoft.initOrder.length>0&&(dynamsoft.initOrder[0]!="dcs")){return}n=true;l=q.initQueue[0];q.initQueue.splice(0,1);if(!l){n=false;return}else{c();if(g.bMac){if(m.isFunction(o)){setTimeout(function(){o(EnumDCS_ErrorCode.Unknown,"DCS is not yet supported on Mac.")},0)}}if(p){n=false;if(m.isFunction(o)){setTimeout(function(){o(j,y)},0)}k(false);return}}var B=function(){if(!m.isString(w.getSessionIdSync())){if(l){q.initQueue.unshift(l)}n=false;return true}return false},E=function(){m.hideMask()},z=function(G,J){if(m.isFunction(h.OnDCSNeedUpgradeCallback)){var F={},I,H;H=q._getInstallPackageUrl();if(g.bMac){I=EnumDCS_PlatformType.enumMac}else{if(g.bLinux){I=EnumDCS_PlatformType.enumLinux}else{I=EnumDCS_PlatformType.enumWindow}}F["default"]=H;h.OnDCSNeedUpgradeCallback(m.product.name,F,true,I,g.bIE,g.bSafari,g.bSSL,g.strIEVersion,m.detect.bPromptJSOrServerOutdated,G,J)}},A=function(F){w.downloadDcsModule(function(){dynamsoft.dcp.loadZip(w.dcsModuleBinary,100,function(H){var G;try{G=m.parse(H)}catch(I){G=null}if(G&&G.result&&G.result.length>0&&!G.result[0]){n=false;if(m.isFunction(o)){setTimeout(function(){o(m.errorInfo.getSendDcsModuleFailedCode(),m.errorInfo.getSendDcsModuleFailedString())},0)}w.downloadDcsModuleStatus=w.enumDownloadDcsModuleStatus.fail;k(false);setTimeout(function(){Dynamsoft_DCS_OnclickCloseInstall()},0);return}if(F){F()}},function(){n=false;if(m.isFunction(o)){setTimeout(function(){o(m.errorInfo.getSendDcsModuleFailedCode(),m.errorInfo.getSendDcsModuleFailedString())},0)}k(false);setTimeout(function(){Dynamsoft_DCS_OnclickCloseInstall()},0);return})},function(){n=false;if(m.isFunction(o)){setTimeout(function(){o(m.errorInfo.getDownloadDcsModuleFailedCode(),m.errorInfo.getDownloadDcsModuleFailedString())},0)}k(false);setTimeout(function(){Dynamsoft_DCS_OnclickCloseInstall()},0);return})},C=function(){w.asyncGetServiceInfo(function(){if(B()){return}a()},function(){A(function(){w.asyncGetServiceInfo(function(){if(B()){return}a()},function(){n=false;if(m.isFunction(o)){setTimeout(function(){o(m.errorInfo.getConnectDcsModuleFailedCode(),m.errorInfo.getConnectDcsModuleFailedString())},0)}k(false);setTimeout(function(){Dynamsoft_DCS_OnclickCloseInstall()},0);return},500,20)})},undefined,2)};var D=function(){var I=dynamsoft.initOrder,L=false;if(I.length>0&&I[0]===f){var N=function(O,Q){if(g.bIE&&(parseInt(g.strBrowserVersion)<=9)&&m.isString(Q)&&(Q.toLowerCase().indexOf("denied")!==-1||Q.toLowerCase().indexOf(w.IE_PERMISSION_DENIED_Err_Code)!==-1||Q.toLowerCase().indexOf(w.IE_Unknown_Err_Code)!==-1)){n=false;if(m.isFunction(o)){setTimeout(function(){o(m.errorInfo.getOperationNotSupportedCode(),m.errorInfo.getOperationNotSupportedString())},0)}k(false);return}var P=false;if(m.isFunction(q.ondcsnotfound)){P=q.ondcsnotfound()}if(m.isBoolean(P)&&!P){Dynamsoft_DCS_OnclickCloseInstall();q.showInstallDialog(true)}},G=function(){m.showMask()},H=function(){m.hideMask()},J=function(){var P=false;if(m.isFunction(h.OnDCSShowUpdatingDialog)){P=h.OnDCSShowUpdatingDialog()}if(!P){var O=['<div class="dynamsoft-dcs-dlg-tips dynamsoft-dcs-dlg-center">',q.customizableDisplayInfo.generalMessages.updatingDService,"</div>",'<div style="padding-top:35px"></div>'];q.ShowDialog(365,230,O.join(""),true)}return true},F=function(){var O=false;if(m.isFunction(h.OnDCSCloseUpdatingDialog)){O=h.OnDCSCloseUpdatingDialog()}if(!O){q.CloseDialog()}return true},K=function(O,P){L=true;z(O,P)},M=function(T){var Q=1;if(g.bWin){Q=T>0?(T+1):1;if(Q>3){M=null;m.hideMask();m.detect.dcpStatus=b;E();return}}if(!L){if(s.bEnhancedMode){var U=0,P=function(Y){if(m.isArray(Y)&&Y.length>1){m.hideMask();var X=Y[1],W,V;if(X){s.currentUserPorts=X;if(X.dcp){W=X.dcs.port;V=X.dcs.sslPort;if(W==0||V==0){U++;if(U>7){return false}setTimeout(function(){s.getPorts(s.strSID,P,O)},800);return true}w.portInfo.sslPorts=[V];w.portInfo.nonSslPorts=[W];C();return true}}}A(function(){M(Q)});return true},O=function(){m.hideMask();A(function(){M(Q)});return true};s.getPorts(s.strSID,P,O);return true}m.hideMask();M=null;C();return true}var R=q.install._dlgInstall,S=500;if(!R||!R.open){L=false;S=0}setTimeout(M,S)};dynamsoft.managerEnv.IfUpdateService=q.IfUpdateService;s.checkDcpForUpdate(N,G,H,J,F,K,M,q._getProductKey())}else{if(!q.stopCheckingForService){setTimeout(function(){D()},1000)}}};D()};s.onReadys.push(function(){s.ifCheck64bitServiceFirst=q.ifCheck64bitServiceFirst?true:false});m.ready(function(){var z=[i.dcsEnv.resourcesPath,"/hint.css?v=20180418"].join("");m.getCss(z)})})(dynamsoft);
